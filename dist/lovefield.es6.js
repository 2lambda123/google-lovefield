if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function k(a){return function(){return a}}var m,ca=this;function n(a){return void 0!==a}function da(a){return"string"==typeof a}function ea(){}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return null!=a}function ja(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function la(a){return"function"==ha(a)}function ma(a){return a[na]||(a[na]=++oa)}var na="closure_uid_"+(1E9*Math.random()>>>0),oa=0;function pa(a,b,c){return a.call.apply(a.bind,arguments)}
function qa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ra(a,b,c){ra=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pa:qa;return ra.apply(null,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=ca;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Qg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ta(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ta);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ta,Error);ta.prototype.name="CustomError";var ua=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(da(a))return da(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},va=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=da(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},wa=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=Array(c),e=da(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},xa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,b,c)}:function(a,b,c){var d=c;va(a,function(c,f){d=b.call(void 0,d,c,f,a)});return d},ya=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=da(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};
function za(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Aa(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ba(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ha(d))for(var e=0;e<d.length;e+=8192)for(var f=Ba.apply(null,za(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ca(a,b){this.mg=100;this.Jf=a;this.Fg=b;this.ld=0;this.bd=null}Ca.prototype.get=function(){if(0<this.ld){this.ld--;var a=this.bd;this.bd=a.next;a.next=null}else a=this.Jf();return a};Ca.prototype.put=function(a){this.Fg(a);this.ld<this.mg&&(this.ld++,a.next=this.bd,this.bd=a)};var Da=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};
function Ea(a){var b=0;a=Da(String(a)).split(".");for(var c=Da("10").split("."),d=Math.max(a.length,c.length),e=0;0==b&&e<d;e++){var f=a[e]||"",h=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;b=Fa(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||Fa(0==f[2].length,0==h[2].length)||Fa(f[2],h[2]);f=f[3];h=h[3]}while(0==b)}return b}function Fa(a,b){return a<b?-1:a>b?1:0};var Ga;a:{var Ha=ca.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function t(a){return-1!=Ga.indexOf(a)};function Ja(){return t("Safari")&&!(Ka()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ka(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ma(a){ca.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=ca.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=ra(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){ca.setTimeout(a,0)}};function Pa(){this.wd=this.mc=null}var Ra=new Ca(function(){return new Qa},function(a){a.reset()});Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.wd?this.wd.next=c:this.mc=c;this.wd=c};Pa.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.wd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Od=null}Qa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(ca.Promise&&ca.Promise.resolve){var a=ca.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!la(ca.setImmediate)||ca.Window&&ca.Window.prototype&&!t("Edge")&&ca.Window.prototype.setImmediate==ca.setImmediate?(Na||(Na=Oa()),Na(a)):ca.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a;a=Wa.remove();){try{a.Od.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function u(a,b){this.Qa=0;this.hf=void 0;this.Rc=this.ac=this.B=null;this.ad=this.Md=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.fc=this.Dc=this.child=null;this.zd=!1}Za.prototype.reset=function(){this.context=this.fc=this.Dc=this.child=null;this.zd=!1};var $a=new Ca(function(){return new Za},function(a){a.reset()});function ab(a,b,c){var d=$a.get();d.Dc=a;d.fc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Ya(b,2,a);return b}function bb(a){return new u(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(sa(b,a))}function eb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},l=0,p;l<a.length;l++)p=a[l],cb(p,sa(f,l),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new fb(c,a,b)}
u.prototype.then=function(a,b,c){return gb(this,la(a)?a:null,la(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.pe=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.ac||2!=a.Qa&&3!=a.Qa||ib(a);a.Rc?a.Rc.next=b:a.ac=b;a.Rc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new u(function(a,h){e.Dc=b?function(c){try{var e=b.call(d,c);a(e)}catch(L){h(L)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof jb?h(b):a(e)}catch(L){h(L)}}:h});e.child.B=a;hb(a,e);return e.child}u.prototype.Lg=function(a){this.Qa=0;Ya(this,2,a)};u.prototype.Mg=function(a){this.Qa=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Qa&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Qa=1,db(c,a.Lg,a.Mg,a)||(a.hf=c,a.Qa=b,a.B=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof u)return hb(a,ab(b||ea,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(la(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){l||(l=!0,d.call(e,a))}function h(a){l||(l=!0,c.call(e,a))}var l=!1;try{b.call(a,h,f)}catch(p){f(p)}}function ib(a){a.Md||(a.Md=!0,Sa(a.Qf,a))}function mb(a){var b=null;a.ac&&(b=a.ac,a.ac=b.next,b.next=null);a.ac||(a.Rc=null);return b}
u.prototype.Qf=function(){for(var a;a=mb(this);){var b=this.Qa,c=this.hf;if(3==b&&a.fc&&!a.zd){var d;for(d=this;d&&d.ad;d=d.B)d.ad=!1}if(a.child)a.child.B=null,nb(a,b,c);else try{a.zd?a.Dc.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Md=!1};function nb(a,b,c){2==b?a.Dc.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function kb(a,b){a.ad=!0;Sa(function(){a.ad&&ob.call(null,b)})}var ob=Ma;function jb(a){ta.call(this,a)}r(jb,ta);jb.prototype.name="cancel";
function fb(a,b,c){this.ga=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],l=0;l<e+1;l++)h[l]=[],h[l][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(l=1;l<=e;l++)for(p=1;p<=f;p++)c(a[l-1],b[p-1])?h[l][p]=h[l-1][p-1]+1:h[l][p]=Math.max(h[l-1][p],h[l][p-1]);var L=[];l=e;for(p=f;0<l&&0<p;)c(a[l-1],b[p-1])?(L.unshift(d(l-1,p-1)),l--,p--):h[l-1][p]>h[l][p-1]?l--:p--;return L}function qb(a){return xa(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,wa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in ca?ca.StopIteration:{message:"StopIteration",stack:""};function vb(){}vb.prototype.next=function(){throw ub;};vb.prototype.te=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.te)return a.te(!1);if(ja(a)){var b=0,c=new vb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function xb(a,b){if(ja(a))try{va(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=wb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function Ab(a){if(ya(arguments,function(a){return!a.length})||!arguments.length)return new vb;var b=new vb,c=arguments,d=Aa(c.length);b.next=function(){if(d){for(var a=wa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function Bb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Cb(a){var b=Db;return Object.prototype.hasOwnProperty.call(b,10)?b[10]:b[10]=a(10)};var Eb=t("Opera"),Fb=t("Trident")||t("MSIE"),Gb=t("Edge"),Hb=t("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Ib=-1!=Ga.toLowerCase().indexOf("webkit")&&!t("Edge"),Jb=t("Macintosh"),Kb=t("Windows"),Lb=t("Android"),Mb=Bb(),Nb=t("iPad"),Ob=t("iPod"),Pb;
a:{var Qb="",Rb=function(){var a=Ga;if(Hb)return/rv:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a);if(Eb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Rb&&(Qb=Rb?Rb[1]:"");if(Fb){var Sb,Tb=ca.document;Sb=Tb?Tb.documentMode:void 0;if(null!=Sb&&Sb>parseFloat(Qb)){Pb=String(Sb);break a}}Pb=Qb}var Ub=Pb,Db={};function Vb(){return Cb(function(){return 0<=Ea(Ub)})};var Wb=function(){if(Kb){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Ga))?a[1]:"0"}return Jb?(a=/10[_.][0-9_.]+/,(a=a.exec(Ga))?a[0].replace(/_/g,"."):"10"):Lb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Ga))?a[1]:""):Mb||Nb||Ob?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Ga))?a[1].replace(/_/g,"."):""):""}();var Xb=Bb()||t("iPod"),Yb=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Zb(){var a;!(a=Ja()&&!Vb())&&(a=Yb||Xb)&&(a=!(0<=Ea(Wb)));this.lg=a;this.ag=!(this.lg||Fb&&!Vb());this.Pg=Ka()||Ja()}var $b;function x(){return new window.Map}function ac(a){return Array.from(a.keys())}function y(a){return Array.from(a.values())};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function bc(a,b){this.ra=a;this.l=b||this.Fe()}var cc=0;m=bc.prototype;m.id=g("ra");m.Fe=function(){return{}};m.rf=g("l");m.Ia=function(){return{id:this.ra,value:this.rf()}};m.lb=function(a){return"#"==a.substr(-1)?this.ra:null};function dc(a){return new bc(a.id,a.value)}function ec(a){return new bc(cc++,a||{})}function fc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};var gc={};q("lf.TransactionType",gc);gc.READ_ONLY=0;gc.READ_WRITE=1;function z(a,b,c,d,e){this.rd=a;this.eg=b;this.Og=c;this.Lf=d;this.Ef=e}q("lf.TransactionStats",z);z.prototype.Jg=g("rd");z.prototype.success=z.prototype.Jg;z.prototype.dg=g("eg");z.prototype.insertedRowCount=z.prototype.dg;z.prototype.Ng=g("Og");z.prototype.updatedRowCount=z.prototype.Ng;z.prototype.Kf=g("Lf");z.prototype.deletedRowCount=z.prototype.Kf;z.prototype.Df=g("Ef");z.prototype.changedTableCount=z.prototype.Df;function hc(a,b){this.td=a;this.Oa=b||null;this.O=w();this.rd=!1;this.ya=null}hc.prototype.ja=function(){return(0==this.td?this.oc():ic(this)).then(function(a){this.rd=!0;return a}.bind(this))};function ic(a){try{jc(a.Oa)}catch(b){return bb(b)}return kc(a).then(function(a){this.Oa.ja();return a}.bind(a))}function kc(a){lc(a);mc(a);return a.oc()}
function lc(a){a.Oa.fb.forEach(function(a,c){c=this.Oa.ca().get(c);c=this.H(c.getName(),c.ib.bind(c),0);var b=y(a.va).map(function(a){return a.id()});a=y(a.la).map(function(a){return a[1]}).concat(y(a.ua));var e=0<a.length;0<b.length&&c.remove(b,e).pe(this.Oe,this);c.put(a).pe(this.Oe,this)},a)}function mc(a){nc(a.Oa).forEach(function(a){var b=this.H(a.getName(),dc,1);b.remove([]);b.put(a.Ia())},a)}hc.prototype.Oe=function(a){this.O.reject(a)};
hc.prototype.X=function(){if(null===this.ya)if(this.rd)if(0==this.td)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Oa.fb.forEach(function(e){d++;a+=e.ua.size;c+=e.la.size;b+=e.va.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function oc(a){this.Gg=a}oc.prototype.toString=g("Gg");var pc=new oc("backstore"),qc=new oc("cache"),rc=new oc("indexstore"),sc=new oc("engine"),tc=new oc("runner"),uc=new oc("observerregistry"),A=new oc("schema");function B(a){return n(a)?new window.Set(a):new window.Set}function C(a){return Array.from(a)}function vc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function wc(a,b){this.ra=a;this.l=b||{}}function xc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}wc.prototype.V=g("ra");function yc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function zc(a,b){b.forEach(function(a){delete this.l[a]},a)}wc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function Ac(a){return new wc(a.id,JSON.parse(a.value))};function Bc(a,b,c){this.aa=a;this.Lb=b;this.jf=c}m=Bc.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Lb;return Cc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.l[a])})})};function Cc(a,b){var c=x(),d=w();a=xc(b).map(function(a){return new u(function(b,d){try{var e=this.aa.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Ac(a.target.result);c.set(a.V(),a);b()}},this)},a);eb(a).then(function(){d.resolve(c)});return d.ga}
m.Qd=function(){return new u(function(a,b){var c=[];try{var d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Ac(b.value).l,h;for(h in f)c.push(this.Lb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new u(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.aa.name,c));yc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Sb(function(){return this.aa.put(a.Ia())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this));var b=x();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.aa.name,c));zc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.l).length?this.aa.delete(a.V()):this.aa.put(a.Ia())}.bind(this))},this);return eb(a)};function Dc(a,b,c){a=a.b(qc);var d=[c<<9,(c+1<<9)-1];b=a.Ra(b,d[0],d[1]);c=new wc(c);yc(c,b);return c}
function Ec(a,b){return new wc(b)};function Fc(a){this.U=a.b(qc);this.A=a.b(rc);this.g=a.b(A)}Fc.prototype.update=function(a){a.forEach(function(a){Gc(this,a);Hc(this,a)},this)};function Hc(a,b){var c=b.getName();b.va.forEach(function(a,b){this.U.remove(c,b)},a);b.ua.forEach(function(a){this.U.set(c,a)},a);b.la.forEach(function(a){this.U.set(c,a[1])},a)}function Gc(a,b){var c=a.g.table(b.getName());Ic(b).forEach(function(a){Jc(this,c,a)},a)}
function Jc(a,b,c){var d=a.A.ic.get(b.getName())||[],e=0;d.forEach(function(a){try{Kc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Kc(a,[c[1],c[0]])},this),h;}},a)}function Kc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.gb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Lc={};q("lf.ConstraintAction",Lc);Lc.RESTRICT=0;Lc.CASCADE=1;var Mc={};q("lf.ConstraintTiming",Mc);Mc.IMMEDIATE=0;Mc.DEFERRABLE=1;var Oc={};q("lf.Order",Oc);Oc.DESC=0;Oc.ASC=1;var Pc={};q("lf.Type",Pc);Pc.ARRAY_BUFFER=0;Pc.BOOLEAN=1;Pc.DATE_TIME=2;Pc.INTEGER=3;Pc.NUMBER=4;Pc.STRING=5;Pc.OBJECT=6;var Qc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Qc);function D(a,b){this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Rc(){this.ka=x();this.size=0}m=Rc.prototype;m.has=function(a){return this.ka.has(a)};m.set=function(a,b){var c=this.ka.get(a)||null;null===c&&(c=B(),this.ka.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.ka.get(a)||null;null===c&&(c=B(),this.ka.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this)};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this)};
m.delete=function(a,b){var c=this.ka.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.ka.delete(a);return b};m.get=function(a){a=this.ka.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.ka.clear();this.size=0};m.keys=function(){return ac(this.ka)};m.values=function(){var a=[];this.ka.forEach(function(b){a.push.apply(a,C(b))});return a};function Sc(a){this.A=a.b(rc);this.g=a.b(A);this.U=a.b(qc);this.Wc=null}function Tc(a,b,c){var d=b.Jb.sg;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Uc(a,b,c,d){b.Jb.Pd.forEach(function(a){a.timing==d&&Vc(this,a,c)},a)}function Vc(a,b,c){var d=Wc(a,b);c.forEach(function(a){if(Xc(a[0],a[1],b.name)&&(a=a[1].lb(b.name),null!==a&&!d.hb(a)))throw new D(203,b.name);},a)}
function Wc(a,b){null===a.Wc&&(a.Wc=x());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Ta)[b.Ec].Ba(),c=a.A.get(c.j()),a.Wc.set(b.name,c));return c}function Xc(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function Yc(a,b,c,d){b=Zc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&$c(a,b,c,function(a,b,c){if(b.hb(c))throw new D(203,a.name);}))}
function ad(a,b,c){b=Zc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Rc;$c(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.Be,b)});return d}function bd(a,b,c){var d=new Rc;$c(a,c,b,function(a,b,c,l){b.get(c).forEach(function(b){d.set(b,{Nd:a,xg:l[1]})})});return d}function $c(a,b,c,d){b.forEach(function(a){var b=this.A.get(a.name),e=Wc(this,a);c.forEach(function(c){if(Xc(c[0],c[1],e.getName())){var f=c[0].lb(e.getName());d(a,b,f,c)}},this)},a)}
function cd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Uc(a,b,c,d))}function dd(a,b,c,d){0!=c.length&&(Uc(a,b,c,d),Yc(a,b,c,d))}function ed(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Yc(a,b,c,d))}
function fd(a,b,c){var d={oe:[],lf:new Rc},e=new Rc;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Rc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=ad(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Wd(b))},a);e=f;d.lf.Wd(e)}while(0<e.size);return d};function gd(a){this.ua=x();this.la=x();this.va=x();this.w=a}m=gd.prototype;m.getName=g("w");m.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.la.set(a.id(),b);this.va.delete(a.id())}else this.ua.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):this.la.has(c)?(a=[this.la.get(a[0].id())[0],b],this.la.set(c,a)):this.la.set(c,a)};
m.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};m.Wd=function(a){a.ua.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.va.forEach(function(a){this.delete(a)},this)};
function Ic(a){var b=[];a.ua.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.va.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+ac(this.ua).toString()+"], ["+ac(this.la).toString()+"], ["+ac(this.va).toString()+"]"};function hd(a){var b=new gd(a.w);a.ua.forEach(function(a){b.delete(a)});a.va.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.gg=function(){return 0==this.ua.size&&0==this.va.size&&0==this.la.size};function id(a,b){this.Z=x();b.forEach(function(a){this.Z.set(a.getName(),a)},this);this.g=a.b(A);this.U=a.b(qc);this.A=a.b(rc);this.za=new Sc(a);this.cd=new Fc(a);this.fb=x()}function nc(a){var b=[];ac(a.fb).map(function(a){return this.Z.get(a)},a).forEach(function(a){a.Ab()&&(a.Ca().forEach(function(a){b.push(this.A.get(a.j()))},this),b.push(this.A.get(a.getName()+".#")))},a);return b}m=id.prototype;m.ca=g("Z");
m.yb=function(a,b){jd(this,a);Tc(this.za,a,b);cd(this.za,a,b,0);for(var c=0;c<b.length;c++)kd(this,a,[null,b[c]])};function kd(a,b,c){var d=b.getName(),e=a.fb.get(d)||new gd(d);a.fb.set(d,e);try{Jc(a.cd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){jd(this,a);Tc(this.za,a,b);b=b.map(function(a){return[this.U.get(a.id()),a]},this);ld(this,a,b);dd(this.za,a,b,0);b.forEach(function(b){kd(this,a,b)},this)};m.Rd=function(a,b){jd(this,a);Tc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.Jb.nd;if(null===f)var h=null;else{h=this.za;f=f.j();var l=d.lb(f);h=h.A.get(f).get(l);h=0==h.length?null:h[0]}null!=h?(e=this.U.get(h),d.ra=h,dd(this.za,a,[[e,d]],0)):cd(this.za,a,[d],0);kd(this,a,[e,d])}};
m.remove=function(a,b){jd(this,a);md(this,a,b);ed(this.za,a,b,0);for(var c=0;c<b.length;c++)kd(this,a,[b[c],null])};function ld(a,b,c){b=Zc(a.g.info(),b.getName(),1);if(null!==b){var d=bd(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Nd.Be),d=this.U.get(a),e=c.ib(d.Ia());e.l[b.Nd.tb]=b.xg.l[b.Nd.Ec];kd(this,c,[d,e])},this)},a)}}
function md(a,b,c){if(null!==Zc(a.g.info(),b.getName(),1)){b=fd(a.za,b,c);var d=b.lf;b.oe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);ed(this.za,b,a,0);a.forEach(function(a){kd(this,b,[a,null])},this)},a)}}function jc(a){a.fb.forEach(function(a){var b=this.Z.get(a.getName());cd(this.za,b,y(a.ua),1);ed(this.za,b,y(a.va),1);dd(this.za,b,y(a.la),1)},a)}m.ja=aa();m.Fb=function(){var a=y(this.fb).map(function(a){return hd(a)});this.cd.update(a)};
function jd(a,b){if(!a.Z.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.m=b;this.da=this.from==F?!1:c;this.na=this.m==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.da?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.m==F?"unbound":this.m)+(this.na?")":"]")};function nd(a){if(od(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.da));a.m==F||(c=new E(a.m,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.m,this.from,this.na,this.da)};
function pd(a,b){var c=qd(a.from,b.from,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.m==F||d.m>a.from||d.m==a.from&&!d.na&&!a.da}function rd(){return new E(F,F,!1,!1)}function od(a){return a.from==F&&a.m==F}function sd(a){return a.from==a.m&&a.from!=F&&!a.da&&!a.na}E.prototype.contains=function(a){var b=this.m==F||a<this.m||a==this.m&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.da)&&b};
function qd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function td(a,b){var c=qd(a.from,b.from,!0,a.da,b.da);0==c&&(c=qd(a.m,b.m,!1,a.na,b.na));return c}function ud(a){if(0==a.length)return[];a.sort(td);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].m,F,!0,!1):new E(a[c-1].m,a[c].from,!0,!0);return b};function vd(a){this.hc=[];n(a)&&this.add(a)}vd.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};vd.prototype.hb=function(a){return this.hc.some(function(b){return b.contains(a)})};vd.prototype.Nb=g("hc");
vd.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(td);for(var b=[],c=a[0],d=1;d<a.length;++d)if(pd(c,a[d])){var e=a[d],f=rd();if(c.from!=F&&e.from!=F){var h=qd(c.from,e.from,!0);1!=h?(f.from=c.from,f.da=0!=h?c.da:c.da&&e.da):(f.from=e.from,f.da=e.da)}c.m!=F&&e.m!=F&&(h=qd(c.m,e.m,!1),-1!=h?(f.m=c.m,f.na=0!=h?c.na:c.na&&e.na):(f.m=e.m,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function wd(a,b){var c=[];a.Nb().map(function(a){return b.Nb().map(function(b){if(pd(a,b)){var c=rd();var d=qd(a.from,b.from,!0);d=0==d?a.da?a:b:-1!=d?a:b;c.from=d.from;c.da=d.da;a.m==F||b.m==F?b=a.m==F?b:a:(d=qd(a.m,b.m,!1),b=0==d?a.na?a:b:-1==d?a:b);c.m=b.m;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new vd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Wa=null}G.prototype.o=function(){return C(this.L)};function xd(a){return a.entries.map(function(a){return a.ta.l})}function yd(a){return a.entries.map(function(a){return a.ta.id()})}function zd(a,b){return a.Wa.get(b.j())}var Ad=null;function Bd(){null===Ad&&(Ad=new G([],[]));return Ad}
function Cd(a){if(0==a.length)return Bd();var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0;b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b});for(var e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function Dd(a){if(0==a.length)return Bd();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function Ed(a,b){var c=1<b.length;a=a.map(function(a){return new Fd(a,c)});return new G(a,b)}function Fd(a,b){this.ta=a;this.id=Gd++;this.Td=b}var Gd=0;function H(a,b){var c=b.Ja;return null!==c&&a.ta.l.hasOwnProperty(c)?a.ta.l[c]:a.Td?a.ta.l[Hd(b.H())][b.getName()]:a.ta.l[b.getName()]}function Id(a,b,c){var d=b.Ja;if(null!=d)a.ta.l[d]=c;else if(a.Td){d=Hd(b.H());var e=a.ta.l[d];null==e&&(e={},a.ta.l[d]=e);e[b.getName()]=c}else a.ta.l[b.getName()]=c}
function Jd(a,b,c,d){function e(a,b){if(a.Td){a=a.ta.l;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ta.l}var f={};e(a,b);e(c,d);a=new bc(-1,f);return new Fd(a,!0)};q("lf.bind",function(a){return new Kd(a)});function Kd(a){this.ea=a}q("lf.Binder",Kd);Kd.prototype.Ba=g("ea");function Ld(){this.Ue=Md();var a=Nd();this.Mb=x();this.Mb.set(1,Od());this.Mb.set(2,Pd());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Qd());this.Mb.set(6,Rd())}var Sd;function Td(){null!=Sd||(Sd=new Ld);return Sd}function Ud(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Md(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Od(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Nd(){var a=Od();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Qd(){var a=Nd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Rd(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Pd(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.B=null}var Vd=[];I.prototype.getParent=g("B");I.prototype.Za=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Wd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Vd}function Xd(a,b){return J(a)[b]||null}function Yd(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function Zd(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return Zd(this,J(this).indexOf(a))};function $d(a,b,c){Xd(a,c).B=null;b.B=a;a.h[c]=b}function ae(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){ae(a,b,c)})};function be(){I.call(this);this.ra=de++}r(be,I);var de=0;be.prototype.V=g("ra");function ee(a,b,c){be.call(this);this.I=a;this.value=b;this.D=c;this.rc=Ud(Td(),this.I.F(),this.D);this.Sa=!1;this.$b=b}r(ee,be);m=ee.prototype;m.Kb=function(){var a=new ee(this.I,this.value,this.D);a.$b=this.$b;a.qd(this.Sa);var b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.o=function(a){a=null!=a?a:B();a.add(this.I.H());return a};m.qd=ba("Sa");
function fe(a){var b=!1;a.value instanceof Kd||(b="array"==ha(a.value)?!a.value.some(function(a){return a instanceof Kd}):!0);if(!b)throw new D(501);}m.eval=function(a){fe(this);if("in"==this.D)return ge(this,a);var b=a.entries.filter(function(a){return this.rc(H(a,this.I),this.value)!=this.Sa},this);return new G(b,a.o())};
m.bind=function(a){if(this.$b instanceof Kd){var b=this.$b.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ha(this.$b)&&(this.value=this.$b.map(function(b){if(b instanceof Kd){var c=b.Ba();if(a.length<=c)throw new D(510);return a[b.Ba()]}return b}))};function ge(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Sa}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(a,b.o())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Sa?"(complement)":"")+" "+this.value+")"};m.fd=function(){fe(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new E(he(this,this.value[0]),he(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new vd(this.Sa?ud(a):a);a=he(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new vd(this.Sa?nd(a):[a])};function he(a,b){return 2==a.I.F()?b.getTime():b};function ie(a){this.$=a;this.Sc=this.Fa=null}function je(a,b){null===a.Fa&&null!=a.u&&(a.Fa=ke(a.u));return a.Fa.get(b)||null}function ke(a){var b=x();ae(a,function(a){b.set(a.V(),a)});return b}function le(a,b){b.u&&(a.u=b.u.Kb());a.Sc=b}ie.prototype.bind=function(){return this};function me(a,b){a=a.u;null!=a&&ae(a,function(a){a instanceof ee&&a.bind(b)})};function ne(a){ie.call(this,a)}r(ne,ie);function oe(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ne.prototype.ca=function(){return B(this.from)};ne.prototype.clone=function(){var a=new ne(this.$);le(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Rb&&(a.Rb=this.Rb);this.Gb&&(a.Gb=this.Gb);a.ab=this.ab;return a};
ne.prototype.bind=function(a){ne.eb.bind.call(this,a);null!=this.Rb&&(this.W=a[this.Rb.Ba()]);null!=this.Gb&&(this.K=a[this.Gb.Ba()]);me(this,a);return this};function pe(a,b){this.Ga=a;this.Z=b}pe.prototype.Za=g("Ga");pe.prototype.ca=g("Z");function qe(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function re(a,b){this.global=a;this.Ya=a.b(pc);this.od=b.map(function(a){return a.context});this.df=b.map(function(a){return a.de});this.Hd=qe(this.df);this.re=se(this);this.Bb=w()}function se(a){return a.od.some(function(a){return!(a instanceof ne)})?1:0}m=re.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.Za().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.re?void 0:new id(this.global,this.Hd),c=[],d=this.df.slice(),e=this.od;return a().then(function(){this.ia=this.Ya.Cb(this.re,C(this.Hd),b);return this.ia.ja()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Fb();throw a;})};m.F=g("re");m.ca=g("Hd");m.V=function(){return ma(this)};m.ae=aa();
m.X=function(){var a=null;null!=this.ia&&(a=this.ia.X());return null===a?new z(!1,0,0,0,0):a};function te(a,b){re.call(this,a,b);this.Eb=a.b(uc)}r(te,re);te.prototype.getPriority=k(0);te.prototype.ae=function(a){this.od.forEach(function(b,c){ue(this.Eb,b,a[c])},this)};function ve(a,b){this.c=a;this.Eb=a.b(uc);this.Ha=a.b(tc);this.cd=new Fc(a);this.fb=b;var c=a.b(A);a=this.fb.map(function(a){return c.table(a.getName())});this.Z=B(a);this.Bb=w()}m=ve.prototype;m.exec=function(){this.cd.update(this.fb);this.Hc();return v()};m.F=k(1);m.ca=g("Z");m.V=function(){return ma(this)};m.getPriority=k(1);m.Hc=function(){var a=we(this.Eb,this.Z);0!=a.length&&(a=new te(this.c,a),xe(this.Ha,a))};function ye(a){this.c=a;this.Ya=a.b(pc);this.Ha=a.b(tc)}ye.prototype.Zd=function(a){a=new ve(this.c,a);xe(this.Ha,a)};function M(a,b){this.Xb=a;this.i=b;this.Va=x()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.Zc=g("i");M.prototype.$c=function(){throw new D(351);};function ze(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ga}function Ae(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ga}
M.prototype.Da=function(a){return ze(this.i,"@rev/R").then(function(a){this.Pa=a;return ze(this.i,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);var d=this.i.child("@table");return Ae(d,b)}.bind(this))};
function Be(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ga}.call(a).then(function(a){a["@rev"]={R:++this.Pa};return Ae(this.i,a)}.bind(a)):v()}M.prototype.pc=function(a){return Be(this,a,k(null)).then(function(){this.Va.delete(a);return Ae(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.pc;
M.prototype.nc=function(a,b,c){return Be(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Pa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.nc;M.prototype.qc=function(a,b){return Be(this,a,function(a){var c=a.P;delete c[b];return{R:this.Pa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.qc;M.prototype.Gc=function(a,b,c){return Be(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Pa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Gc;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.xc=g("Xb");M.prototype.getVersion=M.prototype.xc;M.prototype.bc=function(a){var b=w();a=this.Va.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ga};M.prototype.dump=function(){var a={},b=ac(this.Va).map(function(b){return this.bc(b).then(function(c){a[b]=c})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Ce(a,b,c){hc.call(this,b,c);this.i=a}r(Ce,hc);Ce.prototype.H=function(a){return this.i.vc(a)};
Ce.prototype.oc=function(){if(0==this.td)return this.O.resolve(),this.O.ga;var a=this.Oa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Pa+1;this.i.Pa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Va.get(e);a.ua.forEach(function(a,e){c[e]={R:b,T:d,P:a.l}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].l}});a.va.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Pa=b-1,c=y(a).map(function(a){return De(this.i,a.getName())},this),
eb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ga};function Ee(){this.Aa=x()}function Fe(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}Ee.prototype.getData=g("Aa");Ee.prototype.get=function(a){return v(Fe(this,a))};function Ge(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}Ee.prototype.put=function(a){Ge(this,a);return v()};function He(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
Ee.prototype.remove=function(a){He(this,a);return v()};function Ie(a){return 0==a.Aa.size?0:ac(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Je(a,b){this.g=a;this.yf=b;this.Fc=x();this.Pa=-1;this.L=x();this.Va=x();this.Ed=null}m=Je.prototype;
m.Da=function(a){this.i=this.yf.child(this.g.name());var b=a||function(){return v()};return ze(this.i,"@db/version").then(function(a){return null===a?Ae(this.i,Ke(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?ze(this.i,"@rev/R").then(function(a){this.Pa=a;return ze(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.g.oa().map(function(a){return De(this,a.getName())},this);
return eb(a)}.bind(this)).then(function(){Le(this);Me(this);return v()}.bind(this)):this.be(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Ae(a,{version:this.g.version()},!0)}.bind(this))};
function Me(a){a.i.off();a.i.on("child_removed",a.ug.bind(a));a.Fd&&(a.Fd.off(),a.Fc.clear());a.Fd=a.i.orderByChild("R").startAt(a.Pa+1);a.Fd.on("value",a.Zd.bind(a))}function Le(a){cc=y(a.L).map(function(a){return Ie(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ug=function(a){var b=a.val(),c=this.Fc.get(b.T)||null;null===c&&(c=B(),this.Fc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Pa&&(this.Pa=b,a=Ne(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),c=ac(a.va);0<c.length&&He(b,c);var f=y(a.ua);a.la.forEach(function(a){f.push(a[1])});Ge(b,f)},this),0<a.length&&this.Bc(a),Me(this))};
function Ne(a,b){var c=B(),d=x();a.Va.forEach(function(a,b){var e=this.L.get(b),f=new gd(b);this.Fc.has(a)&&(b=C(this.Fc.get(a)),b.forEach(function(a){c.add(a)}),Fe(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var l=this.L.get(a.getName());e=this.g.table(a.getName()).ib({id:b,value:e.P});l.getData().has(b)?a.modify([Fe(l,[b])[0],e]):a.add(e)}}}.bind(a));return y(d).filter(function(a){return!a.gg()})}
function De(a,b){var c=w(),d=a.Va.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ee,f=[];a.forEach(function(a){f.push(e.ib({id:parseInt(a.key(),10),value:a.val().P}))});Ge(d,f);this.L.set(b,d);c.resolve()}.bind(a));return c.ga}function Ke(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Pa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.L.set(a,new Ee);this.Va.set(a,d)},a);return b}
m.Cb=function(a,b,c){return new Ce(this,a,c)};m.vc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Ed");m.Bc=function(a){null!=this.Ed&&this.Ed(a)};m.Kc=k(!1);function N(a,b,c,d){this.i=b;this.ia=c;this.Xb=a;this.Qc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.Zc=g("i");N.prototype.getRawDBInstance=N.prototype.Zc;N.prototype.$c=g("ia");N.prototype.getRawTransaction=N.prototype.$c;N.prototype.pc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.pc;
function Oe(a,b,c,d){return new u(function(a,f){try{var e=this.ia.objectStore(b);var l=e.openCursor()}catch(p){f(p);return}l.onsuccess=function(){var b=l.result;b?(c(b),b.continue()):(d(e),a())};l.onerror=f},a)}function Pe(a){return a instanceof ArrayBuffer?fc(a):a instanceof Date?a.getTime():a}function Qe(a,b,c){function d(a){var b=Ac(a.value),d=b.l,e;for(e in d){var f=dc(d[e]);c(f);d[e]=f.Ia()}a.update(b.Ia())}function e(a){var b=dc(a.value);c(b);a.update(b.Ia())}return Oe(a,b,a.Qc?d:e,aa())}
N.prototype.nc=function(a,b,c){var d=Pe(c);return Qe(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.nc;N.prototype.qc=function(a,b){return Qe(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.qc;N.prototype.Gc=function(a,b,c){return Qe(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Gc;
function Re(a,b){var c=[];return new u(function(a,e){try{var d=this.ia.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Qc){var e=Ac(b.value).l,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return ec(b)};N.prototype.createRow=N.prototype.vb;N.prototype.xc=g("Xb");N.prototype.getVersion=N.prototype.xc;
N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return Re(this,a).then(function(a){return a.map(function(a){return a.value})})};function Se(a,b){this.aa=a;this.Lb=b}Se.prototype.get=function(a){if(0==a.length)return Te(this);a=a.map(function(a){return new u(function(b,d){try{var c=this.aa.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Lb(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Te(a){return new u(function(a,c){var b=[];try{var e=this.aa.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Lb(c.value)),c.continue()):a(b)}.bind(this)},a)}Se.prototype.Sb=function(a){return new u(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Se.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Sb(function(){return this.aa.put(a.Ia())}.bind(this))},this);return eb(a)};
Se.prototype.remove=function(a,b){function c(){var b=a.map(function(a){return d.Sb(function(){return d.aa.delete(a)})});return eb(b)}var d=this;return b?c():new u(function(b,f){var e=d.aa.count();e.onsuccess=function(e){0==a.length||e.target.result==a.length?d.Sb(function(){return d.aa.clear()}).then(b,f):c().then(b,f)};e.onerror=f})};function Ue(a,b,c,d,e){hc.call(this,c,e);this.c=a;this.ia=b;this.Qc=d;this.ia.oncomplete=this.O.resolve.bind(this.O);this.ia.onabort=this.O.reject.bind(this.O)}r(Ue,hc);Ue.prototype.H=function(a,b,c){return this.Qc?(c=null!=c?c:0,a=this.ia.objectStore(a),new Bc(a,b,0==c?sa(Dc,this.c):Ec)):new Se(this.ia.objectStore(a),b)};Ue.prototype.oc=function(){return this.O.ga};function Ve(a,b){this.c=a;this.g=b;this.Bd=b.ee.Nf||!1}m=Ve.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){try{var d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){We(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.ke().then(function(b){cc=Math.max(cc,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function We(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Bd);Xe(d);a.g.oa().forEach(sa(a.Gf,d),a);return b(c)}function Xe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Gf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Ab()&&(b.Ca().forEach(function(b){Ye(a,b.j())},this),Ye(a,Ze(b)))};function Ye(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Cb=function(a,b,c){b=this.i.transaction($e(b),0==a?"readonly":"readwrite");return new Ue(this.c,b,a,this.Bd,c)};
function $e(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Ab()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(Ze(a)))});return C(b)}
m.ke=function(){function a(){if(0==c.length)return v();var d=c.shift();return b(d).then(a)}function b(a){return new u(function(b,c){try{var h=d.transaction([a]).objectStore(a).openCursor(null,"prev")}catch(ka){c(ka);return}h.onsuccess=function(a){(a=a.target.result)&&(e=Math.max(e,f(a)));b(e)};h.onerror=function(){b(e)}})}var c=this.g.oa().map(function(a){return a.getName()}),d=this.i,e=0,f=function(a){return this.Bd?(a=Ac(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},0)):a.key}.bind(this);
return new u(function(b){a().then(function(){b(e)})})};m.close=function(){this.i.close()};m.vc=function(){throw new D(511);};m.subscribe=aa();m.Bc=aa();m.Kc=k(!0);function af(a,b,c){hc.call(this,b,c);this.aa=a;0==b&&this.O.resolve()}r(af,hc);af.prototype.H=function(a){return this.aa.vc(a)};af.prototype.oc=function(){this.O.resolve();return this.O.ga};function bf(a){this.g=a;this.L=x()}m=bf.prototype;m.Da=function(){this.g.oa().forEach(this.bg,this);return v()};m.vc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Cb=function(a,b,c){return new af(this,a,c)};function cf(a,b){if(!a.L.has(b)){var c=new Ee;a.L.set(b,c)}}m.bg=function(a){cf(this,a.getName());a.Ab()&&(a.Ca().forEach(function(a){cf(this,a.j())},this),cf(this,Ze(a)))};m.close=aa();m.subscribe=aa();m.Bc=aa();m.Kc=k(!0);function df(a){bf.call(this,a);this.kd=null}r(df,bf);df.prototype.subscribe=function(a){null===this.kd&&(this.kd=a)};df.prototype.Bc=function(a){null===this.kd||this.kd(a)};df.prototype.Kc=k(!1);function ef(a,b,c){this.ia=a;this.w='"'+b+'"';this.Lb=c}ef.prototype.get=function(a){var b=this.Lb;return ff(this.ia,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
ef.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){ff(this.ia,b,[a.id(),JSON.stringify(a.l)])},this);return v()};ef.prototype.remove=function(a){ff(this.ia,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function gf(a,b,c){hc.call(this,b,c);this.i=a;this.L=x();this.Id=[]}r(gf,hc);function hf(a){return a.replace(".","__d__").replace("#","__s__")}gf.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new ef(this,hf(a),b),this.L.set(a,c));return c};function ff(a,b,c,d){var e=w();a.Id.push({Ig:b,yg:c,transform:d,O:e});return e.ga}
gf.prototype.oc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.O.resolve(f)}0<this.Id.length?(a=h=this.Id.shift(),b.executeSql(h.Ig,h.yg,e,c)):this.O.resolve(d)}.bind(this);0==this.td?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ga};function O(a,b,c){this.i=c;this.c=a;this.Xb=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.Zc=g("i");O.prototype.getRawDBInstance=O.prototype.Zc;O.prototype.$c=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.$c;function jf(a){return new gf(a.i,1,new id(a.c,B()))}O.prototype.pc=function(a){var b=jf(this);ff(b,"DROP TABLE "+a,[]);return b.ja()};O.prototype.dropTable=O.prototype.pc;
O.prototype.bc=function(a){var b=jf(this);ff(b,"SELECT id, value FROM "+a,[]);return b.ja().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function kf(a,b,c){var d=jf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);ff(d,e,[JSON.stringify(a.value),a.id])});return d.ja()})}
O.prototype.nc=function(a,b,c){var d=Pe(c);return kf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.qc=function(a,b){return kf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.qc;O.prototype.Gc=function(a,b,c){return kf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Gc;O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return ec(b)};
O.prototype.createRow=O.prototype.vb;O.prototype.xc=g("Xb");O.prototype.getVersion=O.prototype.xc;function mf(a){ff(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=jf(this);mf(b);var c={};b.ja().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ga};O.prototype.dump=O.prototype.dump;function nf(a,b,c){this.c=a;this.g=b;this.Hg=c||1}m=nf.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Hg);if(null!=c)this.i=c,of(this,b).then(function(){this.ke().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function of(a,b){var c=w(),d=new gf(a.i,1,new id(a.c,B()));ff(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);ff(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ja().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ga}m.Cb=function(a,b,c){if(null!=this.i)return new gf(this.i,a,c);throw new D(2);};m.close=aa();
m.vc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Bc=function(){throw new D(355);};m.be=function(a,b){return pf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function pf(a){var b=a.g.oa(),c=new gf(a.i,1,new id(a.c,B())),d=new gf(a.i,1,new id(a.c,B()));ff(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);mf(c);return c.ja().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){ff(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],l=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Ab&&(a.Ca().forEach(function(a){a=hf(a.j());e.push(a);l.push(a)}),a=hf(Ze(a)),e.push(a),p.push(a))});
e.forEach(function(a){ff(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ja()})}m.ke=function(){var a=0,b=w(),c=function(b){var c=new gf(this.i,0);ff(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ja().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});eb(d).then(function(){cc=Math.max(cc,a+1);b.resolve()},function(a){b.reject(a)});return b.ga};m.Kc=k(!0);function qf(a){this.ka=x();this.kc=x();a.oa().forEach(function(a){this.kc.set(a.getName(),B())},this)}m=qf.prototype;m.set=function(a,b){this.ka.set(b.id(),b);this.kc.get(a).add(b.id())};m.Vb=function(a,b){var c=this.kc.get(a);b.forEach(function(a){this.ka.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.ka.get(a)||null};function rf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Ra=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.kc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.ka.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.ka.get(b),d.push(c));return d};m.remove=function(a,b){this.ka.delete(b);this.kc.get(a).delete(b)};m.clear=function(){this.ka.clear();this.kc.clear()};function sf(a,b,c){var d=0,e=a.length;for(c=c||tf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function tf(a,b){return a-b}function uf(a,b,c){c=sf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function vf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function wf(){this.ha=0;this.Ac=null}wf.prototype.add=function(a,b){this.ha+=b;this.Ac=null===this.Ac?a:a>this.Ac?a:this.Ac};wf.prototype.remove=function(a,b){this.ha-=b};wf.prototype.clear=function(){this.ha=0};function xf(a,b){a.clear();b.forEach(function(a){this.ha+=a.ha},a)};function yf(a,b,c){this.w=a;this.Y=b;this.tf=c;this.ya=new wf;this.clear()}var zf=[];m=yf.prototype;m.getName=g("w");m.toString=function(){return this.xa.toString()};m.add=function(a,b){this.xa=this.xa.yb(a,b)};m.set=function(a,b){this.xa=this.xa.yb(a,b,!0)};m.remove=function(a,b){this.xa=this.xa.remove(a,b)};m.get=function(a){return this.xa.get(a)};m.Vc=function(a){if(null==a)return this.X().ha;if(a instanceof E){if(od(a))return this.X().ha;if(sd(a))return this.get(a.from).length}return this.Ra([a]).length};
m.X=g("ya");m.Qd=function(a,b,c){var d=Array(a);this.xa.fill({offset:b?this.ya.ha-a-c:c,count:a,ne:0},d);return b?d.reverse():d};
m.Ra=function(a,b,c,d){var e=Af(this.xa).a[0];if(!n(e)||0==c)return zf;b=b||!1;c=null!=c?Math.min(c,this.ya.ha):this.ya.ha;d=d||0;var f=Math.min(Math.max(this.ya.ha-d,0),c);if(0==f)return zf;if(!n(a)||1==a.length&&a[0]instanceof E&&od(a[0]))return this.Qd(f,b,d);a=this.Y.pf(a);var h=Array(b?this.ya.ha:f),l={count:0,W:h.length,reverse:b,K:d},p=1<this.gb().Ud();a.forEach(function(a){var b=this.Y.pd(a);b=this.Y.Sd(a)?e:b[0];b=this.xa.Tf(b);for(var c=0;null!=b&&l.count<l.W;){if(p){for(var d=b,f=a,L=l,
zb=h,Nc=d.s.gb(),ce=-1,La=0;La<d.a.length;++La)if(Nc.zb(d.a[La],f)){ce=La;break}if(-1!=ce)for(La=ce;La<d.a.length&&L.count<L.W;++La)Nc.zb(d.a[La],f)&&Bf(d,L,zb,La)}else b.Ra(a,l,h);0!=l.K||b.ed(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>l.count&&h.splice(l.count,h.length-l.count);return b?vf(h,b,c,d):h};m.clear=function(){this.xa=Cf(this);this.ya.clear()};m.hb=function(a){return this.xa.hb(a)};m.min=function(){return this.Db(this.Y.min.bind(this.Y))};m.max=function(){return this.Db(this.Y.max.bind(this.Y))};
function Df(a,b,c){if(!a.Y.Jd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.tf?[b.C[c]]:b.C[c]]}m.Db=function(a){a:{var b=Af(this.xa);var c=0;do if(c>=b.a.length)b=b.wa,c=0;else{var d=Df(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Ef(this.xa);d=c.a.length-1;do if(0>d)c=c.ob,d=0;else{var e=Df(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("tf");m.gb=g("Y");
m.Na=function(a,b){return null!=a?0==this.Y.compare(a,b):!1};m.Ia=function(){for(var a=[],b=Af(this.xa);b;)a.push(new bc(b.ra,[b.a,b.C])),b=b.wa;return a};function Ff(a,b,c,d){a=new yf(b,a,c);d=Gf(d,a);a.xa=d;return a}function Hf(a,b){this.ra=a;this.s=b;this.kb=0;this.wa=this.ob=this.B=null;this.a=[];this.C=[];this.h=[];this.Tf=1==b.gb().Ud()?this.Ke:this.Je}function Cf(a){return new Hf(cc++,a)}function P(a){return 0==a.kb}m=Hf.prototype;m.next=g("wa");
function If(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.C.join("/"),f=b(a.ob)+"{";f=P(a)?f+e:f+d;f=f+"}"+b(a.B);a.wa&&(a=If(a.wa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=If(this);a+=b[0]+"\n"+b[1]+"\n";this.h.length&&(a+=this.h[0].toString());return a};function Af(a){return P(a)?a:Af(a.h[0])}function Ef(a){return P(a)?a:Ef(a.h[a.h.length-1])}
function Jf(a,b){b&&(b.ob=a);a&&(a.wa=b)}function Kf(a){var b=a[0],c=Cf(b.s);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.a.push(a[b].a[0]);return c}function Lf(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=Kf(c);else{var d=c.length,e=0;b=Cf(a.s);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Kf(f);h.B=b;b.h.length&&(b.a.push(f[0].a[0]),Jf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}
m.get=function(a){var b=Mf(this,a);if(P(this)){var c=zf;this.s.Na(this.a[b],a)&&(c=c.concat(this.C[b]));return c}b=this.s.Na(this.a[b],a)?b+1:b;return this.h[b].get(a)};m.hb=function(a){var b=Mf(this,a);return this.s.Na(this.a[b],a)?!0:P(this)?!1:this.h[b].hb(a)};m.remove=function(a,b){Nf(this,a,-1,b);return null===this.B?(a=this,1==this.h.length&&(a=this.h[0],a.B=null),a):this};function Of(a){return P(a)?a.a[0]:Of(a.h[0])}function Pf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Of(a.h[b]))}
function Nf(a,b,c,d){var e=Mf(a,b),f=P(a);if(!f){var h=a.s.Na(a.a[e],b)?e+1:e;if(Nf(a.h[h],b,h,d))Pf(a);else return!1}else if(!a.s.Na(a.a[e],b))return!1;if(a.a.length>e&&a.s.Na(a.a[e],b)){if(n(d)&&!a.s.La()&&f&&(h=a.C[e],d=sf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.X().remove(b,1),a.C[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.La()?1:a.C[e].length,a.C.splice(e,1),a.s.X().remove(b,f))}if(256>a.a.length&&null!==a.B){a:{if(a.wa&&256<a.wa.a.length)b=a.wa,e=d=0,f=a.a.length+1;else if(a.ob&&
256<a.ob.a.length)b=a.ob,d=a.ob.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.C:a.h;P(a)?h=b.C:(h=b.h,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Pf(b),Pf(a));b=!0}b||Qf(a,c)}return!0}
function Qf(a,b){var c;if(a.wa&&511>a.wa.a.length){var d=a.wa;var e=c=0}else a.ob&&(d=a.ob,c=d.a.length,e=P(d)?d.C.length:d.h.length);c=[c,0].concat(a.a);Array.prototype.splice.apply(d.a,c);c=null;P(a)?c=a.C:(c=a.h,c.forEach(function(a){a.B=d}));c=[e,0].concat(c);Array.prototype.splice.apply(P(d)?d.C:d.h,c);Jf(a.ob,a.wa);P(d)||Pf(d);-1!=b&&(a.B.a.splice(b,1),a.B.h.splice(b,1))}
m.yb=function(a,b,c){var d=Mf(this,a);if(P(this)){if(this.s.Na(this.a[d],a)){if(c)this.s.X().remove(a,this.s.La()?1:this.C[d].length),this.C[d]=this.s.La()?b:[b];else{if(this.s.La())throw new D(201,this.s.getName(),JSON.stringify(a));if(!uf(this.C[d],b))throw new D(109);}this.s.X().add(a,1);return this}this.a.splice(d,0,a);this.C.splice(d,0,this.s.La()?b:[b]);this.s.X().add(a,1);512==this.a.length?(d=Cf(this.s),a=Cf(this.s),a.kb=1,a.a=[this.a[256]],a.h=[this,d],a.B=this.B,this.B=a,d.a=this.a.splice(256),
d.C=this.C.splice(256),d.B=a,Jf(d,this.wa),Jf(this,d),d=a):d=this;return d}d=this.s.Na(this.a[d],a)?d+1:d;a=this.h[d].yb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Rf(this):this};
function Rf(a){var b=Cf(a.s),c=Cf(a.s);b.B=a.B;b.kb=a.kb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.B=b;c.kb=a.kb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.B=c});a.B=b;Jf(c,a.wa);Jf(a,c);return b}function Mf(a,b){for(var c=0,d=a.a.length,e=a.s.gb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Ke=function(a){if(!P(this)){var b=Mf(this,a);this.s.Na(this.a[b],a)&&b++;return this.h[b].Ke(a)}return this};
m.Je=function(a){if(!P(this)){var b=Mf(this,a);this.s.Na(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Je(a)}return this};
m.Ra=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.gb(),f=0,h=this.a.length-1,l=this.a,p=d(e.ub(l[f],a)),L=d(e.ub(l[h],a));if(1!=p&&(-1!=p||-1!=L)){var ka=function(a,b){b=a+b>>1;return b==a?b+1:b},fa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(l[b],a));if(0==h)return b;if(1==h)return-1;h=ka(b,c);if(h==c)return 0==f?c:-1;var p=d(e.ub(l[h],a));return 0==p?fa(b,h,p):-1==p?fa(h+1,c,f):fa(b+1,h,p)},yb=function(b,c){if(b>=c)return b;var f=d(e.ub(l[c],a));if(0==f)return c;
if(-1==f)return b;f=ka(b,c);if(f==c)return b;var h=d(e.ub(l[f],a));return 0==h?yb(f,c):1==h?yb(b,f-1):-1};0!=p&&(f=fa(f+1,h,L));-1!=f&&(h=yb(f,h),-1!=h&&h>=f&&Sf(this,b,c,f,h+1))}};function Bf(a,b,c,d){if(a.s.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.C[d][e]}function Sf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Bf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.La()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.ne++]=this.C[c][d],a.count--}else if(this.s.La())b[a.ne++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.ne++]=this.C[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Gf(a,b){var c=b.X();a=a.map(function(a){var d=new Hf(a.id(),b);d.a=a.l[0];d.C=a.l[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.C[e].length)});return d});for(var d=0;d<a.length-1;++d)Jf(a[d],a[d+1]);return 1<a.length?Lf(a[0]):a[0]}m.ed=function(a){return this.s.gb().ed(this.a[0],a)};function Tf(a){this.Tc=0==a?Vf:Wf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?Xf:Yf}function Wf(a,b){return a>b?1:a<b?-1:0}function Vf(a,b){return Wf(b,a)}function Yf(a,b){return td(a,b)}function Xf(a,b){return td(b,a)}m=Tf.prototype;m.ub=function(a,b){b=this.Xd(b);var c=[b.from==F,b.m==F];if(!c[0]){var d=this.Tc(a,b.from);c[0]=b.da?1==d:-1!=d}c[1]||(d=this.Tc(a,b.m),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Tc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.zb=function(a,b){a=this.ub(a,b);return a[0]&&a[1]};m.ed=function(a,b){return this.zb(a,b)};m.pf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return this.Xd(a).from==F};m.pd=function(a){a=this.Xd(a);return[a.from,a.m]};m.Jd=function(a){return null!==a};m.Ud=k(1);
m.toString=function(){return this.compare==Vf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Zf(a){Tf.call(this,a);this.Tc=0==a?$f:ag}r(Zf,Tf);function ag(a,b){return null===a?null===b?0:-1:null===b?1:Wf(a,b)}function $f(a,b){return ag(b,a)}Zf.prototype.zb=function(a,b){return null===a?od(b):Zf.eb.zb.call(this,a,b)};Zf.prototype.Db=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Zf.prototype.min=function(a,b){var c=this.Db(a,b);null===c&&(c=Zf.eb.min.call(this,a,b));return c};
Zf.prototype.max=function(a,b){var c=this.Db(a,b);null===c&&(c=Zf.eb.max.call(this,a,b));return c};function bg(a){this.pa=a.map(function(a){return new Tf(a)})}function cg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=bg.prototype;m.compare=function(a,b){return cg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return cg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return cg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.zb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].zb(a[d],b[d]);return c};m.ed=function(a,b){return this.pa[0].zb(a[0],b[0])};
m.pf=function(a){var b=a.filter(function(a){return a.every(ia)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].ce(a[d],b[d]);return c}.bind(this))};m.Sd=function(a){return this.pa[0].Sd(a[0])};
m.pd=function(a){var b=a.map(function(a,b){return this.pa[b].pd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].pd(a)[1]},this);return[b,a]};m.Jd=function(a){return a.every(function(a,c){return this.pa[c].Jd(a)},this)};m.Ud=function(){return this.pa.length};function dg(a){bg.call(this,a);this.pa=a.map(function(a){return new Zf(a)})}r(dg,bg);function eg(a){if(1==a.f.length)return new Tf(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.$.ec()})?new dg(b):new bg(b)};function fg(a){this.ea=a;this.mb=B();this.Jc=new wf;this.ya=new wf}m=fg.prototype;m.getName=function(){return this.ea.getName()};m.add=function(a,b){null===a?(this.mb.add(b),this.Jc.add(a,1)):this.ea.add(a,b)};m.set=function(a,b){null===a?(this.mb.clear(),this.Jc.clear(),this.add(a,b)):this.ea.set(a,b)};m.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Jc.remove(a,1)):(this.mb.clear(),this.Jc.clear()):this.ea.remove(a,b)};m.get=function(a){return null===a?C(this.mb):this.ea.get(a)};m.Vc=function(a){return this.ea.Vc(a)};
m.X=function(){xf(this.ya,[this.ea.X(),this.Jc]);return this.ya};m.Ra=function(a,b,c,d){b=this.ea.Ra(a,b,c,d);return null!=a?b:b.concat(C(this.mb))};m.clear=function(){this.mb.clear();this.ea.clear()};m.hb=function(a){return null===a?0!=this.mb.size:this.ea.hb(a)};m.min=function(){return this.ea.min()};m.max=function(){return this.ea.max()};m.Ia=function(){return[new bc(-2,C(this.mb))].concat(this.ea.Ia())};m.gb=function(){return this.ea.gb()};
function gg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new fg(a);d.forEach(function(a){e.mb.add(a)});return e}m.La=function(){return this.ea.La()};function hg(a){this.w=a;this.qb=B();this.Y=new Tf(1)}m=hg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.hb(a)?[a]:[]};m.min=function(){return this.Db(this.Y.min.bind(this.Y))};m.max=function(){return this.Db(this.Y.max.bind(this.Y))};
m.Db=function(a){if(0==this.qb.size)return null;var b=C(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Vc=function(){return this.qb.size};m.Ra=function(a,b,c,d){var e=a||[rd()];a=C(this.qb).filter(function(a){return e.some(function(b){return this.Y.zb(a,b)},this)},this);return vf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.hb=function(a){return this.qb.has(a)};m.Ia=function(){return[new bc(0,C(this.qb))]};m.gb=g("Y");
function ig(a,b){var c=new hg(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.La=k(!0);m.X=function(){var a=new wf;a.ha=this.qb.size;return a};function jg(a){this.Ya=a.b(pc);this.A=a.b(rc);this.U=a.b(qc)}jg.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Ab()?kg(this,a):lg(this,a)).then(c)}.bind(this);return c()};function lg(a,b){var c=a.Ya.Cb(0,[b]);a=c.H(b.getName(),b.ib.bind(b),0).get([]).then(function(a){this.U.Vb(b.getName(),a);mg(this,b,a)}.bind(a));c.ja();return a}
function mg(a,b,c){var d=a.A.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})})}function kg(a,b){var c=a.Ya.Cb(0,[b]),d=c.H(b.getName(),b.ib,0).get([]).then(function(a){this.U.Vb(b.getName(),a)}.bind(a));a=b.Ca().map(function(a){return ng(this,a,c)},a).concat(og(a,b,c));c.ja();return eb(a.concat(d))}
function ng(a,b,c){c=c.H(b.j(),dc,1);var d=eg(b);return c.get([]).then(function(a){if(0<a.length)if(pg(b)){var c=Ff.bind(void 0,d,b.j(),b.yc);a=gg(c,a);this.A.set(b.jc,a)}else a=Ff(d,b.j(),b.yc,a),this.A.set(b.jc,a)}.bind(a))}function og(a,b,c){return c.H(Ze(b),dc,1).get([]).then(function(a){0<a.length&&(a=ig(Ze(b),a),this.A.set(b.getName(),a))}.bind(a))};function qg(){this.aa=x();this.ic=x()}qg.prototype.Da=function(a){a.oa().forEach(function(a){var b=[];this.ic.set(a.getName(),b);var d=Ze(a);if(null===this.get(d)){var e=new hg(d);b.push(e);this.aa.set(d,e)}a.Ca().forEach(function(a){var c=eg(a);c=new yf(a.j(),c,a.yc);c=pg(a)&&1==a.f.length?new fg(c):c;b.push(c);this.aa.set(a.j(),c)},this)},this);return v()};qg.prototype.get=function(a){return this.aa.get(a)||null};
qg.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.aa.set(b.getName(),b)};function rg(a,b){var c=[],d=null,e=null;ae(a,function(a){var f=b(a);null==a.getParent()?e=f:K(d,f);var l=a.getParent();null!==l&&J(l).length==J(d).length&&(l=c.indexOf(d),-1!=l&&c.splice(l,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function sg(a){return tg(a,function(a){return null===a.h})}
function ug(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Yd(b,d,c+f)});return{parent:b,children:d}}function vg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function wg(a){var b=Xd(a,0);ug(a);vg(b,a);return b}
function xg(a,b,c){var d=Xd(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;ug(a);e.forEach(function(e,h){if(b(e)){var f=c(a);Zd(d,h);K(f,e);Yd(d,f,h)}});return d}function yg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),Zd(e,a),Yd(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function tg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function zg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ae(a,function(a){for(var b=0;b<Wd(a);b++)d+="-";d+=c(a)});return d};function Ag(a){be.call(this);this.nb=a;this.Sa=!1}r(Ag,be);m=Ag.prototype;m.Kb=function(){return rg(this,function(a){if(a instanceof Ag){var b=new Ag(a.nb);b.Sa=a.Sa;a=a.V();b.ra=a;return b}return a.Kb()})};m.jb=function(a){var b=a||[];ae(this,function(a){a!=this&&a.jb(b)}.bind(this));a=B(b);return C(a)};m.o=function(a){var b=null!=a?a:B();ae(this,function(a){a!=this&&a.o(b)}.bind(this));return b};m.qd=function(a){this.Sa!=a&&(this.Sa=a,this.nb="and"==this.nb?"or":"and",J(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Bg(this,b)};function Bg(a,b){return"and"==a.nb?Cd(b):Dd(b)}m.toString=function(){return"combined_pred_"+this.nb.toString()};m.qe=function(){if("or"==this.nb){var a=new vd;J(this).forEach(function(b){b=b.qe().Nb();a.add(b)});return a}return new vd};m.fd=function(){return"or"==this.nb?Cg(this):!1};
function Cg(a){var b=null;return J(a).every(function(a){if(!(a instanceof ee&&a.fd()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function Dg(a,b,c){be.call(this);this.fa=a;this.ma=b;this.D=c;this.Yd=null;a=Td();this.rc=Ud(a,this.fa.F(),this.D);this.jg=a.Ue.get(this.fa.F())||null}r(Dg,be);m=Dg.prototype;m.Kb=function(){var a=new Dg(this.fa,this.ma,this.D),b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.fa),a.push(this.ma),a):[this.fa,this.ma]};m.o=function(a){a=null!=a?a:B();a.add(this.fa.H());a.add(this.ma.H());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Dg(this.ma,this.fa,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.fa);a=H(a,this.ma);return this.rc(b,a)},this);return new G(b,a.o())};m.toString=function(){return"join_pred("+this.fa.j()+" "+this.D+" "+this.ma.j()+")"};
function Eg(a,b,c){if(-1!=b.o().indexOf(Hd(a.fa.H()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.fa;a.fa=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.rc=Ud(Td(),a.fa.F(),a.D)}return[b,d]}return[d,b]}function Fg(a){var b={};a.jb().forEach(function(a){b[a.getName()]=null});return b}
function Gg(a,b,c){null===a.Yd&&(a.Yd=Fg(a.ma.H()));var d=new Fd(new bc(-1,a.Yd),!1);return Jd(b,c,d,[Hd(a.ma.H())])}
function Hg(a,b,c,d){var e=[b,c];d||(e=Eg(a,b,c));b=e[0];c=e[1];e=b;var f=c,h=a.fa,l=a.ma;d&&(e=c,f=b,h=a.ma,l=a.fa);var p=new Rc,L=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ka=e.o(),fa=f.o();f.entries.forEach(function(a){var b=H(a,l),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Jd(a,fa,b,ka);L.push(b)}):d&&L.push(Gg(this,a,fa))}.bind(a));a=b.o().concat(c.o());return new G(L,a)}
function Ig(a,b,c,d,e){function f(a,b){b=new Fd(b,1<ka.length);a=Jd(a,fa,b,ka);L.push(a)}var h=d.Zf.H(),l=b,p=c;-1!=b.o().indexOf(Hd(h))&&(l=c,p=b);var L=[],ka=p.o(),fa=l.o();l.entries.forEach(function(a){var b=this.jg(H(a,d.rg));b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):rf(e,b).forEach(f.bind(null,a)))},a);a=l.o().concat(p.o());return new G(L,a)};function Jg(a,b,c){return null===b?new ee(a,b,c):n(b.j)?new Dg(a,b,c):new ee(a,b,c)};var Kg={};q("lf.schema.DataStoreType",Kg);Kg.INDEXED_DB=0;Kg.MEMORY=1;Kg.LOCAL_STORAGE=2;Kg.FIREBASE=3;Kg.WEB_SQL=4;Kg.OBSERVABLE_STORE=5;function Lg(a,b,c,d){this.jc=a;this.name=b;this.yc=c;this.f=d}Lg.prototype.j=function(){return this.jc+"."+this.name};function pg(a){return a.f.some(function(a){return a.$.ec()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.md=d;this.Ja=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;
function Hd(a){return a.Ja||a.w}Q.prototype.as=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Dg=this.Dg;return b};Q.prototype.as=Q.prototype.as;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.ib;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.jb=g("J");Q.prototype.getColumns=Q.prototype.jb;Q.prototype.getConstraint=Q.prototype.Ie;Q.prototype.Ab=g("md");Q.prototype.persistentIndex=Q.prototype.Ab;function Ze(a){return a.w+".#"};function R(a,b){this.child=a;this.Ib=b;this.Ja=null}m=R.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.j=function(){return this.Ib+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.F=function(){return this.child.F()};m.Ca=function(){return[]};m.Ba=k(null);m.ec=k(!1);m.as=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.as;
function Mg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Ng(){this.Ja=null;this.S=new Q("#UnknownTable",[],[],!1)}m=Ng.prototype;m.getName=k("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("S");m.F=k(4);m.Ca=function(){return[]};m.Ba=k(null);m.ec=k(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Og(a){return new R(a||new Ng,"COUNT")}q("lf.fn.count",Og);function Pg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Pg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Pf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Pf){case 1:return Qg(this,a,b);case 0:return Rg(this,a,b);default:return Sg(this,a,b)}};S.prototype.toString=k("dummy_node");S.prototype.Lc=function(){return this.toString()};function Sg(a,b,c){return new u(function(a){a(this.ba([],b,c))}.bind(a))}function Qg(a,b,c){return Xd(a,0).exec(b,c).then(function(a){return this.ba(a,b,c)}.bind(a))}
function Rg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ba(d,b,c)}.bind(a))};function Tg(a){S.call(this,-1,1);this.xe=a}r(Tg,S);Tg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.j()}).toString()+")"};Tg.prototype.ba=function(a){a.forEach(function(a){Ug(new Vg(a,this.xe))},this);return a};function Vg(a,b){this.Ma=a;this.J=b}
function Ug(a){a.J.forEach(function(a){a=Mg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Mg(d).slice(-1)[0],f=d.child instanceof R?zd(this.Ma,d.child):this.Ma;if(null!==f.Wa&&f.Wa.has(d.j()))break;f=Wg(d.Ib,f,e);e=this.Ma;null===e.Wa&&(e.Wa=x());e.Wa.set(d.j(),f)}},a)}
function Wg(a,b,c){var d=null;switch(a){case "MIN":d=Xg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Xg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Yg(b,c);break;case "COUNT":d=Zg(b,c);break;case "SUM":d=$g(b,c);break;case "AVG":a=Zg(b,c);0<a&&(d=$g(b,c)/a);break;case "GEOMEAN":d=ah(b,c);break;default:d=bh(b,c)}return d}function Xg(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function Zg(a,b){return b instanceof Ng?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function $g(a,b){return Xg(a,b,function(a,b){return b+a})}function bh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function ah(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function Yg(a,b){var c=x();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(y(c),a.o())};function ch(a,b){this.Ga=a;this.Z=b}ch.prototype.Za=g("Ga");ch.prototype.ca=g("Z");function dh(){I.call(this)}r(dh,I);function eh(a,b){I.call(this);this.table=a;this.values=b}r(eh,dh);function fh(a,b){eh.call(this,a,b)}r(fh,eh);function gh(a){I.call(this);this.table=a}r(gh,dh);gh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function hh(a){I.call(this);this.table=a}r(hh,dh);hh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function ih(a){I.call(this);this.N=a}r(ih,dh);ih.prototype.toString=function(){return"select("+this.N.toString()+")"};function jh(a){I.call(this);this.table=a}r(jh,dh);jh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function kh(){I.call(this)}r(kh,dh);kh.prototype.toString=k("cross_product");function lh(a,b){I.call(this);this.f=a;this.Ob=b}r(lh,dh);
lh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob){var b=this.Ob.map(function(a){return a.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function mh(a){I.call(this);this.M=a}r(mh,dh);mh.prototype.toString=function(){return"order_by("+oe(this.M)+")"};function nh(a){I.call(this);this.f=a}r(nh,dh);nh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function oh(a){I.call(this);this.f=a}r(oh,dh);
oh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function ph(a){I.call(this);this.W=a}r(ph,dh);ph.prototype.toString=function(){return"limit("+this.W+")"};function qh(a){I.call(this);this.K=a}r(qh,dh);qh.prototype.toString=function(){return"skip("+this.K+")"};function rh(a,b){I.call(this);this.N=a;this.Qb=b}r(rh,dh);rh.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", "+this.N.toString()+")"};function sh(){};function th(){}r(th,sh);th.prototype.cb=function(a){this.G=a;this.sb(this.G);return this.G};th.prototype.sb=function(a){if(a instanceof ih){var b=uh(this,a.N);b=vh(this,b);yg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.sb(a)},this)};function uh(a,b){if(0==J(b).length||"and"!=b.nb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return uh(this,a)},a);return Ba(a)}
function vh(a,b){var c=null,d=null;b.map(function(a,b){a=new ih(a);0==b?c=a:K(d,a);d=a},a);return[c,d]};function wh(){}r(wh,sh);wh.prototype.cb=function(a,b){if(3>b.from.length)return a;this.G=a;this.sb(this.G);return this.G};wh.prototype.sb=function(a){if(a instanceof kh)for(;2<J(a).length;){for(var b=new kh,c=0;2>c;c++){var d=Zd(a,0);K(b,d)}Yd(a,b,0)}J(a).forEach(function(a){this.sb(a)},this)};function xh(){S.call(this,2,0)}r(xh,S);xh.prototype.toString=k("cross_product");xh.prototype.ba=function(a){var b=a[0],c=a[1];a=[];for(var d=b.o(),e=c.o(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var l=Jd(b.entries[f],d,c.entries[h],e);a.push(l)}b=b.o().concat(c.o());return[new G(a,b)]};function yh(a,b){re.call(this,a,b);this.Ha=a.b(tc);this.Eb=a.b(uc)}r(yh,re);yh.prototype.getPriority=k(2);yh.prototype.ae=function(a){0==this.F()?zh(this,a):this.Hc()};function zh(a,b){a.od.forEach(function(a,d){a instanceof ne&&ue(this.Eb,a,b[d])},a)}yh.prototype.Hc=function(){var a=we(this.Eb,this.ca());0!=a.length&&(a=new te(this.global,a),xe(this.Ha,a))};function Ah(a){ie.call(this,a)}r(Ah,ie);Ah.prototype.ca=function(){var a=B();a.add(this.from);Bh(this,this.from.getName(),a);return a};function Bh(a,b,c){var d=Ch(a.$.info(),b,1);Ch(a.$.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Bh(this,a.getName(),c)},a)}Ah.prototype.clone=function(){var a=new Ah(this.$);le(a,this);a.from=this.from;return a};Ah.prototype.bind=function(a){Ah.eb.bind.call(this,a);me(this,a);return this};function Dh(a){ie.call(this,a)}r(Dh,ie);Dh.prototype.ca=function(){var a=B();a.add(this.Ka);var b=this.$.info();Eh(this.Ka.getName(),b.bf).forEach(a.add.bind(a));this.Yb&&Ch(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Dh.prototype.clone=function(){var a=new Dh(this.$);le(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Kd?this.values:this.values.slice());a.Yb=this.Yb;a.Zb=this.Zb;return a};
Dh.prototype.bind=function(a){Dh.eb.bind.call(this,a);this.Zb&&(this.values=this.Zb instanceof Kd?a[this.Zb.Ba()]:this.Zb.map(function(b){return b instanceof Kd?a[b.Ba()]:b}));return this};function Fh(a){ie.call(this,a)}r(Fh,ie);Fh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.$.info();Gh(c,b).forEach(a.add.bind(a));Hh(c,b).forEach(a.add.bind(a));return a};Fh.prototype.clone=function(){var a=new Fh(this.$);le(a,this);a.table=this.table;a.set=this.set?Ih(this.set):this.set;return a};Fh.prototype.bind=function(a){Fh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Pc&&(b.value=a[b.Pc])});me(this,a);return this};
function Ih(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Jh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+fc(b)+"'";default:return"'"+b.toString()+"'"}}function Kh(a,b){var c=a.Yb?"INSERT OR REPLACE":"INSERT",d=a.Ka.jb();c+=" INTO "+a.Ka.getName()+"(";c+=d.map(function(a){return a.getName()}).join(", ");c+=") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Jh(c.F(),d)});return c+e.join(", ")+");"}).join("\n")}
function Lh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Mh(a,b,c,d){return a instanceof Kd?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Jh(c,a)}).join(", ")+")":"between"==b?Jh(c,a[0])+" AND "+Jh(c,a[1]):Jh(c,a).toString()}
function Nh(a,b){return J(a).map(function(a){return"("+Oh(a,b)+")"}).join("and"==a.nb?" AND ":" OR ")}function Ph(a){return[a.fa.j(),Lh(a.D),a.ma.j()].join(" ")}function Oh(a,b){if(a instanceof ee){var c=a.I.j(),d=Lh(a.D);a=Mh(a.value,a.D,a.I.F(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Ag)return Nh(a,b);if(a instanceof Dg)return Ph(a);throw new D(357,typeof a);}
function Qh(a,b){return(a=Oh(a,b))?" WHERE "+a:""}function Rh(a,b){var c="UPDATE "+a.table.getName()+" SET ";c+=a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Pc?b+"?"+a.Pc.toString():b+Jh(a.I.F(),a.value).toString()}).join(", ");a.u&&(c+=Qh(a.u,b));return c+";"}
function Sh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ja?a.j()+" AS "+a.Ja:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.ab&&0!=a.ab.size?c+=Th(a,b):(c+=a.from.map(Uh).join(", "),a.u&&(c+=Qh(a.u,b)));a.M&&(b=a.M.map(function(a){return a.I.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Uh(a){return Hd(a)!=a.getName()?a.getName()+" AS "+Hd(a):a.getName()}function Th(a,b){for(var c=tg(a.u,function(a){return a instanceof Dg}),d=c.map(Ph),e=Uh(a.from[0]),f=1;f<a.from.length;f++){var h=Uh(a.from[f]);e=a.ab.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h);e+=" ON ("+d[d.length-f]+")"}a=a.u;a=0<J(a).length?Xd(a,0):a;a instanceof Dg||(e+=" WHERE "+Oh(a,b));return e}
function Vh(a,b){b=b||!1;a=a.getQuery();if(a instanceof Dh)return Kh(a,b);if(a instanceof Ah){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Qh(a.u,b));return c+";"}if(a instanceof Fh)return Rh(a,b);if(a instanceof ne)return Sh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Cg=a.b(sc);this.Ha=a.b(tc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Xa()}catch(a){return bb(a)}return new u(function(a,b){var c=new yh(this.global,[this.wc()]);xe(this.Ha,c).then(function(b){a(xd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Rf=function(){var a=function(a){return a.Lc(this.query)+"\n"}.bind(this);return zg(Wh(this).Za(),a)};T.prototype.explain=T.prototype.Rf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Kg=function(a){return Vh(this,a)};T.prototype.toSql=T.prototype.Kg;T.prototype.Xa=aa();T.prototype.getQuery=function(){return this.query.clone()};function Wh(a){if(null==a.cf){var b=a.Cg;var c=a.query,d=b.ng.create(c);b=b.zg.create(d,c);a.cf=b}return a.cf}T.prototype.wc=function(){return{context:this.getQuery(),de:Wh(this)}};function Xh(a){T.call(this,a,new Ah(a.b(A)))}r(Xh,T);q("lf.query.DeleteBuilder",Xh);Xh.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};Xh.prototype.from=Xh.prototype.from;Xh.prototype.u=function(a){this.Ad();this.query.u=a;return this};Xh.prototype.where=Xh.prototype.u;Xh.prototype.Ad=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
Xh.prototype.Xa=function(){Xh.eb.Xa.call(this);if(null==this.query.from)throw new D(517);};function Yh(a,b){T.call(this,a,new Dh(a.b(A)));this.query.Yb=b||!1}r(Yh,T);q("lf.query.InsertBuilder",Yh);Yh.prototype.Xa=function(){Yh.eb.Xa.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new D(518);if(a.Yb&&null===a.Ka.Jb.nd)throw new D(519);};Yh.prototype.Ka=function(a){if(null!=this.query.Ka)throw new D(520);this.query.Ka=a;return this};Yh.prototype.into=Yh.prototype.Ka;
Yh.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Kd||a.some(function(a){return a instanceof Kd})?this.query.Zb=a:this.query.values=a;return this};Yh.prototype.values=Yh.prototype.values;function Zh(a){return $h("and",Array.prototype.slice.call(arguments))}q("lf.op.and",Zh);q("lf.op.or",function(a){return $h("or",Array.prototype.slice.call(arguments))});function $h(a,b){var c=new Ag(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new ne(a.b(A)));this.He=this.vd=!1;this.query.f=b;ai(this);bi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.Xa=function(){U.eb.Xa.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Rb)&&!n(a.W)||n(a.Gb)&&!n(a.K))throw new D(523);null!=this.query.qa?ci(this):di(this)};function ai(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function ci(a){if(a.query.qa.some(function(a){a=a.F();return 6==a||0==a}))throw new D(525);}function di(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function bi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ei(a.Ib,a.F()))throw new D(527,a.j());},a)}function fi(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.He)throw new D(515);this.He=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){fi(this,548);if(this.vd)throw new D(516);this.vd=!0;gi(this,a);return this};U.prototype.where=U.prototype.u;function gi(a,b){null!=a.query.u?(b=Zh(b,a.query.u),a.query.u=b):a.query.u=b}
U.prototype.cg=function(a,b){fi(this,542);if(this.vd)throw new D(547);this.query.from.push(a);gi(this,b);return this};U.prototype.innerJoin=U.prototype.cg;U.prototype.kg=function(a,b){fi(this,542);if(!(b instanceof Dg))throw new D(541);if(this.vd)throw new D(547);this.query.from.push(a);null==this.query.ab&&(this.query.ab=B());var c=b;Hd(a)!=Hd(b.ma.H())&&(c=b.reverse());this.query.ab.add(c.V());gi(this,c);return this};U.prototype.leftOuterJoin=U.prototype.kg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Rb))throw new D(528);if(a instanceof Kd)this.query.Rb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Gb))throw new D(529);if(a instanceof Kd)this.query.Gb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){fi(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){fi(this,549);if(null!=this.query.qa)throw new D(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function ei(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Sc=null;return a};U.prototype.clone=U.prototype.clone;function hi(a,b){T.call(this,a,new Fh(a.b(A)));this.query.table=b}r(hi,T);q("lf.query.UpdateBuilder",hi);hi.prototype.set=function(a,b){a={Pc:b instanceof Kd?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};hi.prototype.set=hi.prototype.set;hi.prototype.u=function(a){this.Ad();this.query.u=a;return this};hi.prototype.where=hi.prototype.u;hi.prototype.Ad=function(){if(null!=this.query.u)throw new D(516);};
hi.prototype.Xa=function(){hi.eb.Xa.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Kd}))throw new D(501);};function ii(a){this.query=a;this.Ga=null}ii.prototype.dc=function(){null===this.Ga&&(this.Ga=this.Xc());return this.Ga};function ji(a){ii.call(this,a)}r(ji,ii);ji.prototype.Xc=function(){return this.query.Yb?new fh(this.query.Ka,this.query.values):new eh(this.query.Ka,this.query.values)};function ki(a){ii.call(this,a)}r(ki,ii);ki.prototype.Xc=function(){var a=new hh(this.query.table),b=null!=this.query.u?new ih(this.query.u.Kb()):null,c=new jh(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function li(a,b,c){this.Ga=a;this.fe=b;this.Ub=c}li.prototype.dc=function(){this.Ub.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function mi(a,b){ii.call(this,a);this.Ub=b}r(mi,ii);mi.prototype.Xc=function(){var a=new gh(this.query.from),b=null!=this.query.u?new ih(this.query.u.Kb()):null,c=new jh(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new li(a,this.query,this.Ub)).dc()};function ni(){}r(ni,sh);ni.prototype.cb=function(a,b){if(2>b.from.length)return a;this.G=a;this.sb(this.G,b);return this.G};ni.prototype.sb=function(a,b){if(a instanceof ih&&a.N instanceof Dg){var c=a.N.V(),d=Xd(a,0);d instanceof kh&&(c=null!=b.ab&&b.ab.has(c),c=new rh(a.N,c),yg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.sb(a,b)},this)};function oi(){this.Oc=B()}r(oi,sh);oi.prototype.cb=function(a,b){if(!n(b.u))return a;this.Oc.clear();this.G=a;this.sb(this.G,b);this.Oc.clear();return this.G};oi.prototype.sb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Oc.has(a)){if(a instanceof ih){var e=a.N.o(),h=function(a){return pi(this,a,e)}.bind(this);h=qi(this,b,a,h);this.Oc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function qi(a,b,c,d){var e=c;if(ri(b,c))e=wg(c),qi(a,b,c,d);else if(si(c)){var f=[];e=xg(c,d,function(a){a=new ih(a.N);f.push(a);return a});f.forEach(function(a){qi(this,b,a,d)},a)}return e}function pi(a,b,c){var d=B();sg(b).forEach(function(a){d.add(a.table)},a);b instanceof jh&&d.add(b.table);return vc(d,c)}function si(a){a=Xd(a,0);return a instanceof kh||a instanceof rh}
function ri(a,b){var c=Xd(b,0);if(!(c instanceof ih))return!1;if(null==a.ab)return!0;b=b.N instanceof Dg;a=a.ab.has(c.N.V());return b||!a};function ti(a,b){ii.call(this,a);this.Ub=b;this.ef=this.Ye=this.nf=this.af=this.ye=this.Ne=this.mf=this.Ee=this.qf=null}r(ti,ii);
ti.prototype.Xc=function(){ui(this);2<=this.query.from.length&&(this.Ee=new kh);this.mf=null!=this.query.u?new ih(this.query.u.Kb()):null;this.query.M&&(this.af=new mh(this.query.M));if(null!=this.query.K&&0<this.query.K||null!=this.query.Gb)this.nf=new qh(this.query.K);null!=this.query.W&&(this.Ye=new ph(this.query.W));null!=this.query.qa&&(this.Ne=new oh(this.query.qa));vi(this);this.ef=new lh(this.query.f||[],this.query.qa||null);var a=wi(this);return(new li(a,this.query,this.Ub)).dc()};
function wi(a){for(var b=[a.Ye,a.nf,a.ef,a.af,a.ye,a.Ne,a.mf,a.Ee],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.qf.forEach(function(a){K(b[c],a)});return d}function ui(a){a.qf=a.query.from.map(function(a){return new jh(a)},a)}function vi(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.ye=new nh(b))};function xi(){this.le=[new th,new wh,new oi,new ni];this.Kd=[new th]}xi.prototype.create=function(a){if(a instanceof Dh)var b=new ji(a);else if(a instanceof Ah)b=new mi(a,this.Kd);else if(a instanceof ne)b=new ti(a,this.le);else if(a instanceof Fh)b=new ki(a);else throw new D(513);b=b.dc();return new ch(b,a.ca())};function yi(a){S.call(this,1,1);this.S=a}r(yi,S);yi.prototype.toString=function(){return"delete("+this.S.getName()+")"};yi.prototype.ba=function(a,b){a=a[0].entries.map(function(a){return a.ta});b.remove(this.S,a);return[Bd()]};function zi(a,b){S.call(this,0,-1);this.table=b;this.A=a.b(rc)}r(zi,S);zi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};zi.prototype.ba=function(){var a=this.A.get(Ze(this.table)),b=new G([],[this.table.getName()]),c=Og();a=a.X().ha;null===b.Wa&&(b.Wa=x());b.Wa.set(c.j(),a);return[b]};function Ai(a,b){S.call(this,0,-1);this.U=a.b(qc);this.A=a.b(rc);this.table=b}r(Ai,S);Ai.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};Ai.prototype.ba=function(){var a=this.A.get(Ze(this.table)).Ra();return[Ed(rf(this.U,a),[Hd(this.table)])]};function Bi(a){this.c=a}r(Bi,sh);Bi.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;a=tg(a,function(a){return a instanceof Ai})[0];b=new zi(this.c,a.table);yg(a,a,b,b);return this.G};Bi.prototype.Cd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Ib&&a.child instanceof Ng):!1};function Ci(a){S.call(this,1,1);this.Me=a}r(Ci,S);Ci.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.j()}).toString()+")"};Ci.prototype.ba=function(a){return Di(this,a[0])};function Di(a,b){var c=new Rc,d=function(a){return this.Me.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.o())},a)};function Ei(a,b,c){S.call(this,2,0);this.A=a.b(rc);this.U=a.b(qc);this.N=b;this.Qb=c;this.yd="eq"==this.N.D?0:2;this.Pe=null}r(Ei,S);var Fi=["hash","index_nested_loop","nested_loop"];Ei.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", impl: "+Fi[this.yd]+", "+this.N.toString()+")"};
Ei.prototype.ba=function(a){switch(this.yd){case 0:return[Hg(this.N,a[0],a[1],this.Qb)];case 1:return[Ig(this.N,a[0],a[1],this.Pe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Qb,e=[c,a];d||(e=Eg(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.o(),h=a.o(),l=c.entries.length,p=a.entries.length,L=p+256-1>>8,ka=0;ka<L;){for(var fa=0;fa<l;fa++){var yb=!1,Uf=H(c.entries[fa],b.fa);if(null!==Uf)for(var Hi=Math.min(ka+1<<8,p),zb=ka<<8;zb<Hi;zb++)if(b.rc(Uf,H(a.entries[zb],b.ma))){yb=!0;var Nc=Jd(c.entries[fa],
f,a.entries[zb],h);e.push(Nc)}d&&!yb&&e.push(Gg(b,c.entries[fa],f))}ka++}b=c.o().concat(a.o());return[new G(e,b)]}};function Gi(a,b){a.yd=1;var c=a.A.get(b.Ba().j());a.Pe={Zf:b,rg:b==a.N.fa?a.N.ma:a.N.fa,index:c}};function Ii(a){S.call(this,-1,-1);this.ff=a}r(Ii,S);Ii.prototype.toString=function(){return"no_op_step("+this.ff[0].o().join(",")+")"};Ii.prototype.ba=g("ff");function Ji(){}r(Ji,sh);Ji.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;tg(a,function(a){return a instanceof Ei}).forEach(this.Bg,this);return this.G};Ji.prototype.Cd=function(a){return 1<a.from.length};
Ji.prototype.Bg=function(a){if("eq"==a.N.D&&!a.Qb){var b=function(b){if(!(b instanceof Ai))return null;b=Hd(b.table)==Hd(a.N.ma.H())?a.N.ma:a.N.fa;return null===b.Ba()?null:b},c=b(Xd(a,0));b=b(Xd(a,1));if(null!==c||null!==b){b=null===b?c:b;Gi(a,b);var d=new G([],[Hd(b.H())]);$d(a,new Ii([d]),b==c?0:1)}}};function Ki(a){a=a.map(function(a){return a.Nb()});a=Ab.apply(null,a);var b=[];xb(a,function(a){b.push(a)});return b}function Li(a){this.Pb=a}Li.prototype.Yc=function(){return 1==this.Pb.f.length?[rd()]:[this.Pb.f.map(function(){return rd()})]};function Mi(a,b){this.Pb=a;this.Fa=b;this.Gd=this.We=null}
function Ni(a,b){var c=x();a.Fa.keys().forEach(function(a){var d=this.Fa.get(a).map(function(a){return je(b,a)},this),f=new vd([rd()]);d.forEach(function(a){f=wd(f,a.qe())});c.set(a,f)},a);return c}Mi.prototype.Yc=function(a){if(this.We==a)return this.Gd;for(var b=Ni(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.$.getName())||null))break;b.set(d.$.getName(),new vd([rd()]))}this.Gd=1==this.Pb.f.length?y(b)[0].Nb():Ki(Oi(this,b));this.We=a;return this.Gd};
function Oi(a,b){var c=x(),d=0;a.Pb.f.forEach(function(a){c.set(a.$.getName(),d);d++});return ac(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Pi(a,b){this.sd=b;this.A=a.b(rc)}function Qi(a){a=a.A.get(Ze(a.sd));return Math.floor(.02*a.X().ha)}function Ri(a,b,c){c=c.filter(a.fg,a);if(0==c.length)return null;a=Si(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Ti(c,b);return e<d?(d=e,c):a},null)}
function Si(a,b){return a.sd.Ca().map(function(a){a=new Ui(this.A,a);Vi(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,c=!0,f=0;f<a.$a.f.length;f++){var h=a.Fa.has(a.$a.f[f].$.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Pi.prototype.fg=function(a){return a instanceof ee?!a.fd()||a.I.H()!=this.sd||"in"==a.D&&a.value.length>Qi(this)?!1:!0:a instanceof Ag?a.fd()&&Xd(a,0).I.H()==this.sd?J(a).length<=Qi(this):!1:!1};
function Ui(a,b){this.A=a;this.$a=b;this.$f=B(this.$a.f.map(function(a){return a.$.getName()}));this.Vd=this.Fa=null}function Wi(a){null===a.Vd&&(a.Vd=new Mi(a.$a,a.Fa));return a.Vd}function Vi(a,b){b.forEach(function(a){var b=a.jb()[0].getName();this.$f.has(b)&&(null===this.Fa&&(this.Fa=new Rc),this.Fa.set(b,a.V()))},a)}function Ti(a,b){b=Wi(a).Yc(b);var c=a.A.get(a.$a.j());return b.reduce(function(a,b){return a+c.Vc(b)},0)};function Xi(a,b,c,d){S.call(this,0,-1);this.A=a.b(rc);this.index=b;this.Ve=c;this.je=d;this.Nc=this.Mc=!1}r(Xi,S);Xi.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Mc?", limit:?":"")+(this.Nc?", skip:?":"")+")"};Xi.prototype.Lc=function(a){var b=this.toString(),c=this.Ve.Yc(a);b=b.replace("?",c.toString());this.Mc&&(b=b.replace("?",a.W.toString()));this.Nc&&(b=b.replace("?",a.K.toString()));return b};
Xi.prototype.ba=function(a,b,c){a=this.Ve.Yc(c);b=this.A.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&sd(a[0])?vf(b.get(a[0].from),!1,this.Mc?c.W:void 0,this.Nc?c.K:void 0):b.Ra(a,this.je,this.Mc?c.W:void 0,this.Nc?c.K:void 0)).map(function(a){return new bc(a,{})},this);return[Ed(c,[this.index.jc])]};function Yi(){S.call(this,-1,0)}r(Yi,S);Yi.prototype.toString=k("multi_index_range_scan()");
Yi.prototype.ba=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ta.id(),a)})});var c=y(b);return[new G(c,a[0].o())]};function Zi(a){S.call(this,1,1);this.gc=a}r(Zi,S);Zi.prototype.toString=k("select(?)");Zi.prototype.Lc=function(a){a=je(a,this.gc);return this.toString().replace("?",a.toString())};Zi.prototype.ba=function(a,b,c){return[je(c,this.gc).eval(a[0])]};function $i(a,b){S.call(this,1,1);this.U=a.b(qc);this.S=b}r($i,S);$i.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};$i.prototype.ba=function(a){return[Ed(rf(this.U,yd(a[0])),[Hd(this.S)])]};function aj(a){this.c=a}r(aj,sh);aj.prototype.cb=function(a,b){this.G=a;tg(a,function(a){return a instanceof Ai}).forEach(function(a){var c=bj(a);if(0!=c.length){var e=Ri(new Pi(this.c,a.table),b,c.map(function(a){return je(b,a.gc)}));if(null!==e){var f=x();c.forEach(function(a){f.set(a.gc,a)},this);this.G=cj(this,e,f,a)}}},this);return this.G};function bj(a){var b=[];for(a=a.getParent();a;){if(a instanceof Zi)b.push(a);else if(a instanceof Ei)break;a=a.getParent()}return b}
function cj(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(ug);b=new Xi(a.c,b.$a,Wi(b),!1);a=new $i(a.c,d.table);K(a,b);yg(d,d,a,b);return b.Za()};function dj(a,b){S.call(this,0,-1);this.A=a.b(rc);this.S=b}r(dj,S);dj.prototype.toString=function(){return"insert("+this.S.getName()+")"};dj.prototype.ba=function(a,b,c){ej(this.S,c.values,this.A);b.yb(this.S,c.values);return[Ed(c.values,[this.S.getName()])]};function ej(a,b,c){a=a.Jb.nd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].$.getName();c=c.get(a.j()).X().Ac;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function fj(a,b){S.call(this,0,-1);this.A=a.b(rc);this.S=b}r(fj,S);fj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};fj.prototype.ba=function(a,b,c){ej(this.S,c.values,this.A);b.Rd(this.S,c.values);return[Ed(c.values,[this.S.getName()])]};function gj(){S.call(this,1,1)}r(gj,S);gj.prototype.toString=k("limit(?)");gj.prototype.Lc=function(a){return this.toString().replace("?",a.W.toString())};gj.prototype.ba=function(a,b,c){a[0].entries.splice(c.W);return a};function hj(a){S.call(this,-1,1);this.M=a}r(hj,S);m=hj.prototype;m.toString=function(){return"order_by("+oe(this.M)+")"};m.ba=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Pg(this.M[d].I);if(null!==b.Wa&&b.Wa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:zd(a[0],b)).entries.sort(this.Of.bind(this))}else a.sort(this.Eg.bind(this));return a};
m.Y=function(a,b){var c=-1;do{c++;var d=this.M[c].I;var e=this.M[c].order;var f=a(d);d=b(d)}while(f==d&&c+1<this.M.length);a=f<d?-1:f>d?1:0;return 1==e?a:-a};m.Eg=function(a,b){return this.Y(function(b){return b instanceof R?zd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?zd(b,a):H(b.entries[b.entries.length-1],a)})};m.Of=function(a,b){return this.Y(function(b){return H(a,b)},function(a){return H(b,a)})};function ij(a,b){this.Ma=a;this.J=b}function jj(a){return a.J.some(function(a){return a instanceof R},a)?kj(a):lj(a)}function kj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Ib)return a=zd(a.Ma,a.J[0]).entries.map(function(a){var b=new Fd(new bc(-1,{}),1<this.Ma.L.size);Id(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new Fd(new bc(-1,{}),1<a.Ma.L.size);a.J.forEach(function(a){var c=a instanceof R?zd(this.Ma,a):H(this.Ma.entries[0],a);Id(b,a,c)},a);return new G([b],a.Ma.o())}
function lj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(a,e){b[e]=new Fd(new bc(a.ta.id(),{}),c);this.J.forEach(function(c){Id(b[e],c,H(a,c))},this)},a);return new G(b,a.Ma.o())}function mj(a,b){var c=a.map(function(a){return jj(new ij(a,b)).entries[0]});return new G(c,a[0].o())};function nj(a,b){S.call(this,-1,1);this.f=a;this.Ob=b}r(nj,S);nj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob){var b=this.Ob.map(function(a){return a.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};nj.prototype.ba=function(a){0==a.length?a=[Bd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:jj(new ij(a,this.f))]):a=[mj(a,this.f)];return a};function oj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Ob};function pj(){S.call(this,1,1)}r(pj,S);pj.prototype.toString=k("skip(?)");pj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};pj.prototype.ba=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].o())]};function qj(){}r(qj,sh);qj.prototype.cb=function(a,b){if(!n(b.W)&&!n(b.K))return a;var c=rj(a);if(null===c)return a;tg(a,function(a){return a instanceof gj||a instanceof pj}).forEach(function(a){a instanceof gj?c.Mc=!0:c.Nc=!0;ug(a)},this);return c.Za()};function rj(a){a=tg(a,function(a){return a instanceof Xi},function(a){return a instanceof nj&&oj(a)||a instanceof hj||1!=J(a).length||a instanceof Zi});return 0<a.length?a[0]:null};function sj(a){this.c=a}r(sj,sh);sj.prototype.cb=function(a,b){this.G=a;var c=tj(this,b);if(0==c.length)return this.G;var d=0;do{var e=c[d++];a=uj(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.G;b=vj(this,a[0].$a.jc);return null===b?this.G:this.G=wj(this,e,b,a)};function tj(a,b){return tg(a.G,function(a){if(!(a instanceof Zi))return!1;a=je(b,a.gc);return a instanceof Ag&&"or"==a.nb})}
function vj(a,b){return tg(a.G,function(a){return a instanceof Ai&&a.table.getName()==b})[0]||null}function uj(a,b,c){b=je(c,b.gc);var d=b.o();if(1!=d.size)return null;d=C(d)[0];var e=new Pi(a.c,d),f=null;return J(b).every(function(a){a=Ri(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function wj(a,b,c,d){var e=new $i(a.c,c.table),f=new Yi;K(e,f);d.forEach(function(a){a=new Xi(this.c,a.$a,Wi(a),!1);K(f,a)},a);ug(b);yg(c,c,e,f);return f.Za()};function xj(a){this.c=a}r(xj,sh);xj.prototype.cb=function(a,b){b=yj(a,b);if(null===b)return a;a:{var c=b;a=zj(Xd(b,0));if(null!==a){var d=b.M;for(var e=null,f=a.table.Ca(),h=0;h<f.length&&null===e;h++)e=Aj(f[h],d);d=e;if(null===d){a=c;break a}c=new Xi(this.c,d.$a,new Li(d.$a),d.Se);d=new $i(this.c,a.table);K(d,c);ug(b);c=yg(a,a,d,c)}a=c}a==b&&(a=b,c=Bj(Xd(b,0)),null!==c&&(d=Aj(c.index,b.M),null!==d&&(c.je=d.Se,a=ug(b).parent)));return a.Za()};
function Bj(a){a=tg(a,function(a){return a instanceof Xi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function zj(a){a=tg(a,function(a){return a instanceof Ai},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function yj(a,b){return n(b.M)?tg(a,function(a){return a instanceof hj})[0]:null}function Aj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.I.getName()==a.f[d].$.getName()}))return null;b=Cj(b,a);return b[0]||b[1]?{$a:a,Se:b[1]}:null}
function Cj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Dj(a,b,c){this.Ga=a;this.fe=b;this.Ub=c}Dj.prototype.dc=function(){this.Ub.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function Ej(a){S.call(this,1,1);this.S=a}r(Ej,S);Ej.prototype.toString=function(){return"update("+this.S.getName()+")"};Ej.prototype.ba=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.ib(a.ta.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[Bd()]};function Fj(a){this.c=a;this.le=[new Ji,new aj(this.c),new sj(this.c),new xj(this.c),new qj,new Bi(this.c)];this.Kd=[new aj(this.c)]}Fj.prototype.create=function(a,b){var c=a.Za();if(c instanceof fh||c instanceof eh)return Gj(this,a,b);if(c instanceof lh||c instanceof ph||c instanceof qh)return Gj(this,a,b,this.le);if(c instanceof gh||c instanceof hh)return Gj(this,a,b,this.Kd);throw new D(8);};
function Gj(a,b,c,d){a=rg(b.Za(),a.qg.bind(a));null!=d&&(a=(new Dj(a,c,d)).dc());return new pe(a,b.ca())}
Fj.prototype.qg=function(a){if(a instanceof lh)return new nj(a.f,a.Ob);if(a instanceof oh)return new Ci(a.f);if(a instanceof nh)return new Tg(a.f);if(a instanceof mh)return new hj(a.M);if(a instanceof qh)return new pj;if(a instanceof ph)return new gj;if(a instanceof ih)return new Zi(a.N.V());if(a instanceof kh)return new xh;if(a instanceof rh)return new Ei(this.c,a.N,a.Qb);if(a instanceof jh)return new Ai(this.c,a.table);if(a instanceof gh)return new yi(a.table);if(a instanceof hh)return new Ej(a.table);
if(a instanceof fh)return new fj(this.c,a.table);if(a instanceof eh)return new dj(this.c,a.table);throw new D(514);};function Hj(a){this.ng=new xi;this.zg=new Fj(a)};function Ij(){this.Ze=x()}function Jj(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new Kj,a.Ze.set(b.getName(),c));return c}function Lj(a,b,c,d){c.forEach(function(a){a=Jj(this,a);0==d?(a.bb=null,a.sc=b):3==d?(null===a.Wb&&(a.Wb=B()),a.Wb.add(b),null===a.Ua&&(a.Ua=B()),a.Ua.delete(b)):1==d?(null===a.Ua&&(a.Ua=B()),a.Ua.add(b)):2==d&&(a.bb=b)},a)}
function Mj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Jj(this,a);var c=null===a.Ua||0==a.Ua.size;e=0==d?(null===a.Wb||0==a.Wb.size)&&c&&null===a.sc&&null!==a.bb&&a.bb==b:3==d?null===a.sc&&null===a.bb&&null!==a.Ua&&a.Ua.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Nj(a,b,c,d){var e=Mj(a,b,c,d);e&&Lj(a,b,c,d);return e}Ij.prototype.releaseLock=function(a,b){b.forEach(function(b){Jj(this,b).releaseLock(a)},this)};
function Oj(a,b){b.forEach(function(a){Jj(this,a).bb=null},a)}function Kj(){this.Wb=this.Ua=this.bb=this.sc=null}Kj.prototype.releaseLock=function(a){this.sc==a&&(this.sc=null);this.bb==a&&(this.bb=null);null===this.Ua||this.Ua.delete(a);null===this.Wb||this.Wb.delete(a)};function Pj(){this.Tb=new Qj;this.zc=new Ij}function xe(a,b){(2>b.getPriority()||2>b.getPriority())&&Oj(a.zc,b.ca());a.Tb.yb(b);Rj(a);return b.Bb.ga}function Rj(a){for(var b=a.Tb.Nb(),c=0;c<b.length;c++){var d=b[c];if(0==d.F()?Sj(a,d,1,3):Sj(a,d,2,0)){a.Tb.remove(d);var e=a;d.exec().then(e.wg.bind(e,d),e.vg.bind(e,d))}}}function Sj(a,b,c,d){var e=!1;Nj(a.zc,b.V(),b.ca(),c)&&(e=Nj(a.zc,b.V(),b.ca(),d));return e}Pj.prototype.wg=function(a,b){this.zc.releaseLock(a.V(),a.ca());a.Bb.resolve(b);Rj(this)};
Pj.prototype.vg=function(a,b){this.zc.releaseLock(a.V(),a.ca());a.Bb.reject(b);Rj(this)};function Qj(){this.Tb=[]}Qj.prototype.yb=function(a){uf(this.Tb,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.V()-c.V():b})};Qj.prototype.Nb=function(){return this.Tb.slice()};Qj.prototype.remove=function(a){var b=this.Tb;a=ua(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Tj(){this.Ic=x()}var Uj;function Vj(){Uj||(Uj=new Tj);return Uj}Tj.prototype.clear=function(){this.Ic.clear()};Tj.prototype.clear=Tj.prototype.clear;Tj.prototype.pb=function(a,b){this.Ic.set(a.toString(),b);return b};Tj.prototype.registerService=Tj.prototype.pb;Tj.prototype.b=function(a){var b=this.Ic.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Tj.prototype.getService=Tj.prototype.b;Tj.prototype.gd=function(a){return this.Ic.has(a.toString())};
Tj.prototype.isRegistered=Tj.prototype.gd;function Wj(){var a=Vj();return ac(a.Ic)};function Xj(a,b,c,d){return null!=a?null!=b?Yj(a,b,c,d):Zj(a):ak()}function bk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function ck(a){var b=Vj();a=new oc("ns_"+a);return b.gd(a)?b.b(a):null}function ak(){var a={};Wj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=ck(b).b(A).version())});return bk(a)}function Zj(a){a=ck(a);var b={};if(null!=a){var c=a.b(rc);a.b(A).oa().forEach(function(a){b[a.getName()]=c.get(Ze(a)).X().ha})}return bk(b)}
function Yj(a,b,c,d){var e=ck(a);a=[];if(null!=e){var f=null;try{f=e.b(A).table(b)}catch(h){}null!=f&&(b=e.b(rc),e=e.b(qc),c=b.get(Ze(f)).Ra(void 0,!1,c,d),c.length&&(a=rf(e,c).map(function(a){return a.l})))}return bk(a)};function dk(a,b){this.Ld=Td();this.ge=a;this.jd=b;this.J=ek(this)}function ek(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(a){a.jb().forEach(function(a){b.push(a)})});return b}dk.prototype.Y=function(a,b){return this.J.every(function(c){return 6==c.F()||0==c.F()?H(a,c)===H(b,c):Ud(this.Ld,c.F(),"eq")(H(a,c),H(b,c))},this)};
function fk(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.Y.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var l=d[h];e[f]==l?f++:(l=a.jd.splice(f,1),l=gk(h,l,0,a.jd),b.push(l))}e=pb(d,c.entries,a.Y.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)l=c.entries[h],e[f]==l?f++:(a.jd.splice(h,0,l.ta.l),l=gk(h,[],1,a.jd),b.push(l));return b}function gk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function hk(){this.cc=x()}hk.prototype.xd=function(a,b){var c=ma(a.query).toString(),d=this.cc.get(c)||null;null===d&&(d=new ik(a),this.cc.set(c,d));d.xd(b)};hk.prototype.he=function(a,b){a=ma(a.query).toString();var c=this.cc.get(a)||null;c.he(b);0<c.Cc.size||this.cc.delete(a)};function we(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.wc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ue(a,b,c){b=ma(null!=b.Sc?b.Sc:b).toString();a=a.cc.get(b)||null;null!==a&&jk(a,c)}function ik(a){this.Cf=a;this.Cc=B();this.tg=[];this.Xe=null;this.Mf=new dk(a.query,this.tg)}ik.prototype.xd=function(a){this.Cc.has(a)||this.Cc.add(a)};ik.prototype.he=function(a){this.Cc.delete(a)};ik.prototype.wc=function(){var a=this.Cf;return{context:a.query,de:Wh(a)}};function jk(a,b){var c=fk(a.Mf,a.Xe,b);a.Xe=b;0<c.length&&a.Cc.forEach(function(a){a(c)})};function kk(a,b){var c=a.b(A),d=b||{};b=new qf(c);a.pb(qc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(n($b)||($b=new Zb),b=$b,b=b.ag?0:b.Pg?4:1);switch(b){case 0:b=new Ve(a,c);break;case 1:b=new bf(c);break;case 5:b=new df(c);break;case 4:b=new nf(a,c,d.webSqlDbSize);break;case 3:b=new Je(c,d.firebase);e=!0;break;default:throw new D(300);}a.pb(pc,b);var f=new qg;a.pb(rc,f);return b.Da(d.onUpgrade).then(function(){var b=new Hj(a);a.pb(sc,b);b=new Pj;a.pb(tc,b);b=new hk;a.pb(uc,b);return f.Da(c)}).then(function(){if(e){var b=
new ye(a);b.Ya.subscribe(b.Zd.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=Xj);return(new jg(a)).Da(c)})};function lk(a){this.c=a;this.g=a.b(A);this.Z=B(this.g.oa());this.Bb=w()}function mk(a){var b=a.c.b(rc),c=a.c.b(qc),d={};a.g.oa().forEach(function(a){var e=b.get(Ze(a)).Ra();e=rf(c,e).map(function(a){return a.l});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=lk.prototype;m.exec=function(){var a=mk(this);a=new Fd(new bc(-1,a),!0);return v([new G([a],[])])};m.F=k(0);m.ca=g("Z");m.V=function(){return ma(this)};m.getPriority=k(0);function nk(a,b){this.c=a;this.g=a.b(A);this.Z=B(this.g.oa());this.Bb=w();this.Aa=b;this.Ya=a.b(pc);this.U=a.b(qc);this.A=a.b(rc)}m=nk.prototype;m.exec=function(){if(!this.Ya.Kc())throw new D(300);a:{var a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.A.get(Ze(a[b])).X().ha){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return ok(this)};m.F=k(1);m.ca=g("Z");m.V=function(){return ma(this)};
m.getPriority=k(0);function ok(a){var b=new id(a.c,a.Z);b=a.Ya.Cb(a.F(),C(a.Z),b);for(var c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.ib,0);a.U.Vb(c,e);var h=a.A.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ja()};function pk(a,b){this.c=a;this.Ya=a.b(pc);this.Ha=a.b(tc);this.Eb=a.b(uc);this.Z=B(b);this.Oa=new id(this.c,this.Z);this.Bb=w();this.tc=w();this.ue=w()}m=pk.prototype;m.exec=function(){this.ue.resolve();return this.tc.ga};m.F=k(1);m.ca=g("Z");m.V=function(){return ma(this)};m.getPriority=k(2);function qk(a){xe(a.Ha,a);return a.ue.ga}
function rk(a,b){b=b.wc();return b.de.Za().exec(a.Oa,b.context).then(function(a){return xd(a[0])},function(a){this.Oa.Fb();var b=new jb(a.name);this.tc.reject(b);throw a;}.bind(a))}m.ja=function(){this.ia=this.Ya.Cb(this.F(),C(this.Z),this.Oa);this.ia.ja().then(function(){this.Hc();this.tc.resolve()}.bind(this),function(a){this.Oa.Fb();this.tc.reject(a)}.bind(this));return this.Bb.ga};m.Fb=function(){this.Oa.Fb();this.tc.resolve();return this.Bb.ga};
m.Hc=function(){var a=we(this.Eb,this.Z);0!=a.length&&(a=new te(this.c,a),xe(this.Ha,a))};m.X=function(){var a=null;null!=this.ia&&(a=this.ia.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(tc);this.Hb=null;this.Qa=0;0==sk.size&&(sk.set(0,B([1,4])),sk.set(1,B([2])),sk.set(2,B([3,5,6])),sk.set(3,B([2,7])),sk.set(4,B([7])),sk.set(5,B([7])),sk.set(6,B([7])))}q("lf.proc.Transaction",V);var sk=x();function tk(a,b){var c=sk.get(a.Qa)||null;if(null===c||!c.has(b))throw new D(107,a.Qa,b);a.Qa=b}
V.prototype.exec=function(a){tk(this,4);var b=[];try{a.forEach(function(a){a.Xa();b.push(a.wc())},this)}catch(c){return tk(this,7),bb(c)}this.Hb=new yh(this.c,b);return xe(this.Ha,this.Hb).then(function(a){tk(this,7);return a.map(function(a){return xd(a)})}.bind(this),function(a){tk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Af=function(a){tk(this,1);this.Hb=new pk(this.c,a);return qk(this.Hb).then(function(){tk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Af;
V.prototype.zf=function(a){tk(this,3);try{a.Xa()}catch(b){return tk(this,7),bb(b)}return rk(this.Hb,a).then(function(a){tk(this,2);return a}.bind(this),function(a){tk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.zf;V.prototype.ja=function(){tk(this,5);return this.Hb.ja().then(function(){tk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ja;V.prototype.Fb=function(){tk(this,6);return this.Hb.Fb().then(function(){tk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Fb;
V.prototype.X=function(){if(7!=this.Qa)throw new D(105);return this.Hb.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(A);this.dd=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.pb(A,this.g);return kk(this.c,a).then(function(){this.dd=!0;this.Ha=this.c.b(tc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function uk(a){if(!a.dd)throw new D(2);}W.prototype.select=function(a){uk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.yb=function(){uk(this);return new Yh(this.c)};W.prototype.insert=W.prototype.yb;W.prototype.Rd=function(){uk(this);return new Yh(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){uk(this);return new hi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){uk(this);return new Xh(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){uk(this);this.c.b(uc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){uk(this);this.c.b(uc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.If=function(){uk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.If;W.prototype.close=function(){try{this.c.b(pc).close()}catch(a){}this.c.clear();this.dd=!1};W.prototype.close=W.prototype.close;
W.prototype.Sf=function(){uk(this);var a=new lk(this.c);return xe(this.Ha,a).then(function(a){return xd(a[0])[0]})};W.prototype["export"]=W.prototype.Sf;W.prototype.import=function(a){uk(this);a=new nk(this.c,a);return xe(this.Ha,a).then(k(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.sf=e;this.Ja=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Hd(this.S)+"."+this.w};m.toString=function(){return this.j()};m.H=g("S");m.F=g("sf");X.prototype.getType=X.prototype.F;X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.H().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.$.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!n(this.ea)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].$.getName()==this.getName()},this);this.ea=0<a.length?a[0]:null}return this.ea};X.prototype.ec=g("Re");X.prototype.isNullable=X.prototype.ec;X.prototype.yc=g("Te");X.prototype.Na=function(a){return Jg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.$e=function(a){return Jg(this,a,"neq")};X.prototype.neq=X.prototype.$e;X.prototype.og=function(a){return Jg(this,a,"lt")};
X.prototype.lt=X.prototype.og;X.prototype.pg=function(a){return Jg(this,a,"lte")};X.prototype.lte=X.prototype.pg;X.prototype.Wf=function(a){return Jg(this,a,"gt")};X.prototype.gt=X.prototype.Wf;X.prototype.Xf=function(a){return Jg(this,a,"gte")};X.prototype.gte=X.prototype.Xf;X.prototype.match=function(a){return Jg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Bf=function(a,b){return Jg(this,[a,b],"between")};X.prototype.between=X.prototype.Bf;
X.prototype.Yf=function(a){return Jg(this,a,"in")};X.prototype["in"]=X.prototype.Yf;X.prototype.ig=function(){return this.Na(null)};X.prototype.isNull=X.prototype.ig;X.prototype.hg=function(){return this.$e(null)};X.prototype.isNotNull=X.prototype.hg;X.prototype.as=function(a){return new X(this.S,this.w,this.Te,this.Re,this.sf,a)};X.prototype.as=X.prototype.as;function vk(a){this.g=a;this.Dd=new Rc;this.ie=new Rc;this.bf=new Rc;this.De=x();this.h=new Rc;this.ze=new Rc;this.gf=new Rc;this.Ce=new Rc;wk(this)}function wk(a){a.g.oa().forEach(function(a){var b=a.getName();a.Jb.Pd.forEach(function(c){this.bf.set(b,this.g.table(c.Ta));this.h.set(c.Ta,a);0==c.action?(this.ie.set(c.Ta,c),this.gf.set(c.Ta,a)):(this.Dd.set(c.Ta,c),this.ze.set(c.Ta,a));this.De.set(a.getName()+"."+c.tb,c.Ta);this.Ce.set(c.Ta+"."+c.Ec,a.getName())},this)},a)}
function Zc(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Eh(a,b){a=b.get(a);return null===a?[]:a}function Gh(a,b){var c=B();b.forEach(function(a){(a=this.De.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Ch(a,b,c){return null!=c?0==c?Eh(b,a.gf):Eh(b,a.ze):Eh(b,a.h)}
function Hh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function xk(a,b,c){this.nd=a;this.sg=b;this.Pd=c}q("lf.schema.Constraint",xk);xk.prototype.Vf=g("nd");xk.prototype.getPrimaryKey=xk.prototype.Vf;xk.prototype.Uf=g("Pd");xk.prototype.getForeignKeys=xk.prototype.Uf;function yk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Be=b;this.tb=a.local;this.Ta=d[0];this.Ec=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){zk(a);this.Ld=Td();this.w=a;this.J=x();this.ud=B();this.lc=B();this.hd=B();this.Ea=null;this.sa=x();this.md=!1;this.wb=[]}q("lf.schema.TableBuilder",Y);function Ak(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Bk=B([0,6]);function zk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Ck(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.lc.has(b))throw new D(503,a.w+"."+b);}
function Dk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Ek(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function Fk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.w+"."+e);},a)}}function Gk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.hd.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.uf=function(a,b){zk(a);Ck(this,a);this.J.set(a,b);Bk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.uf;
Y.prototype.wf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));zk(this.Ea);Ck(this,this.Ea);a=Hk(this,a,!0,void 0,b);Dk(this,a);1==a.length&&this.ud.add(a[0].name);this.lc.add(this.Ea);this.sa.set(this.Ea,a);return this};Y.prototype.addPrimaryKey=Y.prototype.wf;
Y.prototype.vf=function(a,b){zk(a);Ck(this,a);b=new yk(b,this.w,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.J.has(b.tb))throw new D(540,a);this.wb.push(b);this.ve(a,[b.tb],this.ud.has(b.tb));return this};Y.prototype.addForeignKey=Y.prototype.vf;Y.prototype.xf=function(a,b){zk(a);Ck(this,a);b=Hk(this,b,!0);1==b.length&&(this.ud.add(b[0].name),Ik(this,b[0].name));this.sa.set(a,b);this.lc.add(a);return this};Y.prototype.addUnique=Y.prototype.xf;
function Ik(a,b){a.wb.forEach(function(a){a.tb==b&&this.lc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){Hk(this,a,!1).forEach(function(a){this.hd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;Y.prototype.ve=function(a,b,c,d){zk(a);Ck(this,a);b=Hk(this,b,!0,d);c&&this.lc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;Y.prototype.Ab=ba("md");Y.prototype.persistentIndex=Y.prototype.Ab;
Y.prototype.xb=function(){Ek(this);Fk(this);Gk(this);return new (Jk(this))};Y.prototype.getSchema=Y.prototype.xb;function Hk(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(a){return new Ak({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Ak(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Jk(a){function b(){function b(b){return a.sa.get(b).map(function(a){return{$:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=ac(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.hd.has(b),a.J.get(b));return this[b]},this),e=ac(a.sa).map(function(c){return new Lg(a.w,c,a.lc.has(c),b.call(this,c))},this);Q.call(this,a.w,d,e,a.md);var f=null===a.Ea?null:new Lg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.hd.has(b.getName())});this.Jb=new xk(f,h,
a.wb);this.kf=Kk(a,d,e)}r(b,Q);b.prototype.vb=function(a){return new this.kf(cc++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.ib=function(a){var b={};this.jb().forEach(function(c){var d=c.getName();c=c.F();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);e=new ArrayBuffer(c.length/2);for(var l=new Uint8Array(e),p=0,L=0;p<c.length;p+=2)l[L++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.kf(a.id,b)};
b.prototype.deserializeRow=b.prototype.ib;b.prototype.Ie=g("Jb");b.prototype.getConstraint=b.prototype.Ie;return b}
function Kk(a,b,c){function d(a,d){this.J=b;this.sa=c;bc.call(this,a,d)}r(d,bc);d.prototype.Fe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ec()?null:Qc[b.F()]});return a};d.prototype.rf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.F();var d=this.l[c];a[c]=0==b?null!=d?fc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Ld.Ue.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.$)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].$):f(a.f);h[b]=a});d.prototype.lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Lk(a,b){this.g=new Z(a,b);this.rb=x();this.uc=!1;this.i=null;this.Uc=!1}q("lf.schema.Builder",Lk);function Mk(a,b){b.wb.forEach(function(a){var c=a.Ta;if(!this.rb.has(c))throw new D(536,a.name);c=this.rb.get(c).xb();var e=a.Ec;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].F()!=c[e].F())throw new D(538,a.name);if(!c[e].yc())throw new D(539,a.name);},a)}
Lk.prototype.Ff=function(a){a.wb.forEach(function(a){this.rb.get(a.Ta).wb.forEach(function(b){if(b.tb==a.Ec)throw new D(534,a.name);},this)},this)};function Nk(a){a.uc||(a.rb.forEach(function(a){Mk(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),y(a.rb).forEach(a.Ff,a),Ok(a),a.rb.clear(),a.uc=!0)}function Pk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.se)Pk(this,a,c);else if(a.$d&&b!=a)throw new D(533);},a));b.$d=!1}
function Ok(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Qk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Ta).Ge.add(d)})});y(b).forEach(function(a){Pk(this,a,b)},a)}function Qk(a){this.$d=this.se=!1;this.Ge=B();this.jc=a}Lk.prototype.xb=function(){this.uc||Nk(this);return this.g};Lk.prototype.getSchema=Lk.prototype.xb;Lk.prototype.Le=function(){var a=new oc("ns_"+this.g.name()),b=Vj();if(b.gd(a))var c=b.b(a);else c=new Tj,b.pb(a,c);return c};Lk.prototype.getGlobal=Lk.prototype.Le;
Lk.prototype.connect=function(a){if(this.Uc||null!==this.i&&this.i.dd)throw new D(113);this.Uc=!0;if(null===this.i){var b=this.Le();b.gd(A)||b.pb(A,this.xb());this.i=new W(b)}return this.i.Da(a).then(function(a){this.Uc=!1;return a}.bind(this),function(a){this.Uc=!1;this.i.close();throw a;}.bind(this))};Lk.prototype.connect=Lk.prototype.connect;Lk.prototype.Hf=function(a){if(this.rb.has(a))throw new D(503,a);if(this.uc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};
Lk.prototype.createTable=Lk.prototype.Hf;Lk.prototype.me=function(a){if(this.uc)throw new D(535);this.g.me(a);return this};Lk.prototype.setPragma=Lk.prototype.me;function Z(a,b){this.w=a;this.Xb=b;this.L=x();this.ee={Nf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Xb");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.oa;
Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Qe||(this.Qe=new vk(this));return this.Qe};Z.prototype.Ag=g("ee");Z.prototype.pragma=Z.prototype.Ag;Z.prototype.me=ba("ee");q("lf.schema.create",function(a,b){return new Lk(a,b)});u.prototype.catch=u.prototype.pe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
