if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function h(a){return function(){return this[a]}}function m(a){return function(){return a}}var n,ca=this;function q(a){return void 0!==a}function da(a){return"string"==typeof a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return null!=a}function ia(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++na)}var la="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){a=a.split(".");var c=ca;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&q(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function u(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Qg=function(d,e,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[e].apply(d,g)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}u(sa,Error);sa.prototype.name="CustomError";var ta=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(da(a))return da(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ua=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=da(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},va=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=Array(c),e=da(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},wa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,b,c)}:function(a,b,c){var d=c;ua(a,function(e,f){d=b.call(void 0,d,e,f,a)});return d},xa=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=da(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};
function ya(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function za(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Aa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Aa.apply(null,ya(d,e,e+8192)),g=0;g<f.length;g++)b.push(f[g]);else b.push(d)}return b};function Ba(a,b){this.mg=100;this.Jf=a;this.Fg=b;this.ld=0;this.bd=null}Ba.prototype.get=function(){if(0<this.ld){this.ld--;var a=this.bd;this.bd=a.next;a.next=null}else a=this.Jf();return a};Ba.prototype.put=function(a){this.Fg(a);this.ld<this.mg&&(this.ld++,a.next=this.bd,this.bd=a)};var Ca=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};
function Da(a){var b=0;a=Ca(String(a)).split(".");for(var c=Ca("10").split("."),d=Math.max(a.length,c.length),e=0;0==b&&e<d;e++){var f=a[e]||"",g=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;b=Ea(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||Ea(0==f[2].length,0==g[2].length)||Ea(f[2],g[2]);f=f[3];g=g[3]}while(0==b)}return b}function Ea(a,b){return a<b?-1:a>b?1:0};var Fa;a:{var Ga=ca.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function v(a){return-1!=Fa.indexOf(a)};function Ia(){return v("Safari")&&!(Ja()||v("Coast")||v("Opera")||v("Edge")||v("Firefox")||v("FxiOS")||v("Silk")||v("Android"))}function Ja(){return(v("Chrome")||v("CriOS"))&&!v("Edge")};function Ka(a){ca.setTimeout(function(){throw a;},0)}var La;
function Ma(){var a=ca.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!v("Presto")&&(a=function(){var e=document.createElement("IFRAME");e.style.display="none";e.src="";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write("");e.close();var g="callImmediate"+Math.random(),k="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=qa(function(l){if(("*"==k||l.origin==k)&&l.data==
g)this.port1.onmessage()},this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,k)}}});if("undefined"!==typeof a&&!v("Trident")&&!v("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var e=c.Ae;c.Ae=null;e()}};return function(e){d.next={Ae:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var f=document.createElement("SCRIPT");
f.onreadystatechange=function(){f.onreadystatechange=null;f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){ca.setTimeout(e,0)}};function Na(){this.wd=this.mc=null}var Pa=new Ba(function(){return new Oa},function(a){a.reset()});Na.prototype.add=function(a,b){var c=Pa.get();c.set(a,b);this.wd?this.wd.next=c:this.mc=c;this.wd=c};Na.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.wd=null),a.next=null);return a};function Oa(){this.next=this.scope=this.Od=null}Oa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Oa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(ca.Promise&&ca.Promise.resolve){var a=ca.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var b=Wa;!ja(ca.setImmediate)||ca.Window&&ca.Window.prototype&&!v("Edge")&&ca.Window.prototype.setImmediate==ca.setImmediate?(La||(La=Ma()),La(b)):ca.setImmediate(b)}}var Ua=!1,Va=new Na;function Wa(){for(var a;a=Va.remove();){try{a.Od.call(a.scope)}catch(b){Ka(b)}Pa.put(a)}Ua=!1};function w(a,b){this.Qa=0;this.hf=void 0;this.Rc=this.ac=this.B=null;this.ad=this.Md=!1;if(a!=ea)try{var c=this;a.call(b,function(d){Xa(c,2,d)},function(d){Xa(c,3,d)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.fc=this.Dc=this.child=null;this.zd=!1}Ya.prototype.reset=function(){this.context=this.fc=this.Dc=this.child=null;this.zd=!1};var Za=new Ba(function(){return new Ya},function(a){a.reset()});function $a(a,b,c){var d=Za.get();d.Dc=a;d.fc=b;d.context=c;return d}
function x(a){if(a instanceof w)return a;var b=new w(ea);Xa(b,2,a);return b}function ab(a){return new w(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(ra(b,a))}function db(a){return new w(function(b,c){var d=a.length,e=[];if(d)for(var f=function(p,r){d--;e[p]=r;0==d&&b(e)},g=function(p){c(p)},k=0,l;k<a.length;k++)l=a[k],bb(l,ra(f,k),g);else b(e)})}function eb(){var a,b,c=new w(function(d,e){a=d;b=e});return new fb(c,a,b)}
w.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};w.prototype.$goog_Thenable=!0;w.prototype.pe=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.ac||2!=a.Qa&&3!=a.Qa||jb(a);a.Rc?a.Rc.next=b:a.ac=b;a.Rc=b}
function hb(a,b,c,d){var e=$a(null,null,null);e.child=new w(function(f,g){e.Dc=b?function(k){try{var l=b.call(d,k);f(l)}catch(p){g(p)}}:f;e.fc=c?function(k){try{var l=c.call(d,k);!q(l)&&k instanceof kb?g(k):f(l)}catch(p){g(p)}}:g});e.child.B=a;ib(a,e);return e.child}w.prototype.Lg=function(a){this.Qa=0;Xa(this,2,a)};w.prototype.Mg=function(a){this.Qa=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Qa&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Qa=1,cb(c,a.Lg,a.Mg,a)||(a.hf=c,a.Qa=b,a.B=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function cb(a,b,c,d){if(a instanceof w)return ib(a,$a(b||ea,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return mb(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}
function mb(a,b,c,d,e){function f(l){k||(k=!0,d.call(e,l))}function g(l){k||(k=!0,c.call(e,l))}var k=!1;try{b.call(a,g,f)}catch(l){f(l)}}function jb(a){a.Md||(a.Md=!0,Ra(a.Qf,a))}function nb(a){var b=null;a.ac&&(b=a.ac,a.ac=b.next,b.next=null);a.ac||(a.Rc=null);return b}
w.prototype.Qf=function(){for(var a;a=nb(this);){var b=this.Qa,c=this.hf;if(3==b&&a.fc&&!a.zd){var d;for(d=this;d&&d.ad;d=d.B)d.ad=!1}if(a.child)a.child.B=null,ob(a,b,c);else try{a.zd?a.Dc.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}Za.put(a)}this.Md=!1};function ob(a,b,c){2==b?a.Dc.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function lb(a,b){a.ad=!0;Ra(function(){a.ad&&pb.call(null,b)})}var pb=Ka;function kb(a){sa.call(this,a)}u(kb,sa);kb.prototype.name="cancel";
function fb(a,b,c){this.ga=a;this.resolve=b;this.reject=c};function qb(a,b,c,d){c=c||function(r,W){return r==W};d=d||function(r){return a[r]};for(var e=a.length,f=b.length,g=[],k=0;k<e+1;k++)g[k]=[],g[k][0]=0;for(var l=0;l<f+1;l++)g[0][l]=0;for(k=1;k<=e;k++)for(l=1;l<=f;l++)c(a[k-1],b[l-1])?g[k][l]=g[k-1][l-1]+1:g[k][l]=Math.max(g[k-1][l],g[k][l-1]);var p=[];k=e;for(l=f;0<k&&0<l;)c(a[k-1],b[l-1])?(p.unshift(d(k-1,l-1)),k--,l--):g[k-1][l]>g[k][l-1]?k--:l--;return p}function rb(a){return wa(arguments,function(b,c){return b+c},0)}
function sb(a){return rb.apply(null,arguments)/arguments.length}function tb(a){var b=arguments.length;if(2>b)return 0;var c=sb.apply(null,arguments);return rb.apply(null,va(arguments,function(d){return Math.pow(d-c,2)}))/(b-1)}function ub(a){return Math.sqrt(tb.apply(null,arguments))};var vb="StopIteration"in ca?ca.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw vb;};wb.prototype.te=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.te)return a.te(!1);if(ia(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw vb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ia(a))try{ua(a,b,void 0)}catch(c){if(c!==vb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==vb)throw c;}}}function zb(a){if(xa(arguments,function(e){return!e.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=za(c.length);b.next=function(){if(d){for(var e=va(d,function(g,k){return c[k][g]}),f=d.length-1;0<=f;f--){if(d[f]<c[f].length-1){d[f]++;break}if(0==f){d=null;break}d[f]=0}return e}throw vb;};return b};function Ab(){return v("iPhone")&&!v("iPod")&&!v("iPad")};function Bb(a){var b=Cb;return Object.prototype.hasOwnProperty.call(b,10)?b[10]:b[10]=a(10)};var Db=v("Opera"),Eb=v("Trident")||v("MSIE"),Fb=v("Edge"),Gb=v("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!v("Edge"))&&!(v("Trident")||v("MSIE"))&&!v("Edge"),Hb=-1!=Fa.toLowerCase().indexOf("webkit")&&!v("Edge"),Ib=v("Macintosh"),Jb=v("Windows"),Kb=v("Android"),Lb=Ab(),Mb=v("iPad"),Nb=v("iPod"),Ob;
a:{var Pb="",Qb=function(){var a=Fa;if(Gb)return/rv:([^\);]+)(\)|;)/.exec(a);if(Fb)return/Edge\/([\d\.]+)/.exec(a);if(Eb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Hb)return/WebKit\/(\S+)/.exec(a);if(Db)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Qb&&(Pb=Qb?Qb[1]:"");if(Eb){var Rb,Sb=ca.document;Rb=Sb?Sb.documentMode:void 0;if(null!=Rb&&Rb>parseFloat(Pb)){Ob=String(Rb);break a}}Ob=Pb}var Tb=Ob,Cb={};function Ub(){return Bb(function(){return 0<=Da(Tb)})};var Vb=function(){if(Jb){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Fa))?a[1]:"0"}return Ib?(a=/10[_.][0-9_.]+/,(a=a.exec(Fa))?a[0].replace(/_/g,"."):"10"):Kb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Fa))?a[1]:""):Lb||Mb||Nb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Fa))?a[1].replace(/_/g,"."):""):""}();var Wb=Ab()||v("iPod"),Xb=v("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Yb(){var a;!(a=Ia()&&!Ub())&&(a=Xb||Wb)&&(a=!(0<=Da(Vb)));this.lg=a;this.ag=!(this.lg||Eb&&!Ub());this.Pg=Ja()||Ia()}var Zb;function z(){return new window.Map}function $b(a){return Array.from(a.keys())}function A(a){return Array.from(a.values())};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ac(a,b){this.ra=a;this.l=b||this.Fe()}var bc=0;n=ac.prototype;n.id=h("ra");n.Fe=function(){return{}};n.rf=h("l");n.Ia=function(){return{id:this.ra,value:this.rf()}};n.lb=function(a){return"#"==a.substr(-1)?this.ra:null};function cc(a){return new ac(a.id,a.value)}function dc(a){return new ac(bc++,a||{})}function ec(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};var fc={};t("lf.TransactionType",fc);fc.READ_ONLY=0;fc.READ_WRITE=1;function B(a,b,c,d,e){this.rd=a;this.eg=b;this.Og=c;this.Lf=d;this.Ef=e}t("lf.TransactionStats",B);B.prototype.Jg=h("rd");B.prototype.success=B.prototype.Jg;B.prototype.dg=h("eg");B.prototype.insertedRowCount=B.prototype.dg;B.prototype.Ng=h("Og");B.prototype.updatedRowCount=B.prototype.Ng;B.prototype.Kf=h("Lf");B.prototype.deletedRowCount=B.prototype.Kf;B.prototype.Df=h("Ef");B.prototype.changedTableCount=B.prototype.Df;function gc(a,b){this.td=a;this.Oa=b||null;this.O=eb();this.rd=!1;this.ya=null}gc.prototype.ja=function(){return(0==this.td?this.oc():hc(this)).then(function(a){this.rd=!0;return a}.bind(this))};function hc(a){try{ic(a.Oa)}catch(b){return ab(b)}return jc(a).then(function(b){this.Oa.ja();return b}.bind(a))}function jc(a){kc(a);lc(a);return a.oc()}
function kc(a){a.Oa.fb.forEach(function(b,c){c=this.Oa.ca().get(c);c=this.H(c.getName(),c.ib.bind(c),0);var d=A(b.va).map(function(f){return f.id()});b=A(b.la).map(function(f){return f[1]}).concat(A(b.ua));var e=0<b.length;0<d.length&&c.remove(d,e).pe(this.Oe,this);c.put(b).pe(this.Oe,this)},a)}function lc(a){mc(a.Oa).forEach(function(b){var c=this.H(b.getName(),cc,1);c.remove([]);c.put(b.Ia())},a)}gc.prototype.Oe=function(a){this.O.reject(a)};
gc.prototype.X=function(){if(null===this.ya)if(this.rd)if(0==this.td)this.ya=new B(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Oa.fb.forEach(function(e){d++;a+=e.ua.size;c+=e.la.size;b+=e.va.size});this.ya=new B(!0,a,c,b,d)}else this.ya=new B(!1,0,0,0,0);return this.ya};function nc(a){this.Gg=a}nc.prototype.toString=h("Gg");var oc=new nc("backstore"),pc=new nc("cache"),qc=new nc("indexstore"),rc=new nc("engine"),sc=new nc("runner"),tc=new nc("observerregistry"),uc=new nc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function D(a){return Array.from(a)}function vc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(d){c=c&&a.has(d)});return c};function wc(a,b){this.ra=a;this.l=b||{}}function xc(a){var b=C();a.forEach(function(c){b.add(c>>9)});return D(b)}wc.prototype.V=h("ra");function yc(a,b){b.forEach(function(c){this.l[c.id()]=c.Ia()},a)}function zc(a,b){b.forEach(function(c){delete this.l[c]},a)}wc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function Ac(a){return new wc(a.id,JSON.parse(a.value))};function Bc(a,b,c){this.aa=a;this.Lb=b;this.jf=c}n=Bc.prototype;n.get=function(a){if(0==a.length)return this.Qd();var b=this.Lb;return Cc(this,a).then(function(c){return a.map(function(d){var e=c.get(d>>9);return b(e.l[d])})})};function Cc(a,b){var c=z(),d=eb();a=xc(b).map(function(e){return new w(function(f,g){try{var k=this.aa.get(e)}catch(l){g(l);return}k.onerror=g;k.onsuccess=function(l){l=Ac(l.target.result);c.set(l.V(),l);f()}},this)},a);db(a).then(function(){d.resolve(c)});return d.ga}
n.Qd=function(){return new w(function(a,b){var c=[];try{var d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var e=d.result;if(e){var f=Ac(e.value).l,g;for(g in f)c.push(this.Lb(f[g]));e.continue()}else a(c)}.bind(this)},this)};n.Sb=function(a){return new w(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
n.put=function(a){if(0==a.length)return x();var b=z();a.forEach(function(c){var d=c.id()>>9,e=b.get(d)||null;null===e&&(e=this.jf(this.aa.name,d));yc(e,[c]);b.set(d,e)},this);a=A(b).map(function(c){return this.Sb(function(){return this.aa.put(c.Ia())}.bind(this))},this);return db(a)};
n.remove=function(a){if(0==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this));var b=z();a.forEach(function(c){var d=c>>9,e=b.get(d)||null;null===e&&(e=this.jf(this.aa.name,d));zc(e,[c]);b.set(d,e)},this);a=A(b).map(function(c){return this.Sb(function(){return 0==Object.keys(c.l).length?this.aa.delete(c.V()):this.aa.put(c.Ia())}.bind(this))},this);return db(a)};function Dc(a,b,c){a=a.b(pc);var d=[c<<9,(c+1<<9)-1];b=a.Ra(b,d[0],d[1]);c=new wc(c);yc(c,b);return c}
function Ec(a,b){return new wc(b)};function Fc(a){this.U=a.b(pc);this.A=a.b(qc);this.g=a.b(uc)}Fc.prototype.update=function(a){a.forEach(function(b){Gc(this,b);Hc(this,b)},this)};function Hc(a,b){var c=b.getName();b.va.forEach(function(d,e){this.U.remove(c,e)},a);b.ua.forEach(function(d){this.U.set(c,d)},a);b.la.forEach(function(d){this.U.set(c,d[1])},a)}function Gc(a,b){var c=a.g.table(b.getName());Ic(b).forEach(function(d){Jc(this,c,d)},a)}
function Jc(a,b,c){var d=a.A.ic.get(b.getName())||[],e=0;d.forEach(function(f){try{Kc(f,c),e++}catch(g){throw d.slice(0,e).forEach(function(k){Kc(k,[c[1],c[0]])},this),g;}},a)}function Kc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.gb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Lc={};t("lf.ConstraintAction",Lc);Lc.RESTRICT=0;Lc.CASCADE=1;var Mc={};t("lf.ConstraintTiming",Mc);Mc.IMMEDIATE=0;Mc.DEFERRABLE=1;var Nc={};t("lf.Order",Nc);Nc.DESC=0;Nc.ASC=1;var Oc={};t("lf.Type",Oc);Oc.ARRAY_BUFFER=0;Oc.BOOLEAN=1;Oc.DATE_TIME=2;Oc.INTEGER=3;Oc.NUMBER=4;Oc.STRING=5;Oc.OBJECT=6;var Pc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};t("lf.type.DEFAULT_VALUES",Pc);function E(a,b){this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}u(E,Error);function Qc(){this.ka=z();this.size=0}n=Qc.prototype;n.has=function(a){return this.ka.has(a)};n.set=function(a,b){var c=this.ka.get(a)||null;null===c&&(c=C(),this.ka.set(a,c));c.has(b)||(c.add(b),this.size++);return this};n.Vb=function(a,b){var c=this.ka.get(a)||null;null===c&&(c=C(),this.ka.set(a,c));b.forEach(function(d){c.has(d)||(c.add(d),this.size++)},this)};n.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this)};
n.delete=function(a,b){var c=this.ka.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.ka.delete(a);return b};n.get=function(a){a=this.ka.get(a)||null;return null===a?null:D(a)};n.clear=function(){this.ka.clear();this.size=0};n.keys=function(){return $b(this.ka)};n.values=function(){var a=[];this.ka.forEach(function(b){a.push.apply(a,D(b))});return a};function Rc(a){this.A=a.b(qc);this.g=a.b(uc);this.U=a.b(pc);this.Wc=null}function Sc(a,b,c){var d=b.Jb.sg;c.forEach(function(e){d.forEach(function(f){if(null==e.l[f.getName()])throw new E(202,f.j());},this)},a)}function Tc(a,b,c,d){b.Jb.Pd.forEach(function(e){e.timing==d&&Uc(this,e,c)},a)}function Uc(a,b,c){var d=Vc(a,b);c.forEach(function(e){if(Wc(e[0],e[1],b.name)&&(e=e[1].lb(b.name),null!==e&&!d.hb(e)))throw new E(203,b.name);},a)}
function Vc(a,b){null===a.Wc&&(a.Wc=z());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Ta)[b.Ec].Ba(),c=a.A.get(c.j()),a.Wc.set(b.name,c));return c}function Wc(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function Xc(a,b,c,d){b=Yc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(e){return e.timing==d}),0!=b.length&&Zc(a,b,c,function(e,f,g){if(f.hb(g))throw new E(203,e.name);}))}
function $c(a,b,c){b=Yc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Qc;Zc(a,b,c,function(e,f,g){f=f.get(g);0<f.length&&d.Vb(e.Be,f)});return d}function ad(a,b,c){var d=new Qc;Zc(a,c,b,function(e,f,g,k){f.get(g).forEach(function(l){d.set(l,{Nd:e,xg:k[1]})})});return d}function Zc(a,b,c,d){b.forEach(function(e){var f=this.A.get(e.name),g=Vc(this,e);c.forEach(function(k){if(Wc(k[0],k[1],g.getName())){var l=k[0].lb(g.getName());d(e,f,l,k)}},this)},a)}
function bd(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[null,e]}),Tc(a,b,c,d))}function cd(a,b,c,d){0!=c.length&&(Tc(a,b,c,d),Xc(a,b,c,d))}function dd(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[e,null]}),Xc(a,b,c,d))}
function ed(a,b,c){var d={oe:[],lf:new Qc},e=new Qc;e.Vb(b.getName(),c.map(function(g){return g.id()}));do{var f=new Qc;e.keys().forEach(function(g){var k=this.g.table(g);g=e.get(g).map(function(l){return[this.U.get(l),null]},this);k=$c(this,k,g);null!==k&&(d.oe.unshift.apply(d.oe,k.keys()),f.Wd(k))},a);e=f;d.lf.Wd(e)}while(0<e.size);return d};function fd(a){this.ua=z();this.la=z();this.va=z();this.w=a}n=fd.prototype;n.getName=h("w");n.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.la.set(a.id(),b);this.va.delete(a.id())}else this.ua.set(a.id(),a)};n.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):this.la.has(c)?(a=[this.la.get(a[0].id())[0],b],this.la.set(c,a)):this.la.set(c,a)};
n.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};n.Wd=function(a){a.ua.forEach(function(b){this.add(b)},this);a.la.forEach(function(b){this.modify(b)},this);a.va.forEach(function(b){this.delete(b)},this)};
function Ic(a){var b=[];a.ua.forEach(function(c){b.push([null,c])});a.la.forEach(function(c){b.push(c)});a.va.forEach(function(c){b.push([c,null])});return b}n.toString=function(){return"["+$b(this.ua).toString()+"], ["+$b(this.la).toString()+"], ["+$b(this.va).toString()+"]"};function gd(a){var b=new fd(a.w);a.ua.forEach(function(c){b.delete(c)});a.va.forEach(function(c){b.add(c)});a.la.forEach(function(c){b.modify([c[1],c[0]])});return b}
n.gg=function(){return 0==this.ua.size&&0==this.va.size&&0==this.la.size};function hd(a,b){this.Z=z();b.forEach(function(c){this.Z.set(c.getName(),c)},this);this.g=a.b(uc);this.U=a.b(pc);this.A=a.b(qc);this.za=new Rc(a);this.cd=new Fc(a);this.fb=z()}function mc(a){var b=[];$b(a.fb).map(function(c){return this.Z.get(c)},a).forEach(function(c){c.Ab()&&(c.Ca().forEach(function(d){b.push(this.A.get(d.j()))},this),b.push(this.A.get(c.getName()+".#")))},a);return b}n=hd.prototype;n.ca=h("Z");
n.yb=function(a,b){id(this,a);Sc(this.za,a,b);bd(this.za,a,b,0);for(var c=0;c<b.length;c++)jd(this,a,[null,b[c]])};function jd(a,b,c){var d=b.getName(),e=a.fb.get(d)||new fd(d);a.fb.set(d,e);try{Jc(a.cd,b,c)}catch(g){throw g;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
n.update=function(a,b){id(this,a);Sc(this.za,a,b);b=b.map(function(c){return[this.U.get(c.id()),c]},this);kd(this,a,b);cd(this.za,a,b,0);b.forEach(function(c){jd(this,a,c)},this)};n.Rd=function(a,b){id(this,a);Sc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.Jb.nd;if(null===f)var g=null;else{g=this.za;f=f.j();var k=d.lb(f);g=g.A.get(f).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.U.get(g),d.ra=g,cd(this.za,a,[[e,d]],0)):bd(this.za,a,[d],0);jd(this,a,[e,d])}};
n.remove=function(a,b){id(this,a);ld(this,a,b);dd(this.za,a,b,0);for(var c=0;c<b.length;c++)jd(this,a,[b[c],null])};function kd(a,b,c){b=Yc(a.g.info(),b.getName(),1);if(null!==b){var d=ad(a.za,c,b);d.keys().forEach(function(e){d.get(e).forEach(function(f){var g=this.g.table(f.Nd.Be),k=this.U.get(e),l=g.ib(k.Ia());l.l[f.Nd.tb]=f.xg.l[f.Nd.Ec];jd(this,g,[k,l])},this)},a)}}
function ld(a,b,c){if(null!==Yc(a.g.info(),b.getName(),1)){b=ed(a.za,b,c);var d=b.lf;b.oe.forEach(function(e){var f=this.g.table(e);e=d.get(e).map(function(g){return this.U.get(g)},this);dd(this.za,f,e,0);e.forEach(function(g){jd(this,f,[g,null])},this)},a)}}function ic(a){a.fb.forEach(function(b){var c=this.Z.get(b.getName());bd(this.za,c,A(b.ua),1);dd(this.za,c,A(b.va),1);cd(this.za,c,A(b.la),1)},a)}n.ja=aa();n.Fb=function(){var a=A(this.fb).map(function(b){return gd(b)});this.cd.update(a)};
function id(a,b){if(!a.Z.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.from=a;this.m=b;this.da=this.from==G?!1:c;this.na=this.m==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.da?"(":"[")+(this.from==G?"unbound":this.from)+", "+(this.m==G?"unbound":this.m)+(this.na?")":"]")};function md(a){if(nd(a))return[];var b=null,c=null;a.from==G||(b=new F(G,a.from,!1,!a.da));a.m==G||(c=new F(a.m,G,!a.na,!1));return[b,c].filter(function(d){return null!==d})}F.prototype.reverse=function(){return new F(this.m,this.from,this.na,this.da)};
function od(a,b){var c=pd(a.from,b.from,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.m==G||d.m>a.from||d.m==a.from&&!d.na&&!a.da}function qd(){return new F(G,G,!1,!1)}function nd(a){return a.from==G&&a.m==G}function rd(a){return a.from==a.m&&a.from!=G&&!a.da&&!a.na}F.prototype.contains=function(a){var b=this.m==G||a<this.m||a==this.m&&!this.na;return(this.from==G||a>this.from||a==this.from&&!this.da)&&b};
function pd(a,b,c,d,e){function f(g){return c?g:1==g?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function sd(a,b){var c=pd(a.from,b.from,!0,a.da,b.da);0==c&&(c=pd(a.m,b.m,!1,a.na,b.na));return c}function td(a){if(0==a.length)return[];a.sort(sd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].from,!1,!0):c==b.length-1?new F(a[c-1].m,G,!0,!1):new F(a[c-1].m,a[c].from,!0,!0);return b};function ud(a){this.hc=[];q(a)&&this.add(a)}ud.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};ud.prototype.hb=function(a){return this.hc.some(function(b){return b.contains(a)})};ud.prototype.Nb=h("hc");
ud.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(sd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(od(c,a[d])){var e=a[d],f=qd();if(c.from!=G&&e.from!=G){var g=pd(c.from,e.from,!0);1!=g?(f.from=c.from,f.da=0!=g?c.da:c.da&&e.da):(f.from=e.from,f.da=e.da)}c.m!=G&&e.m!=G&&(g=pd(c.m,e.m,!1),-1!=g?(f.m=c.m,f.na=0!=g?c.na:c.na&&e.na):(f.m=e.m,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function vd(a,b){var c=[];a.Nb().map(function(d){return b.Nb().map(function(e){if(od(d,e)){var f=qd();var g=pd(d.from,e.from,!0);g=0==g?d.da?d:e:-1!=g?d:e;f.from=g.from;f.da=g.da;d.m==G||e.m==G?e=d.m==G?e:d:(g=pd(d.m,e.m,!1),e=0==g?d.na?d:e:-1==g?d:e);f.m=e.m;f.na=e.na}else f=null;return f})}).forEach(function(d){c=c.concat(d)});return new ud(c.filter(function(d){return null!==d}))};function H(a,b){this.entries=a;this.L=C(b);this.Wa=null}H.prototype.o=function(){return D(this.L)};function wd(a){return a.entries.map(function(b){return b.ta.l})}function xd(a){return a.entries.map(function(b){return b.ta.id()})}function yd(a,b){return a.Wa.get(b.j())}var zd=null;function Ad(){null===zd&&(zd=new H([],[]));return zd}
function Bd(a){if(0==a.length)return Ad();var b=a.reduce(function(g,k){return g+k.entries.length},0),c=Array(b),d=0;b=a.map(function(g){var k=z();g.entries.forEach(function(l){c[d++]=l;k.set(l.id,l)});return k});for(var e=z(),f=0;f<c.length;f++)b.every(function(g){return g.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(A(e),D(a[0].L))}function Cd(a){if(0==a.length)return Ad();var b=z();a.forEach(function(c){c.entries.forEach(function(d){b.set(d.id,d)})});return new H(A(b),D(a[0].L))}
function Dd(a,b){var c=1<b.length;a=a.map(function(d){return new Ed(d,c)});return new H(a,b)}function Ed(a,b){this.ta=a;this.id=Fd++;this.Td=b}var Fd=0;function I(a,b){var c=b.Ja;return null!==c&&a.ta.l.hasOwnProperty(c)?a.ta.l[c]:a.Td?a.ta.l[Gd(b.H())][b.getName()]:a.ta.l[b.getName()]}function Hd(a,b,c){var d=b.Ja;if(null!=d)a.ta.l[d]=c;else if(a.Td){d=Gd(b.H());var e=a.ta.l[d];null==e&&(e={},a.ta.l[d]=e);e[b.getName()]=c}else a.ta.l[b.getName()]=c}
function Id(a,b,c,d){function e(g,k){if(g.Td){g=g.ta.l;for(var l in g)f[l]=g[l]}else f[k[0]]=g.ta.l}var f={};e(a,b);e(c,d);a=new ac(-1,f);return new Ed(a,!0)};t("lf.bind",function(a){return new Jd(a)});function Jd(a){this.ea=a}t("lf.Binder",Jd);Jd.prototype.Ba=h("ea");function Kd(){this.Ue=Ld();var a=Md();this.Mb=z();this.Mb.set(1,Nd());this.Mb.set(2,Od());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Pd());this.Mb.set(6,Qd())}var Rd;function Sd(){null!=Rd||(Rd=new Kd);return Rd}function Td(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new E(550);c=a.get(c)||null;if(null===c)throw new E(550);return c}
function Ld(){function a(c){return c}var b=z();b.set(1,function(c){return null===c?null:c?1:0});b.set(2,function(c){return null===c?null:c.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Nd(){var a=z();a.set("eq",function(b,c){return b==c});a.set("neq",function(b,c){return b!=c});return a}
function Md(){var a=Nd();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b>=c[0]&&b<=c[1]});a.set("gte",function(b,c){return null===b||null===c?!1:b>=c});a.set("gt",function(b,c){return null===b||null===c?!1:b>c});a.set("in",function(b,c){return-1!=c.indexOf(b)});a.set("lte",function(b,c){return null===b||null===c?!1:b<=c});a.set("lt",function(b,c){return null===b||null===c?!1:b<c});return a}
function Pd(){var a=Md();a.set("match",function(b,c){return null===b||null===c?!1:(new RegExp(c)).test(b)});return a}function Qd(){var a=z();a.set("eq",function(b,c){if(null!==c)throw new E(550);return null===b});a.set("neq",function(b,c){if(null!==c)throw new E(550);return null!==b});return a}
function Od(){var a=z();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b.getTime()>=c[0].getTime()&&b.getTime()<=c[1].getTime()});a.set("eq",function(b,c){return(null===b?-1:b.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(b,c){return null===b||null===c?!1:b.getTime()>=c.getTime()});a.set("gt",function(b,c){return null===b||null===c?!1:b.getTime()>c.getTime()});a.set("in",function(b,c){return c.some(function(d){return d.getTime()==b.getTime()})});a.set("lte",
function(b,c){return null===b||null===c?!1:b.getTime()<=c.getTime()});a.set("lt",function(b,c){return null===b||null===c?!1:b.getTime()<c.getTime()});a.set("neq",function(b,c){return(null===b?-1:b.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.B=null}var Ud=[];J.prototype.getParent=h("B");J.prototype.Za=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Vd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function M(a){return a.h||Ud}function Wd(a,b){return M(a)[b]||null}function Xd(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Yd(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function Zd(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Zd(this,M(this).indexOf(a))};function $d(a,b,c){Wd(a,c).B=null;b.B=a;a.h[c]=b}function ae(a,b,c){!1!==b.call(c,a)&&M(a).forEach(function(d){ae(d,b,c)})};function be(){J.call(this);this.ra=ce++}u(be,J);var ce=0;be.prototype.V=h("ra");function de(a,b,c){be.call(this);this.I=a;this.value=b;this.D=c;this.rc=Td(Sd(),this.I.F(),this.D);this.Sa=!1;this.$b=b}u(de,be);n=de.prototype;n.Kb=function(){var a=new de(this.I,this.value,this.D);a.$b=this.$b;a.qd(this.Sa);var b=this.V();a.ra=b;return a};n.jb=function(a){return null!=a?(a.push(this.I),a):[this.I]};n.o=function(a){a=null!=a?a:C();a.add(this.I.H());return a};n.qd=ba("Sa");
function ee(a){var b=!1;a.value instanceof Jd||(b="array"==fa(a.value)?!a.value.some(function(c){return c instanceof Jd}):!0);if(!b)throw new E(501);}n.eval=function(a){ee(this);if("in"==this.D)return fe(this,a);var b=a.entries.filter(function(c){return this.rc(I(c,this.I),this.value)!=this.Sa},this);return new H(b,a.o())};
n.bind=function(a){if(this.$b instanceof Jd){var b=this.$b.Ba();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==fa(this.$b)&&(this.value=this.$b.map(function(c){if(c instanceof Jd){var d=c.Ba();if(a.length<=d)throw new E(510);return a[c.Ba()]}return c}))};function fe(a,b){var c=C(a.value),d=function(e){return null===e?!1:c.has(e)!=this.Sa}.bind(a);a=b.entries.filter(function(e){return d(I(e,this.I))},a);return new H(a,b.o())}
n.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Sa?"(complement)":"")+" "+this.value+")"};n.fd=function(){ee(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
n.qe=function(){var a=null;if("between"==this.D)a=new F(ge(this,this.value[0]),ge(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(b){return new F(b,b,!1,!1)}),new ud(this.Sa?td(a):a);a=ge(this,this.value);a="eq"==this.D?new F(a,a,!1,!1):"gte"==this.D?new F(a,G,!1,!1):"gt"==this.D?new F(a,G,!0,!1):"lte"==this.D?new F(G,a,!1,!1):new F(G,a,!1,!0)}return new ud(this.Sa?md(a):[a])};function ge(a,b){return 2==a.I.F()?b.getTime():b};function he(a){this.$=a;this.Sc=this.Fa=null}function ie(a,b){null===a.Fa&&null!=a.u&&(a.Fa=je(a.u));return a.Fa.get(b)||null}function je(a){var b=z();ae(a,function(c){b.set(c.V(),c)});return b}function ke(a,b){b.u&&(a.u=b.u.Kb());a.Sc=b}he.prototype.bind=function(){return this};function le(a,b){a=a.u;null!=a&&ae(a,function(c){c instanceof de&&c.bind(b)})};function me(a){he.call(this,a)}u(me,he);function ne(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}me.prototype.ca=function(){return C(this.from)};me.prototype.clone=function(){var a=new me(this.$);ke(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Rb&&(a.Rb=this.Rb);this.Gb&&(a.Gb=this.Gb);a.ab=this.ab;return a};
me.prototype.bind=function(a){me.eb.bind.call(this,a);null!=this.Rb&&(this.W=a[this.Rb.Ba()]);null!=this.Gb&&(this.K=a[this.Gb.Ba()]);le(this,a);return this};function oe(a,b){this.Ga=a;this.Z=b}oe.prototype.Za=h("Ga");oe.prototype.ca=h("Z");function pe(a){var b=C();a.forEach(function(c){c.ca().forEach(b.add.bind(b))});return b};function qe(a,b){this.global=a;this.Ya=a.b(oc);this.od=b.map(function(c){return c.context});this.df=b.map(function(c){return c.de});this.Hd=pe(this.df);this.re=re(this);this.Bb=eb()}function re(a){return a.od.some(function(b){return!(b instanceof me)})?1:0}n=qe.prototype;
n.exec=function(){function a(){var f=d.shift();if(f){var g=e[c.length];return f.Za().exec(b,g).then(function(k){c.push(k[0]);return a()})}return x()}var b=0==this.re?void 0:new hd(this.global,this.Hd),c=[],d=this.df.slice(),e=this.od;return a().then(function(){this.ia=this.Ya.Cb(this.re,D(this.Hd),b);return this.ia.ja()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(f){null!=b&&b.Fb();throw f;})};n.F=h("re");n.ca=h("Hd");n.V=function(){return ka(this)};n.ae=aa();
n.X=function(){var a=null;null!=this.ia&&(a=this.ia.X());return null===a?new B(!1,0,0,0,0):a};function se(a,b){qe.call(this,a,b);this.Eb=a.b(tc)}u(se,qe);se.prototype.getPriority=m(0);se.prototype.ae=function(a){this.od.forEach(function(b,c){te(this.Eb,b,a[c])},this)};function ue(a,b){this.c=a;this.Eb=a.b(tc);this.Ha=a.b(sc);this.cd=new Fc(a);this.fb=b;var c=a.b(uc);a=this.fb.map(function(d){return c.table(d.getName())});this.Z=C(a);this.Bb=eb()}n=ue.prototype;n.exec=function(){this.cd.update(this.fb);this.Hc();return x()};n.F=m(1);n.ca=h("Z");n.V=function(){return ka(this)};n.getPriority=m(1);n.Hc=function(){var a=ve(this.Eb,this.Z);0!=a.length&&(a=new se(this.c,a),we(this.Ha,a))};function xe(a){this.c=a;this.Ya=a.b(oc);this.Ha=a.b(sc)}xe.prototype.Zd=function(a){a=new ue(this.c,a);we(this.Ha,a)};function N(a,b){this.Xb=a;this.i=b;this.Va=z()}t("lf.backstore.FirebaseRawBackStore",N);N.prototype.Zc=h("i");N.prototype.$c=function(){throw new E(351);};function ye(a,b){var c=eb(),d=a;b.length&&(d=a.child(b));d.once("value",function(e){c.resolve(e.val())},function(e){c.reject(e)});return c.ga}function ze(a,b,c){function d(f){f?e.reject(f):e.resolve()}c=c||!1;var e=eb();c?a.set(b,d):a.update(b,d);return e.ga}
N.prototype.Da=function(a){return ye(this.i,"@rev/R").then(function(b){this.Pa=b;return ye(this.i,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(e){this.Va.has(e.getName())||(b[e.getName()]=++c)},this);var d=this.i.child("@table");return ze(d,b)}.bind(this))};
function Ae(a,b,c){var d=a.Va.get(b);return null!=d?function(){var e={},f=eb();this.i.orderByChild("T").equalTo(d).once("value",function(g){g.forEach(function(k){var l=c(k.val());e[parseInt(k.key(),10)]=l});f.resolve(e)});return f.ga}.call(a).then(function(e){e["@rev"]={R:++this.Pa};return ze(this.i,e)}.bind(a)):x()}N.prototype.pc=function(a){return Ae(this,a,m(null)).then(function(){this.Va.delete(a);return ze(this.i.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.pc;
N.prototype.nc=function(a,b,c){return Ae(this,a,function(d){var e=d.P;e[b]=c;return{R:this.Pa+1,T:d.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.nc;N.prototype.qc=function(a,b){return Ae(this,a,function(c){var d=c.P;delete d[b];return{R:this.Pa+1,T:c.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.qc;N.prototype.Gc=function(a,b,c){return Ae(this,a,function(d){var e=d.P;e[c]=e[b];delete e[b];return{R:this.Pa+1,T:d.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Gc;
N.prototype.vb=function(){throw new E(351);};N.prototype.createRow=N.prototype.vb;N.prototype.xc=h("Xb");N.prototype.getVersion=N.prototype.xc;N.prototype.bc=function(a){var b=eb();a=this.Va.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(c){var d=[];c.forEach(function(e){d.push(e.val().P)});b.resolve(d)});return b.ga};N.prototype.dump=function(){var a={},b=$b(this.Va).map(function(c){return this.bc(c).then(function(d){a[c]=d})}.bind(this));return db(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function Be(a,b,c){gc.call(this,b,c);this.i=a}u(Be,gc);Be.prototype.H=function(a){return this.i.vc(a)};
Be.prototype.oc=function(){if(0==this.td)return this.O.resolve(),this.O.ga;var a=this.Oa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Pa+1;this.i.Pa=b;var c={"@rev":{R:b}};a.forEach(function(d,e){var f=this.i.Va.get(e);d.ua.forEach(function(g,k){c[k]={R:b,T:f,P:g.l}});d.la.forEach(function(g,k){c[k]={R:b,T:f,P:g[1].l}});d.va.forEach(function(g,k){c[k]=null})},this);this.i.i.update(c,function(d){null===d?this.O.resolve():(this.i.Pa=b-1,d=A(a).map(function(e){return Ce(this.i,e.getName())},this),
db(d).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ga};function De(){this.Aa=z()}function Ee(a,b){if(0==b.length)return A(a.Aa);var c=[];b.forEach(function(d){d=this.Aa.get(d)||null;null===d||c.push(d)},a);return c}De.prototype.getData=h("Aa");De.prototype.get=function(a){return x(Ee(this,a))};function Fe(a,b){b.forEach(function(c){this.Aa.set(c.id(),c)},a)}De.prototype.put=function(a){Fe(this,a);return x()};function Ge(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(c){this.Aa.delete(c)},a)}
De.prototype.remove=function(a){Ge(this,a);return x()};function He(a){return 0==a.Aa.size?0:$b(a.Aa).reduce(function(b,c){return b>c?b:c},0)};function Ie(a,b){this.g=a;this.yf=b;this.Fc=z();this.Pa=-1;this.L=z();this.Va=z();this.Ed=null}n=Ie.prototype;
n.Da=function(a){this.i=this.yf.child(this.g.name());var b=a||function(){return x()};return ye(this.i,"@db/version").then(function(c){return null===c?ze(this.i,Je(this),!0).then(function(){var d=new N(0,this.i);return b(d)}.bind(this)).then(function(){return this.Da()}.bind(this)):c==this.g.version()?ye(this.i,"@rev/R").then(function(d){this.Pa=d;return ye(this.i,"@table")}.bind(this)).then(function(d){for(var e in d)this.Va.set(e,d[e]);d=this.g.oa().map(function(f){return Ce(this,f.getName())},this);
return db(d)}.bind(this)).then(function(){Ke(this);Le(this);return x()}.bind(this)):this.be(c,b).then(function(){return this.Da()}.bind(this))}.bind(this))};n.be=function(a,b){var c=new N(a,this.i);return c.Da(this.g).then(function(){return x()}.bind(this)).then(function(){return b(c)}).then(function(){var d=this.i.child("@db");return ze(d,{version:this.g.version()},!0)}.bind(this))};
function Le(a){a.i.off();a.i.on("child_removed",a.ug.bind(a));a.Fd&&(a.Fd.off(),a.Fc.clear());a.Fd=a.i.orderByChild("R").startAt(a.Pa+1);a.Fd.on("value",a.Zd.bind(a))}function Ke(a){bc=A(a.L).map(function(b){return He(b)}).reduce(function(b,c){return b>c?b:c},0)+1}n.ug=function(a){var b=a.val(),c=this.Fc.get(b.T)||null;null===c&&(c=C(),this.Fc.set(b.T,c));c.add(parseInt(a.key(),10))};
n.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Pa&&(this.Pa=b,a=Me(this,a),a.forEach(function(c){var d=this.L.get(c.getName()),e=$b(c.va);0<e.length&&Ge(d,e);var f=A(c.ua);c.la.forEach(function(g){f.push(g[1])});Fe(d,f)},this),0<a.length&&this.Bc(a),Le(this))};
function Me(a,b){var c=C(),d=z();a.Va.forEach(function(e,f){var g=this.L.get(f),k=new fd(f);this.Fc.has(e)&&(f=D(this.Fc.get(e)),f.forEach(function(l){c.add(l)}),Ee(g,f).forEach(function(l){k.delete(l)}));d.set(e,k)}.bind(a));b.forEach(function(e){if("@rev"!=e.key()){var f=parseInt(e.key(),10);if(!c.has(f)){var g=e.val();e=d.get(g.T);var k=this.L.get(e.getName());g=this.g.table(e.getName()).ib({id:f,value:g.P});k.getData().has(f)?e.modify([Ee(k,[f])[0],g]):e.add(g)}}}.bind(a));return A(d).filter(function(e){return!e.gg()})}
function Ce(a,b){var c=eb(),d=a.Va.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(f){var g=new De,k=[];f.forEach(function(l){k.push(e.ib({id:parseInt(l.key(),10),value:l.val().P}))});Fe(g,k);this.L.set(b,g);c.resolve()}.bind(a));return c.ga}function Je(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Pa=1;b["@table"]={};a.g.oa().forEach(function(c,d){c=c.getName();b["@table"][c]=d;this.L.set(c,new De);this.Va.set(c,d)},a);return b}
n.Cb=function(a,b,c){return new Be(this,a,c)};n.vc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};n.close=aa();n.subscribe=ba("Ed");n.Bc=function(a){null!=this.Ed&&this.Ed(a)};n.Kc=m(!1);function O(a,b,c,d){this.i=b;this.ia=c;this.Xb=a;this.Qc=d}t("lf.backstore.IndexedDBRawBackStore",O);O.prototype.Zc=h("i");O.prototype.getRawDBInstance=O.prototype.Zc;O.prototype.$c=h("ia");O.prototype.getRawTransaction=O.prototype.$c;O.prototype.pc=function(a){return new w(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};O.prototype.dropTable=O.prototype.pc;
function Ne(a,b,c,d){return new w(function(e,f){try{var g=this.ia.objectStore(b);var k=g.openCursor()}catch(l){f(l);return}k.onsuccess=function(){var l=k.result;l?(c(l),l.continue()):(d(g),e())};k.onerror=f},a)}function Oe(a){return a instanceof ArrayBuffer?ec(a):a instanceof Date?a.getTime():a}function Pe(a,b,c){function d(f){var g=Ac(f.value),k=g.l,l;for(l in k){var p=cc(k[l]);c(p);k[l]=p.Ia()}f.update(g.Ia())}function e(f){var g=cc(f.value);c(g);f.update(g.Ia())}return Ne(a,b,a.Qc?d:e,aa())}
O.prototype.nc=function(a,b,c){var d=Oe(c);return Pe(this,a,function(e){e.l[b]=d})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.qc=function(a,b){return Pe(this,a,function(c){delete c.l[b]})};O.prototype.dropTableColumn=O.prototype.qc;O.prototype.Gc=function(a,b,c){return Pe(this,a,function(d){d.l[c]=d.l[b];delete d.l[b]})};O.prototype.renameTableColumn=O.prototype.Gc;
function Qe(a,b){var c=[];return new w(function(d,e){try{var f=this.ia.objectStore(b).openCursor()}catch(g){e(g);return}f.onsuccess=function(){var g=f.result;if(g){if(this.Qc){var k=Ac(g.value).l,l;for(l in k)c.push(k[l])}else c.push(g.value);g.continue()}else d(c)}.bind(this);f.onerror=e},a)}O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Oe(a[c]);return dc(b)};O.prototype.createRow=O.prototype.vb;O.prototype.xc=h("Xb");O.prototype.getVersion=O.prototype.xc;
O.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return db(b).then(function(e){var f={};e.forEach(function(g,k){f[a.item(k)]=g});return f})};O.prototype.dump=O.prototype.dump;O.prototype.bc=function(a){return Qe(this,a).then(function(b){return b.map(function(c){return c.value})})};function Re(a,b){this.aa=a;this.Lb=b}Re.prototype.get=function(a){if(0==a.length)return Se(this);a=a.map(function(b){return new w(function(c,d){try{var e=this.aa.get(b)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(f){c(this.Lb(f.target.result))}.bind(this)},this)},this);return db(a)};
function Se(a){return new w(function(b,c){var d=[];try{var e=this.aa.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var f=e.result;f?(d.push(this.Lb(f.value)),f.continue()):b(d)}.bind(this)},a)}Re.prototype.Sb=function(a){return new w(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Re.prototype.put=function(a){if(0==a.length)return x();a=a.map(function(b){return this.Sb(function(){return this.aa.put(b.Ia())}.bind(this))},this);return db(a)};
Re.prototype.remove=function(a,b){function c(){var e=a.map(function(f){return d.Sb(function(){return d.aa.delete(f)})});return db(e)}var d=this;return b?c():new w(function(e,f){var g=d.aa.count();g.onsuccess=function(k){0==a.length||k.target.result==a.length?d.Sb(function(){return d.aa.clear()}).then(e,f):c().then(e,f)};g.onerror=f})};function Te(a,b,c,d,e){gc.call(this,c,e);this.c=a;this.ia=b;this.Qc=d;this.ia.oncomplete=this.O.resolve.bind(this.O);this.ia.onabort=this.O.reject.bind(this.O)}u(Te,gc);Te.prototype.H=function(a,b,c){return this.Qc?(c=null!=c?c:0,a=this.ia.objectStore(a),new Bc(a,b,0==c?ra(Dc,this.c):Ec)):new Re(this.ia.objectStore(a),b)};Te.prototype.oc=function(){return this.O.ga};function Ue(a,b){this.c=a;this.g=b;this.Bd=b.ee.Nf||!1}n=Ue.prototype;
n.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return x()};return new w(function(d,e){try{var f=b.open(this.g.name(),this.g.version())}catch(g){e(g);return}f.onerror=function(g){g=g.target.error;e(new E(361,g.name,g.message))};f.onupgradeneeded=function(g){Ve(this,c,g).then(aa(),e)}.bind(this);f.onsuccess=function(g){this.i=g.target.result;this.ke().then(function(k){bc=Math.max(bc,k+1);d(this.i)}.bind(this))}.bind(this)},
this)};function Ve(a,b,c){var d=c.target.result;c=new O(c.oldVersion,d,c.target.transaction,a.Bd);We(d);a.g.oa().forEach(ra(a.Gf,d),a);return b(c)}function We(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(e){try{a.deleteObjectStore(e)}catch(f){}})}
n.Gf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Ab()&&(b.Ca().forEach(function(c){Xe(a,c.j())},this),Xe(a,Ye(b)))};function Xe(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}n.Cb=function(a,b,c){b=this.i.transaction(Ze(b),0==a?"readonly":"readwrite");return new Te(this.c,b,a,this.Bd,c)};
function Ze(a){var b=C();a.forEach(function(c){b.add(c.getName());c.Ab()&&(c.Ca().forEach(function(d){b.add(d.j())}),b.add(Ye(c)))});return D(b)}
n.ke=function(){function a(){if(0==c.length)return x();var g=c.shift();return b(g).then(a)}function b(g){return new w(function(k,l){try{var p=d.transaction([g]).objectStore(g).openCursor(null,"prev")}catch(r){l(r);return}p.onsuccess=function(r){(r=r.target.result)&&(e=Math.max(e,f(r)));k(e)};p.onerror=function(){k(e)}})}var c=this.g.oa().map(function(g){return g.getName()}),d=this.i,e=0,f=function(g){return this.Bd?(g=Ac(g.value),Object.keys(g.l).reduce(function(k,l){return Math.max(k,l)},0)):g.key}.bind(this);
return new w(function(g){a().then(function(){g(e)})})};n.close=function(){this.i.close()};n.vc=function(){throw new E(511);};n.subscribe=aa();n.Bc=aa();n.Kc=m(!0);function $e(a,b,c){gc.call(this,b,c);this.aa=a;0==b&&this.O.resolve()}u($e,gc);$e.prototype.H=function(a){return this.aa.vc(a)};$e.prototype.oc=function(){this.O.resolve();return this.O.ga};function af(a){this.g=a;this.L=z()}n=af.prototype;n.Da=function(){this.g.oa().forEach(this.bg,this);return x()};n.vc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};n.Cb=function(a,b,c){return new $e(this,a,c)};function bf(a,b){if(!a.L.has(b)){var c=new De;a.L.set(b,c)}}n.bg=function(a){bf(this,a.getName());a.Ab()&&(a.Ca().forEach(function(b){bf(this,b.j())},this),bf(this,Ye(a)))};n.close=aa();n.subscribe=aa();n.Bc=aa();n.Kc=m(!0);function cf(a){af.call(this,a);this.kd=null}u(cf,af);cf.prototype.subscribe=function(a){null===this.kd&&(this.kd=a)};cf.prototype.Bc=function(a){null===this.kd||this.kd(a)};cf.prototype.Kc=m(!1);function df(a,b,c){this.ia=a;this.w='"'+b+'"';this.Lb=c}df.prototype.get=function(a){var b=this.Lb;return ef(this.ia,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(c){for(var d=c.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:c.rows.item(f).id,value:JSON.parse(c.rows.item(f).value)});return e})};
df.prototype.put=function(a){if(0==a.length)return x();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(c){ef(this.ia,b,[c.id(),JSON.stringify(c.l)])},this);return x()};df.prototype.remove=function(a){ef(this.ia,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return x()};function ff(a,b,c){gc.call(this,b,c);this.i=a;this.L=z();this.Id=[]}u(ff,gc);function gf(a){return a.replace(".","__d__").replace("#","__s__")}ff.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new df(this,gf(a),b),this.L.set(a,c));return c};function ef(a,b,c,d){var e=eb();a.Id.push({Ig:b,yg:c,transform:d,O:e});return e.ga}
ff.prototype.oc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(f,g){this.O.reject(g)}.bind(this),d=[],e=function(f,g){if(null!==a){var k=g;null!=a.transform&&null!=g&&(k=a.transform(g));d.push(k);a.O.resolve(k)}0<this.Id.length?(a=g=this.Id.shift(),f.executeSql(g.Ig,g.yg,e,c)):this.O.resolve(d)}.bind(this);0==this.td?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ga};function P(a,b,c){this.i=c;this.c=a;this.Xb=b}t("lf.backstore.WebSqlRawBackStore",P);P.prototype.Zc=h("i");P.prototype.getRawDBInstance=P.prototype.Zc;P.prototype.$c=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.$c;function hf(a){return new ff(a.i,1,new hd(a.c,C()))}P.prototype.pc=function(a){var b=hf(this);ef(b,"DROP TABLE "+a,[]);return b.ja()};P.prototype.dropTable=P.prototype.pc;
P.prototype.bc=function(a){var b=hf(this);ef(b,"SELECT id, value FROM "+a,[]);return b.ja().then(function(c){for(var d=c[0].rows.length,e=Array(d),f=0;f<d;++f)e[f]={id:c[0].rows.item(f).id,value:JSON.parse(c[0].rows.item(f).value)};return x(e)})};function jf(a,b,c){var d=hf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(f){f.forEach(function(g){g=c(g);ef(d,e,[JSON.stringify(g.value),g.id])});return d.ja()})}
P.prototype.nc=function(a,b,c){var d=Oe(c);return jf(this,a,function(e){e.value[b]=d;return e})};P.prototype.addTableColumn=P.prototype.nc;P.prototype.qc=function(a,b){return jf(this,a,function(c){delete c.value[b];return c})};P.prototype.dropTableColumn=P.prototype.qc;P.prototype.Gc=function(a,b,c){return jf(this,a,function(d){d.value[c]=d.value[b];delete d.value[b];return d})};P.prototype.renameTableColumn=P.prototype.Gc;P.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Oe(a[c]);return dc(b)};
P.prototype.createRow=P.prototype.vb;P.prototype.xc=h("Xb");P.prototype.getVersion=P.prototype.xc;function kf(a){ef(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(b){for(var c=Array(b.rows.length),d=0;d<c.length;++d)c[d]=b.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=eb(),b=hf(this);kf(b);var c={};b.ja().then(function(d){d=d[0].filter(function(e){return"__lf_ver"!=e&&"__WebKitDatabaseInfoTable__"!=e}).map(function(e){return this.bc(e).then(function(f){c[e]=f})},this);db(d).then(function(){a.resolve(c)})}.bind(this));return a.ga};P.prototype.dump=P.prototype.dump;function mf(a,b,c){this.c=a;this.g=b;this.Hg=c||1}n=mf.prototype;n.Da=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return x()};return new w(function(c,d){var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Hg);if(null!=e)this.i=e,nf(this,b).then(function(){this.ke().then(c,d)}.bind(this),function(f){if(f instanceof E)throw f;throw new E(354,f.message);});else throw new E(354);},this)};
function nf(a,b){var c=eb(),d=new ff(a.i,1,new hd(a.c,C()));ef(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);ef(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ja().then(function(e){var f=0;e[1].rows.length&&(f=e[1].rows.item(0).v);f<this.g.version()?this.be(b,f).then(c.resolve.bind(c)):f>this.g.version()?c.reject(new E(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ga}n.Cb=function(a,b,c){if(null!=this.i)return new ff(this.i,a,c);throw new E(2);};n.close=aa();
n.vc=function(){throw new E(512);};n.subscribe=function(){throw new E(355);};n.Bc=function(){throw new E(355);};n.be=function(a,b){return of(this).then(function(){return a(new P(this.c,b,this.i))}.bind(this))};
function of(a){var b=a.g.oa(),c=new ff(a.i,1,new hd(a.c,C())),d=new ff(a.i,1,new hd(a.c,C()));ef(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);kf(c);return c.ja().then(function(e){var f=e[1];f.filter(function(p){return-1!=p.indexOf("__d__")}).forEach(function(p){ef(d,"DROP TABLE "+('"'+p+'"'),[])});var g=[],k=[],l=[];b.map(function(p){-1==f.indexOf(p.getName())&&g.push(p.getName());p.Ab&&(p.Ca().forEach(function(r){r=gf(r.j());g.push(r);k.push(r)}),p=gf(Ye(p)),g.push(p),l.push(p))});
g.forEach(function(p){ef(d,"CREATE TABLE "+('"'+p+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ja()})}n.ke=function(){var a=0,b=eb(),c=function(e){var f=new ff(this.i,0);ef(f,"SELECT MAX(id) FROM "+('"'+e+'"'),[]);return f.ja().then(function(g){g=g[0].rows.item(0)["MAX(id)"];a=Math.max(g,a)})}.bind(this),d=this.g.oa().map(function(e){return c(e.getName())});db(d).then(function(){bc=Math.max(bc,a+1);b.resolve()},function(e){b.reject(e)});return b.ga};n.Kc=m(!0);function pf(a){this.ka=z();this.kc=z();a.oa().forEach(function(b){this.kc.set(b.getName(),C())},this)}n=pf.prototype;n.set=function(a,b){this.ka.set(b.id(),b);this.kc.get(a).add(b.id())};n.Vb=function(a,b){var c=this.kc.get(a);b.forEach(function(d){this.ka.set(d.id(),d);c.add(d.id())},this)};n.get=function(a){return this.ka.get(a)||null};function qf(a,b){return b.map(function(c){return this.get(c)},a)}
n.Ra=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.kc.get(a);if(a.size<f-e)a.forEach(function(g){g>=e&&g<=f&&(g=this.ka.get(g),d.push(g))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.ka.get(b),d.push(c));return d};n.remove=function(a,b){this.ka.delete(b);this.kc.get(a).delete(b)};n.clear=function(){this.ka.clear();this.kc.clear()};function rf(a,b,c){var d=0,e=a.length;for(c=c||sf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function sf(a,b){return a-b}function tf(a,b,c){c=rf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function uf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function vf(){this.ha=0;this.Ac=null}vf.prototype.add=function(a,b){this.ha+=b;this.Ac=null===this.Ac?a:a>this.Ac?a:this.Ac};vf.prototype.remove=function(a,b){this.ha-=b};vf.prototype.clear=function(){this.ha=0};function wf(a,b){a.clear();b.forEach(function(c){this.ha+=c.ha},a)};function xf(a,b,c){this.w=a;this.Y=b;this.tf=c;this.ya=new vf;this.clear()}var yf=[];n=xf.prototype;n.getName=h("w");n.toString=function(){return this.xa.toString()};n.add=function(a,b){this.xa=this.xa.yb(a,b)};n.set=function(a,b){this.xa=this.xa.yb(a,b,!0)};n.remove=function(a,b){this.xa=this.xa.remove(a,b)};n.get=function(a){return this.xa.get(a)};n.Vc=function(a){if(null==a)return this.X().ha;if(a instanceof F){if(nd(a))return this.X().ha;if(rd(a))return this.get(a.from).length}return this.Ra([a]).length};
n.X=h("ya");n.Qd=function(a,b,c){var d=Array(a);this.xa.fill({offset:b?this.ya.ha-a-c:c,count:a,ne:0},d);return b?d.reverse():d};
n.Ra=function(a,b,c,d){var e=zf(this.xa).a[0];if(!q(e)||0==c)return yf;b=b||!1;c=null!=c?Math.min(c,this.ya.ha):this.ya.ha;d=d||0;var f=Math.min(Math.max(this.ya.ha-d,0),c);if(0==f)return yf;if(!q(a)||1==a.length&&a[0]instanceof F&&nd(a[0]))return this.Qd(f,b,d);a=this.Y.pf(a);var g=Array(b?this.ya.ha:f),k={count:0,W:g.length,reverse:b,K:d},l=1<this.gb().Ud();a.forEach(function(p){var r=this.Y.pd(p);r=this.Y.Sd(p)?e:r[0];r=this.xa.Tf(r);for(var W=0;null!=r&&k.count<k.W;){if(l){for(var K=r,y=p,L=k,
V=g,ma=K.s.gb(),gb=-1,Qa=0;Qa<K.a.length;++Qa)if(ma.zb(K.a[Qa],y)){gb=Qa;break}if(-1!=gb)for(Qa=gb;Qa<K.a.length&&L.count<L.W;++Qa)ma.zb(K.a[Qa],y)&&Af(K,L,V,Qa)}else r.Ra(p,k,g);0!=k.K||r.ed(p)?W=0:W++;r=2==W?null:r.next()}},this);g.length>k.count&&g.splice(k.count,g.length-k.count);return b?uf(g,b,c,d):g};n.clear=function(){this.xa=Bf(this);this.ya.clear()};n.hb=function(a){return this.xa.hb(a)};n.min=function(){return this.Db(this.Y.min.bind(this.Y))};n.max=function(){return this.Db(this.Y.max.bind(this.Y))};
function Cf(a,b,c){if(!a.Y.Jd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.tf?[b.C[c]]:b.C[c]]}n.Db=function(a){a:{var b=zf(this.xa);var c=0;do if(c>=b.a.length)b=b.wa,c=0;else{var d=Cf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Df(this.xa);d=c.a.length-1;do if(0>d)c=c.ob,d=0;else{var e=Cf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};n.La=h("tf");n.gb=h("Y");
n.Na=function(a,b){return null!=a?0==this.Y.compare(a,b):!1};n.Ia=function(){for(var a=[],b=zf(this.xa);b;)a.push(new ac(b.ra,[b.a,b.C])),b=b.wa;return a};function Ef(a,b,c,d){a=new xf(b,a,c);d=Ff(d,a);a.xa=d;return a}function Gf(a,b){this.ra=a;this.s=b;this.kb=0;this.wa=this.ob=this.B=null;this.a=[];this.C=[];this.h=[];this.Tf=1==b.gb().Ud()?this.Ke:this.Je}function Bf(a){return new Gf(bc++,a)}function Hf(a){return 0==a.kb}n=Gf.prototype;n.next=h("wa");
function If(a){function b(g){return null!=g?g.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(g){return g.ra}).join("|"),e=a.C.join("/"),f=b(a.ob)+"{";f=Hf(a)?f+e:f+d;f=f+"}"+b(a.B);a.wa&&(a=If(a.wa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}n.toString=function(){var a="",b=If(this);a+=b[0]+"\n"+b[1]+"\n";this.h.length&&(a+=this.h[0].toString());return a};function zf(a){return Hf(a)?a:zf(a.h[0])}function Df(a){return Hf(a)?a:Df(a.h[a.h.length-1])}
function Jf(a,b){b&&(b.ob=a);a&&(a.wa=b)}function Kf(a){var b=a[0],c=Bf(b.s);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.a.push(a[b].a[0]);return c}function Lf(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=Kf(c);else{var d=c.length,e=0;b=Bf(a.s);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),g=Kf(f);g.B=b;b.h.length&&(b.a.push(f[0].a[0]),Jf(b.h[b.h.length-1],g));b.h.push(g);e+=a;d-=a}}return b}
n.get=function(a){var b=Mf(this,a);if(Hf(this)){var c=yf;this.s.Na(this.a[b],a)&&(c=c.concat(this.C[b]));return c}b=this.s.Na(this.a[b],a)?b+1:b;return this.h[b].get(a)};n.hb=function(a){var b=Mf(this,a);return this.s.Na(this.a[b],a)?!0:Hf(this)?!1:this.h[b].hb(a)};n.remove=function(a,b){Nf(this,a,-1,b);return null===this.B?(a=this,1==this.h.length&&(a=this.h[0],a.B=null),a):this};function Of(a){return Hf(a)?a.a[0]:Of(a.h[0])}
function Pf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Of(a.h[b]))}
function Nf(a,b,c,d){var e=Mf(a,b),f=Hf(a);if(!f){var g=a.s.Na(a.a[e],b)?e+1:e;if(Nf(a.h[g],b,g,d))Pf(a);else return!1}else if(!a.s.Na(a.a[e],b))return!1;if(a.a.length>e&&a.s.Na(a.a[e],b)){if(q(d)&&!a.s.La()&&f&&(g=a.C[e],d=rf(g,d,void 0),0>d?d=!1:(g.splice(d,1),d=!0),d&&a.s.X().remove(b,1),a.C[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.La()?1:a.C[e].length,a.C.splice(e,1),a.s.X().remove(b,f))}if(256>a.a.length&&null!==a.B){a:{if(a.wa&&256<a.wa.a.length)b=a.wa,e=d=0,f=a.a.length+1;else if(a.ob&&
256<a.ob.a.length)b=a.ob,d=a.ob.a.length-1,e=Hf(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=Hf(a)?a.C:a.h;Hf(a)?g=b.C:(g=b.h,g[e].B=a);d.splice(f,0,g[e]);g.splice(e,1);Hf(b)||(Pf(b),Pf(a));b=!0}b||Qf(a,c)}return!0}
function Qf(a,b){var c;if(a.wa&&511>a.wa.a.length){var d=a.wa;var e=c=0}else a.ob&&(d=a.ob,c=d.a.length,e=Hf(d)?d.C.length:d.h.length);c=[c,0].concat(a.a);Array.prototype.splice.apply(d.a,c);c=null;Hf(a)?c=a.C:(c=a.h,c.forEach(function(f){f.B=d}));c=[e,0].concat(c);Array.prototype.splice.apply(Hf(d)?d.C:d.h,c);Jf(a.ob,a.wa);Hf(d)||Pf(d);-1!=b&&(a.B.a.splice(b,1),a.B.h.splice(b,1))}
n.yb=function(a,b,c){var d=Mf(this,a);if(Hf(this)){if(this.s.Na(this.a[d],a)){if(c)this.s.X().remove(a,this.s.La()?1:this.C[d].length),this.C[d]=this.s.La()?b:[b];else{if(this.s.La())throw new E(201,this.s.getName(),JSON.stringify(a));if(!tf(this.C[d],b))throw new E(109);}this.s.X().add(a,1);return this}this.a.splice(d,0,a);this.C.splice(d,0,this.s.La()?b:[b]);this.s.X().add(a,1);512==this.a.length?(d=Bf(this.s),a=Bf(this.s),a.kb=1,a.a=[this.a[256]],a.h=[this,d],a.B=this.B,this.B=a,d.a=this.a.splice(256),
d.C=this.C.splice(256),d.B=a,Jf(d,this.wa),Jf(this,d),d=a):d=this;return d}d=this.s.Na(this.a[d],a)?d+1:d;a=this.h[d].yb(a,b,c);Hf(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Rf(this):this};
function Rf(a){var b=Bf(a.s),c=Bf(a.s);b.B=a.B;b.kb=a.kb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.B=b;c.kb=a.kb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(d){d.B=c});a.B=b;Jf(c,a.wa);Jf(a,c);return b}function Mf(a,b){for(var c=0,d=a.a.length,e=a.s.gb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}n.Ke=function(a){if(!Hf(this)){var b=Mf(this,a);this.s.Na(this.a[b],a)&&b++;return this.h[b].Ke(a)}return this};
n.Je=function(a){if(!Hf(this)){var b=Mf(this,a);this.s.Na(this.a[b],a)&&(a.some(function(c){return c==G})||b++);return this.h[b].Je(a)}return this};
n.Ra=function(a,b,c){function d(y){return y[0]?y[1]?0:1:-1}var e=this.s.gb(),f=0,g=this.a.length-1,k=this.a,l=d(e.ub(k[f],a)),p=d(e.ub(k[g],a));if(1!=l&&(-1!=l||-1!=p)){var r=function(y,L){L=y+L>>1;return L==y?L+1:L},W=function(y,L,V){if(y>=L)return 0==V?L:-1;var ma=d(e.ub(k[y],a));if(0==ma)return y;if(1==ma)return-1;ma=r(y,L);if(ma==L)return 0==V?L:-1;var gb=d(e.ub(k[ma],a));return 0==gb?W(y,ma,gb):-1==gb?W(ma+1,L,V):W(y+1,ma,gb)},K=function(y,L){if(y>=L)return y;var V=d(e.ub(k[L],a));if(0==V)return L;
if(-1==V)return y;V=r(y,L);if(V==L)return y;var ma=d(e.ub(k[V],a));return 0==ma?K(V,L):1==ma?K(y,V-1):-1};0!=l&&(f=W(f+1,g,p));-1!=f&&(g=K(f,g),-1!=g&&g>=f&&Sf(this,b,c,f,g+1))}};function Af(a,b,c,d){if(a.s.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.C[d][e]}function Sf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Af(a,b,c,d)}
n.fill=function(a,b){if(Hf(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.La()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.ne++]=this.C[c][d],a.count--}else if(this.s.La())b[a.ne++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.ne++]=this.C[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Ff(a,b){var c=b.X();a=a.map(function(e){var f=new Gf(e.id(),b);f.a=e.l[0];f.C=e.l[1];f.a.forEach(function(g,k){c.add(g,b.La()?1:f.C[k].length)});return f});for(var d=0;d<a.length-1;++d)Jf(a[d],a[d+1]);return 1<a.length?Lf(a[0]):a[0]}n.ed=function(a){return this.s.gb().ed(this.a[0],a)};function Tf(a){this.Tc=0==a?Uf:Vf;this.Xd=0==a?function(b){return null!=b?b.reverse():null}:function(b){return b||null};this.ce=0==a?Wf:Xf}function Vf(a,b){return a>b?1:a<b?-1:0}function Uf(a,b){return Vf(b,a)}function Xf(a,b){return sd(a,b)}function Wf(a,b){return sd(b,a)}n=Tf.prototype;n.ub=function(a,b){b=this.Xd(b);var c=[b.from==G,b.m==G];if(!c[0]){var d=this.Tc(a,b.from);c[0]=b.da?1==d:-1!=d}c[1]||(d=this.Tc(a,b.m),c[1]=b.na?-1==d:1!=d);return c};n.compare=function(a,b){return this.Tc(a,b)};
n.min=function(a,b){return a<b?1:a==b?0:-1};n.max=function(a,b){return a>b?1:a==b?0:-1};n.zb=function(a,b){a=this.ub(a,b);return a[0]&&a[1]};n.ed=function(a,b){return this.zb(a,b)};n.pf=function(a){return a.filter(function(b){return null!==b}).sort(function(b,c){return this.ce(b,c)}.bind(this))};n.Sd=function(a){return this.Xd(a).from==G};n.pd=function(a){a=this.Xd(a);return[a.from,a.m]};n.Jd=function(a){return null!==a};n.Ud=m(1);
n.toString=function(){return this.compare==Uf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Yf(a){Tf.call(this,a);this.Tc=0==a?Zf:$f}u(Yf,Tf);function $f(a,b){return null===a?null===b?0:-1:null===b?1:Vf(a,b)}function Zf(a,b){return $f(b,a)}Yf.prototype.zb=function(a,b){return null===a?nd(b):Yf.eb.zb.call(this,a,b)};Yf.prototype.Db=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Yf.prototype.min=function(a,b){var c=this.Db(a,b);null===c&&(c=Yf.eb.min.call(this,a,b));return c};
Yf.prototype.max=function(a,b){var c=this.Db(a,b);null===c&&(c=Yf.eb.max.call(this,a,b));return c};function ag(a){this.pa=a.map(function(b){return new Tf(b)})}function bg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}n=ag.prototype;n.compare=function(a,b){return bg(this,a,b,function(c,d,e){return d==G||e==G?0:c.compare(d,e)})};n.min=function(a,b){return bg(this,a,b,function(c,d,e){return c.min(d,e)})};n.max=function(a,b){return bg(this,a,b,function(c,d,e){return c.max(d,e)})};
n.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};n.zb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].zb(a[d],b[d]);return c};n.ed=function(a,b){return this.pa[0].zb(a[0],b[0])};
n.pf=function(a){var b=a.filter(function(d){return d.every(ha)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(d){return d[c]});a.forEach(function(d,e){d.sort(function(f,g){return this.pa[e].ce(f,g)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(d){return d[c]});return b.sort(function(d,e){for(var f=0,g=0;g<this.pa.length&&0==f;++g)f=this.pa[g].ce(d[g],e[g]);return f}.bind(this))};n.Sd=function(a){return this.pa[0].Sd(a[0])};
n.pd=function(a){var b=a.map(function(c,d){return this.pa[d].pd(c)[0]},this);a=a.map(function(c,d){return this.pa[d].pd(c)[1]},this);return[b,a]};n.Jd=function(a){return a.every(function(b,c){return this.pa[c].Jd(b)},this)};n.Ud=function(){return this.pa.length};function cg(a){ag.call(this,a);this.pa=a.map(function(b){return new Yf(b)})}u(cg,ag);function dg(a){if(1==a.f.length)return new Tf(a.f[0].order);var b=a.f.map(function(c){return c.order});return a.f.some(function(c){return c.$.ec()})?new cg(b):new ag(b)};function eg(a){this.ea=a;this.mb=C();this.Jc=new vf;this.ya=new vf}n=eg.prototype;n.getName=function(){return this.ea.getName()};n.add=function(a,b){null===a?(this.mb.add(b),this.Jc.add(a,1)):this.ea.add(a,b)};n.set=function(a,b){null===a?(this.mb.clear(),this.Jc.clear(),this.add(a,b)):this.ea.set(a,b)};n.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Jc.remove(a,1)):(this.mb.clear(),this.Jc.clear()):this.ea.remove(a,b)};n.get=function(a){return null===a?D(this.mb):this.ea.get(a)};n.Vc=function(a){return this.ea.Vc(a)};
n.X=function(){wf(this.ya,[this.ea.X(),this.Jc]);return this.ya};n.Ra=function(a,b,c,d){b=this.ea.Ra(a,b,c,d);return null!=a?b:b.concat(D(this.mb))};n.clear=function(){this.mb.clear();this.ea.clear()};n.hb=function(a){return null===a?0!=this.mb.size:this.ea.hb(a)};n.min=function(){return this.ea.min()};n.max=function(){return this.ea.max()};n.Ia=function(){return[new ac(-2,D(this.mb))].concat(this.ea.Ia())};n.gb=function(){return this.ea.gb()};
function fg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new eg(a);d.forEach(function(f){e.mb.add(f)});return e}n.La=function(){return this.ea.La()};function gg(a){this.w=a;this.qb=C();this.Y=new Tf(1)}n=gg.prototype;n.getName=h("w");n.add=function(a){if("number"!=typeof a)throw new E(103);this.qb.add(a)};n.set=function(a,b){this.add(a,b)};n.remove=function(a){this.qb.delete(a)};n.get=function(a){return this.hb(a)?[a]:[]};n.min=function(){return this.Db(this.Y.min.bind(this.Y))};n.max=function(){return this.Db(this.Y.max.bind(this.Y))};
n.Db=function(a){if(0==this.qb.size)return null;var b=D(this.qb).reduce(function(c,d){return null===c||1==a(d,c)?d:c},null);return[b,[b]]};n.Vc=function(){return this.qb.size};n.Ra=function(a,b,c,d){var e=a||[qd()];a=D(this.qb).filter(function(f){return e.some(function(g){return this.Y.zb(f,g)},this)},this);return uf(a,b,c,d)};n.clear=function(){this.qb.clear()};n.hb=function(a){return this.qb.has(a)};n.Ia=function(){return[new ac(0,D(this.qb))]};n.gb=h("Y");
function hg(a,b){var c=new gg(a);b[0].l.forEach(function(d){c.add(d,d)});return c}n.La=m(!0);n.X=function(){var a=new vf;a.ha=this.qb.size;return a};function ig(a){this.Ya=a.b(oc);this.A=a.b(qc);this.U=a.b(pc)}ig.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return x();var d=b.shift();return(d.Ab()?jg(this,d):kg(this,d)).then(c)}.bind(this);return c()};function kg(a,b){var c=a.Ya.Cb(0,[b]);a=c.H(b.getName(),b.ib.bind(b),0).get([]).then(function(d){this.U.Vb(b.getName(),d);lg(this,b,d)}.bind(a));c.ja();return a}
function lg(a,b,c){var d=a.A.ic.get(b.getName())||[];c.forEach(function(e){d.forEach(function(f){var g=e.lb(f.getName());f.add(g,e.id())})})}function jg(a,b){var c=a.Ya.Cb(0,[b]),d=c.H(b.getName(),b.ib,0).get([]).then(function(e){this.U.Vb(b.getName(),e)}.bind(a));a=b.Ca().map(function(e){return mg(this,e,c)},a).concat(ng(a,b,c));c.ja();return db(a.concat(d))}
function mg(a,b,c){c=c.H(b.j(),cc,1);var d=dg(b);return c.get([]).then(function(e){if(0<e.length)if(og(b)){var f=Ef.bind(void 0,d,b.j(),b.yc);e=fg(f,e);this.A.set(b.jc,e)}else e=Ef(d,b.j(),b.yc,e),this.A.set(b.jc,e)}.bind(a))}function ng(a,b,c){return c.H(Ye(b),cc,1).get([]).then(function(d){0<d.length&&(d=hg(Ye(b),d),this.A.set(b.getName(),d))}.bind(a))};function pg(){this.aa=z();this.ic=z()}pg.prototype.Da=function(a){a.oa().forEach(function(b){var c=[];this.ic.set(b.getName(),c);var d=Ye(b);if(null===this.get(d)){var e=new gg(d);c.push(e);this.aa.set(d,e)}b.Ca().forEach(function(f){var g=dg(f);g=new xf(f.j(),g,f.yc);g=og(f)&&1==f.f.length?new eg(g):g;c.push(g);this.aa.set(f.j(),g)},this)},this);return x()};pg.prototype.get=function(a){return this.aa.get(a)||null};
pg.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.aa.set(b.getName(),b)};function qg(a,b){var c=[],d=null,e=null;ae(a,function(f){var g=b(f);null==f.getParent()?e=g:Yd(d,g);var k=f.getParent();null!==k&&M(k).length==M(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<M(f).length&&c.push(g);d=null===f.h?c[c.length-1]:g});return e}function rg(a){return sg(a,function(b){return null===b.h})}
function tg(a){var b=a.getParent(),c=0;null!==b&&(c=M(b).indexOf(a),b.removeChild(a));var d=M(a).slice();d.forEach(function(e,f){a.removeChild(e);null===b||Xd(b,e,c+f)});return{parent:b,children:d}}function ug(a,b){M(a).slice().forEach(function(c){a.removeChild(c);Yd(b,c)});Yd(a,b)}function vg(a){var b=Wd(a,0);tg(a);ug(b,a);return b}
function wg(a,b,c){var d=Wd(a,0),e=M(d).slice();if(!e.some(function(f){return b(f)}))return a;tg(a);e.forEach(function(f,g){if(b(f)){var k=c(a);Zd(d,g);Yd(k,f);Xd(d,k,g)}});return d}function xg(a,b,c,d){var e=a.getParent();null!==e&&(a=M(e).indexOf(a),Zd(e,a),Xd(e,c,a));M(b).slice().forEach(function(f){b.removeChild(f);Yd(d,f)});return c}function sg(a,b,c){function d(f){b(f)&&e.push(f);null!=c&&c(f)||M(f).forEach(d)}var e=[];d(a);return e}
function yg(a,b){var c=b||function(e){return e.toString()+"\n"},d="";ae(a,function(e){for(var f=0;f<Vd(e);f++)d+="-";d+=c(e)});return d};function zg(a){be.call(this);this.nb=a;this.Sa=!1}u(zg,be);n=zg.prototype;n.Kb=function(){return qg(this,function(a){if(a instanceof zg){var b=new zg(a.nb);b.Sa=a.Sa;a=a.V();b.ra=a;return b}return a.Kb()})};n.jb=function(a){var b=a||[];ae(this,function(c){c!=this&&c.jb(b)}.bind(this));a=C(b);return D(a)};n.o=function(a){var b=null!=a?a:C();ae(this,function(c){c!=this&&c.o(b)}.bind(this));return b};n.qd=function(a){this.Sa!=a&&(this.Sa=a,this.nb="and"==this.nb?"or":"and",M(this).forEach(function(b){return b.qd(a)}))};
n.eval=function(a){var b=M(this).map(function(c){return c.eval(a)});return Ag(this,b)};function Ag(a,b){return"and"==a.nb?Bd(b):Cd(b)}n.toString=function(){return"combined_pred_"+this.nb.toString()};n.qe=function(){if("or"==this.nb){var a=new ud;M(this).forEach(function(b){b=b.qe().Nb();a.add(b)});return a}return new ud};n.fd=function(){return"or"==this.nb?Bg(this):!1};
function Bg(a){var b=null;return M(a).every(function(c){if(!(c instanceof de&&c.fd()))return!1;null===b&&(b=c.I);return b.j()==c.I.j()})};function Cg(a,b,c){be.call(this);this.fa=a;this.ma=b;this.D=c;this.Yd=null;a=Sd();this.rc=Td(a,this.fa.F(),this.D);this.jg=a.Ue.get(this.fa.F())||null}u(Cg,be);n=Cg.prototype;n.Kb=function(){var a=new Cg(this.fa,this.ma,this.D),b=this.V();a.ra=b;return a};n.jb=function(a){return null!=a?(a.push(this.fa),a.push(this.ma),a):[this.fa,this.ma]};n.o=function(a){a=null!=a?a:C();a.add(this.fa.H());a.add(this.ma.H());return a};
n.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Cg(this.ma,this.fa,a)};n.eval=function(a){var b=a.entries.filter(function(c){var d=I(c,this.fa);c=I(c,this.ma);return this.rc(d,c)},this);return new H(b,a.o())};n.toString=function(){return"join_pred("+this.fa.j()+" "+this.D+" "+this.ma.j()+")"};
function Dg(a,b,c){if(-1!=b.o().indexOf(Gd(a.fa.H()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.fa;a.fa=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.rc=Td(Sd(),a.fa.F(),a.D)}return[b,d]}return[d,b]}function Eg(a){var b={};a.jb().forEach(function(c){b[c.getName()]=null});return b}
function Fg(a,b,c){null===a.Yd&&(a.Yd=Eg(a.ma.H()));var d=new Ed(new ac(-1,a.Yd),!1);return Id(b,c,d,[Gd(a.ma.H())])}
function Gg(a,b,c,d){var e=[b,c];d||(e=Dg(a,b,c));b=e[0];c=e[1];e=b;var f=c,g=a.fa,k=a.ma;d&&(e=c,f=b,g=a.ma,k=a.fa);var l=new Qc,p=[];e.entries.forEach(function(K){var y=String(I(K,g));l.set(y,K)});var r=e.o(),W=f.o();f.entries.forEach(function(K){var y=I(K,k),L=String(y);null!==y&&l.has(L)?l.get(L).forEach(function(V){V=Id(K,W,V,r);p.push(V)}):d&&p.push(Fg(this,K,W))}.bind(a));a=b.o().concat(c.o());return new H(p,a)}
function Hg(a,b,c,d,e){function f(K,y){y=new Ed(y,1<r.length);K=Id(K,W,y,r);p.push(K)}var g=d.Zf.H(),k=b,l=c;-1!=b.o().indexOf(Gd(g))&&(k=c,l=b);var p=[],r=l.o(),W=k.o();k.entries.forEach(function(K){var y=this.jg(I(K,d.rg));y=d.index.get(y);0!=y.length&&(d.index.La()?f(K,e.get(y[0])):qf(e,y).forEach(f.bind(null,K)))},a);a=k.o().concat(l.o());return new H(p,a)};function Ig(a,b,c){return null===b?new de(a,b,c):q(b.j)?new Cg(a,b,c):new de(a,b,c)};var Jg={};t("lf.schema.DataStoreType",Jg);Jg.INDEXED_DB=0;Jg.MEMORY=1;Jg.LOCAL_STORAGE=2;Jg.FIREBASE=3;Jg.WEB_SQL=4;Jg.OBSERVABLE_STORE=5;function Kg(a,b,c,d){this.jc=a;this.name=b;this.yc=c;this.f=d}Kg.prototype.j=function(){return this.jc+"."+this.name};function og(a){return a.f.some(function(b){return b.$.ec()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.md=d;this.Ja=null}t("lf.schema.Table",Q);Q.prototype.getName=h("w");Q.prototype.getName=Q.prototype.getName;
function Gd(a){return a.Ja||a.w}Q.prototype.as=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Dg=this.Dg;return b};Q.prototype.as=Q.prototype.as;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.ib;Q.prototype.Ca=h("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.jb=h("J");Q.prototype.getColumns=Q.prototype.jb;Q.prototype.getConstraint=Q.prototype.Ie;Q.prototype.Ab=h("md");Q.prototype.persistentIndex=Q.prototype.Ab;function Ye(a){return a.w+".#"};function R(a,b){this.child=a;this.Ib=b;this.Ja=null}n=R.prototype;n.getName=function(){return this.Ib+"("+this.child.getName()+")"};n.j=function(){return this.Ib+"("+this.child.j()+")"};n.H=function(){return this.child.H()};n.toString=function(){return this.j()};n.F=function(){return this.child.F()};n.Ca=function(){return[]};n.Ba=m(null);n.ec=m(!1);n.as=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.as;
function Lg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Mg(){this.Ja=null;this.S=new Q("#UnknownTable",[],[],!1)}n=Mg.prototype;n.getName=m("*");n.j=function(){return this.getName()};n.toString=function(){return this.j()};n.H=h("S");n.F=m(4);n.Ca=function(){return[]};n.Ba=m(null);n.ec=m(!1);t("lf.fn.avg",function(a){return new R(a,"AVG")});function Ng(a){return new R(a||new Mg,"COUNT")}t("lf.fn.count",Ng);function Og(a){return new R(a,"DISTINCT")}t("lf.fn.distinct",Og);t("lf.fn.max",function(a){return new R(a,"MAX")});t("lf.fn.min",function(a){return new R(a,"MIN")});t("lf.fn.stddev",function(a){return new R(a,"STDDEV")});t("lf.fn.sum",function(a){return new R(a,"SUM")});t("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Pf=b}u(S,J);S.prototype.exec=function(a,b){switch(this.Pf){case 1:return Pg(this,a,b);case 0:return Qg(this,a,b);default:return Rg(this,a,b)}};S.prototype.toString=m("dummy_node");S.prototype.Lc=function(){return this.toString()};function Rg(a,b,c){return new w(function(d){d(this.ba([],b,c))}.bind(a))}function Pg(a,b,c){return Wd(a,0).exec(b,c).then(function(d){return this.ba(d,b,c)}.bind(a))}
function Qg(a,b,c){var d=M(a).map(function(e){return e.exec(b,c)});return db(d).then(function(e){var f=[];e.forEach(function(g){for(var k=0;k<g.length;++k)f.push(g[k])});return this.ba(f,b,c)}.bind(a))};function Sg(a){S.call(this,-1,1);this.xe=a}u(Sg,S);Sg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.j()}).toString()+")"};Sg.prototype.ba=function(a){a.forEach(function(b){Tg(new Ug(b,this.xe))},this);return a};function Ug(a,b){this.Ma=a;this.J=b}
function Tg(a){a.J.forEach(function(b){b=Lg(b).reverse();for(var c=1;c<b.length;c++){var d=b[c],e=Lg(d).slice(-1)[0],f=d.child instanceof R?yd(this.Ma,d.child):this.Ma;if(null!==f.Wa&&f.Wa.has(d.j()))break;f=Vg(d.Ib,f,e);e=this.Ma;null===e.Wa&&(e.Wa=z());e.Wa.set(d.j(),f)}},a)}
function Vg(a,b,c){var d=null;switch(a){case "MIN":d=Wg(b,c,function(e,f){return f<e?f:e});break;case "MAX":d=Wg(b,c,function(e,f){return f>e?f:e});break;case "DISTINCT":d=Xg(b,c);break;case "COUNT":d=Yg(b,c);break;case "SUM":d=Zg(b,c);break;case "AVG":a=Yg(b,c);0<a&&(d=Zg(b,c)/a);break;case "GEOMEAN":d=$g(b,c);break;default:d=ah(b,c)}return d}function Wg(a,b,c){return a.entries.reduce(function(d,e){e=I(e,b);return null===e?d:null===d?e:c(d,e)},null)}
function Yg(a,b){return b instanceof Mg?a.entries.length:a.entries.reduce(function(c,d){return c+(null===I(d,b)?0:1)},0)}function Zg(a,b){return Wg(a,b,function(c,d){return d+c})}function ah(a,b){var c=[];a.entries.forEach(function(d){d=I(d,b);null===d||c.push(d)});return 0==c.length?null:ub.apply(null,c)}function $g(a,b){var c=0;a=a.entries.reduce(function(d,e){e=I(e,b);if(0==e||null===e)return d;c++;return d+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function Xg(a,b){var c=z();a.entries.forEach(function(d){var e=I(d,b);c.set(e,d)});return new H(A(c),a.o())};function bh(a,b){this.Ga=a;this.Z=b}bh.prototype.Za=h("Ga");bh.prototype.ca=h("Z");function ch(){J.call(this)}u(ch,J);function dh(a,b){J.call(this);this.table=a;this.values=b}u(dh,ch);function eh(a,b){dh.call(this,a,b)}u(eh,dh);function fh(a){J.call(this);this.table=a}u(fh,ch);fh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function gh(a){J.call(this);this.table=a}u(gh,ch);gh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function hh(a){J.call(this);this.N=a}u(hh,ch);hh.prototype.toString=function(){return"select("+this.N.toString()+")"};function ih(a){J.call(this);this.table=a}u(ih,ch);ih.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function jh(){J.call(this)}u(jh,ch);jh.prototype.toString=m("cross_product");function kh(a,b){J.call(this);this.f=a;this.Ob=b}u(kh,ch);
kh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob){var b=this.Ob.map(function(c){return c.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function lh(a){J.call(this);this.M=a}u(lh,ch);lh.prototype.toString=function(){return"order_by("+ne(this.M)+")"};function mh(a){J.call(this);this.f=a}u(mh,ch);mh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function nh(a){J.call(this);this.f=a}u(nh,ch);
nh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function oh(a){J.call(this);this.W=a}u(oh,ch);oh.prototype.toString=function(){return"limit("+this.W+")"};function ph(a){J.call(this);this.K=a}u(ph,ch);ph.prototype.toString=function(){return"skip("+this.K+")"};function qh(a,b){J.call(this);this.N=a;this.Qb=b}u(qh,ch);qh.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", "+this.N.toString()+")"};function rh(){};function sh(){}u(sh,rh);sh.prototype.cb=function(a){this.G=a;this.sb(this.G);return this.G};sh.prototype.sb=function(a){if(a instanceof hh){var b=th(this,a.N);b=uh(this,b);xg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}M(a).forEach(function(c){this.sb(c)},this)};function th(a,b){if(0==M(b).length||"and"!=b.nb)return[b];a=M(b).slice().map(function(c){b.removeChild(c);return th(this,c)},a);return Aa(a)}
function uh(a,b){var c=null,d=null;b.map(function(e,f){e=new hh(e);0==f?c=e:Yd(d,e);d=e},a);return[c,d]};function vh(){}u(vh,rh);vh.prototype.cb=function(a,b){if(3>b.from.length)return a;this.G=a;this.sb(this.G);return this.G};vh.prototype.sb=function(a){if(a instanceof jh)for(;2<M(a).length;){for(var b=new jh,c=0;2>c;c++){var d=Zd(a,0);Yd(b,d)}Xd(a,b,0)}M(a).forEach(function(e){this.sb(e)},this)};function wh(){S.call(this,2,0)}u(wh,S);wh.prototype.toString=m("cross_product");wh.prototype.ba=function(a){var b=a[0],c=a[1];a=[];for(var d=b.o(),e=c.o(),f=0;f<b.entries.length;f++)for(var g=0;g<c.entries.length;g++){var k=Id(b.entries[f],d,c.entries[g],e);a.push(k)}b=b.o().concat(c.o());return[new H(a,b)]};function xh(a,b){qe.call(this,a,b);this.Ha=a.b(sc);this.Eb=a.b(tc)}u(xh,qe);xh.prototype.getPriority=m(2);xh.prototype.ae=function(a){0==this.F()?yh(this,a):this.Hc()};function yh(a,b){a.od.forEach(function(c,d){c instanceof me&&te(this.Eb,c,b[d])},a)}xh.prototype.Hc=function(){var a=ve(this.Eb,this.ca());0!=a.length&&(a=new se(this.global,a),we(this.Ha,a))};function zh(a){he.call(this,a)}u(zh,he);zh.prototype.ca=function(){var a=C();a.add(this.from);Ah(this,this.from.getName(),a);return a};function Ah(a,b,c){var d=Bh(a.$.info(),b,1);Bh(a.$.info(),b).forEach(c.add.bind(c));d.forEach(function(e){Ah(this,e.getName(),c)},a)}zh.prototype.clone=function(){var a=new zh(this.$);ke(a,this);a.from=this.from;return a};zh.prototype.bind=function(a){zh.eb.bind.call(this,a);le(this,a);return this};function Ch(a){he.call(this,a)}u(Ch,he);Ch.prototype.ca=function(){var a=C();a.add(this.Ka);var b=this.$.info();Dh(this.Ka.getName(),b.bf).forEach(a.add.bind(a));this.Yb&&Bh(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Ch.prototype.clone=function(){var a=new Ch(this.$);ke(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Jd?this.values:this.values.slice());a.Yb=this.Yb;a.Zb=this.Zb;return a};
Ch.prototype.bind=function(a){Ch.eb.bind.call(this,a);this.Zb&&(this.values=this.Zb instanceof Jd?a[this.Zb.Ba()]:this.Zb.map(function(b){return b instanceof Jd?a[b.Ba()]:b}));return this};function Eh(a){he.call(this,a)}u(Eh,he);Eh.prototype.ca=function(){var a=C();a.add(this.table);var b=this.set.map(function(d){return d.I.j()}),c=this.$.info();Fh(c,b).forEach(a.add.bind(a));Gh(c,b).forEach(a.add.bind(a));return a};Eh.prototype.clone=function(){var a=new Eh(this.$);ke(a,this);a.table=this.table;a.set=this.set?Hh(this.set):this.set;return a};Eh.prototype.bind=function(a){Eh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Pc&&(b.value=a[b.Pc])});le(this,a);return this};
function Hh(a){return a.map(function(b){var c={},d;for(d in b)c[d]=b[d];return c})};function Ih(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ec(b)+"'";default:return"'"+b.toString()+"'"}}function Jh(a,b){var c=a.Yb?"INSERT OR REPLACE":"INSERT",d=a.Ka.jb();c+=" INTO "+a.Ka.getName()+"(";c+=d.map(function(e){return e.getName()}).join(", ");c+=") VALUES (";return a.values.map(function(e){var f=d.map(function(g){var k=e.l[g.getName()];return b?null!=k?"#":"NULL":Ih(g.F(),k)});return c+f.join(", ")+");"}).join("\n")}
function Kh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Lh(a,b,c,d){return a instanceof Jd?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(e){return Ih(c,e)}).join(", ")+")":"between"==b?Ih(c,a[0])+" AND "+Ih(c,a[1]):Ih(c,a).toString()}
function Mh(a,b){return M(a).map(function(c){return"("+Nh(c,b)+")"}).join("and"==a.nb?" AND ":" OR ")}function Oh(a){return[a.fa.j(),Kh(a.D),a.ma.j()].join(" ")}function Nh(a,b){if(a instanceof de){var c=a.I.j(),d=Kh(a.D);a=Lh(a.value,a.D,a.I.F(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof zg)return Mh(a,b);if(a instanceof Cg)return Oh(a);throw new E(357,typeof a);}
function Ph(a,b){return(a=Nh(a,b))?" WHERE "+a:""}function Qh(a,b){var c="UPDATE "+a.table.getName()+" SET ";c+=a.set.map(function(d){var e=d.I.j()+" = ";return-1!=d.Pc?e+"?"+d.Pc.toString():e+Ih(d.I.F(),d.value).toString()}).join(", ");a.u&&(c+=Ph(a.u,b));return c+";"}
function Rh(a,b){var c="*";a.f.length&&(c=a.f.map(function(d){return d.Ja?d.j()+" AS "+d.Ja:d.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.ab&&0!=a.ab.size?c+=Sh(a,b):(c+=a.from.map(Th).join(", "),a.u&&(c+=Ph(a.u,b)));a.M&&(b=a.M.map(function(d){return d.I.j()+(0==d.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(d){return d.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Th(a){return Gd(a)!=a.getName()?a.getName()+" AS "+Gd(a):a.getName()}function Sh(a,b){for(var c=sg(a.u,function(k){return k instanceof Cg}),d=c.map(Oh),e=Th(a.from[0]),f=1;f<a.from.length;f++){var g=Th(a.from[f]);e=a.ab.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+g):e+(" INNER JOIN "+g);e+=" ON ("+d[d.length-f]+")"}a=a.u;a=0<M(a).length?Wd(a,0):a;a instanceof Cg||(e+=" WHERE "+Nh(a,b));return e}
function Uh(a,b){b=b||!1;a=a.getQuery();if(a instanceof Ch)return Jh(a,b);if(a instanceof zh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Ph(a.u,b));return c+";"}if(a instanceof Eh)return Qh(a,b);if(a instanceof me)return Rh(a,b);throw new E(358,typeof a);};function T(a,b){this.global=a;this.Cg=a.b(rc);this.Ha=a.b(sc);this.query=b}t("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Xa()}catch(a){return ab(a)}return new w(function(a,b){var c=new xh(this.global,[this.wc()]);we(this.Ha,c).then(function(d){a(wd(d[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Rf=function(){var a=function(b){return b.Lc(this.query)+"\n"}.bind(this);return yg(Vh(this).Za(),a)};T.prototype.explain=T.prototype.Rf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Kg=function(a){return Uh(this,a)};T.prototype.toSql=T.prototype.Kg;T.prototype.Xa=aa();T.prototype.getQuery=function(){return this.query.clone()};function Vh(a){if(null==a.cf){var b=a.Cg;var c=a.query,d=b.ng.create(c);b=b.zg.create(d,c);a.cf=b}return a.cf}T.prototype.wc=function(){return{context:this.getQuery(),de:Vh(this)}};function Wh(a){T.call(this,a,new zh(a.b(uc)))}u(Wh,T);t("lf.query.DeleteBuilder",Wh);Wh.prototype.from=function(a){if(null!=this.query.from)throw new E(515);this.query.from=a;return this};Wh.prototype.from=Wh.prototype.from;Wh.prototype.u=function(a){this.Ad();this.query.u=a;return this};Wh.prototype.where=Wh.prototype.u;Wh.prototype.Ad=function(){if(null==this.query.from)throw new E(548);if(null!=this.query.u)throw new E(516);};
Wh.prototype.Xa=function(){Wh.eb.Xa.call(this);if(null==this.query.from)throw new E(517);};function Xh(a,b){T.call(this,a,new Ch(a.b(uc)));this.query.Yb=b||!1}u(Xh,T);t("lf.query.InsertBuilder",Xh);Xh.prototype.Xa=function(){Xh.eb.Xa.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new E(518);if(a.Yb&&null===a.Ka.Jb.nd)throw new E(519);};Xh.prototype.Ka=function(a){if(null!=this.query.Ka)throw new E(520);this.query.Ka=a;return this};Xh.prototype.into=Xh.prototype.Ka;
Xh.prototype.values=function(a){if(null!=this.query.values)throw new E(521);a instanceof Jd||a.some(function(b){return b instanceof Jd})?this.query.Zb=a:this.query.values=a;return this};Xh.prototype.values=Xh.prototype.values;function Yh(a){return Zh("and",Array.prototype.slice.call(arguments))}t("lf.op.and",Yh);t("lf.op.or",function(a){return Zh("or",Array.prototype.slice.call(arguments))});function Zh(a,b){var c=new zg(a);b.forEach(function(d){Yd(c,d)});return c}t("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new me(a.b(uc)));this.He=this.vd=!1;this.query.f=b;$h(this);ai(this)}u(U,T);t("lf.query.SelectBuilder",U);U.prototype.Xa=function(){U.eb.Xa.call(this);var a=this.query;if(null==a.from)throw new E(522);if(q(a.Rb)&&!q(a.W)||q(a.Gb)&&!q(a.K))throw new E(523);null!=this.query.qa?bi(this):ci(this)};function $h(a){var b=a.query.f.filter(function(c){return c instanceof R&&"DISTINCT"==c.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new E(524);}
function bi(a){if(a.query.qa.some(function(b){b=b.F();return 6==b||0==b}))throw new E(525);}function ci(a){var b=a.query.f.some(function(c){return c instanceof R},a);a=a.query.f.some(function(c){return!(c instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new E(526);}function ai(a){a.query.f.forEach(function(b){if(b instanceof R&&!di(b.Ib,b.F()))throw new E(527,b.j());},a)}function ei(a,b){if(null==a.query.from)throw new E(b);}
U.prototype.from=function(a){if(this.He)throw new E(515);this.He=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){ei(this,548);if(this.vd)throw new E(516);this.vd=!0;fi(this,a);return this};U.prototype.where=U.prototype.u;function fi(a,b){null!=a.query.u?(b=Yh(b,a.query.u),a.query.u=b):a.query.u=b}
U.prototype.cg=function(a,b){ei(this,542);if(this.vd)throw new E(547);this.query.from.push(a);fi(this,b);return this};U.prototype.innerJoin=U.prototype.cg;U.prototype.kg=function(a,b){ei(this,542);if(!(b instanceof Cg))throw new E(541);if(this.vd)throw new E(547);this.query.from.push(a);null==this.query.ab&&(this.query.ab=C());var c=b;Gd(a)!=Gd(b.ma.H())&&(c=b.reverse());this.query.ab.add(c.V());fi(this,c);return this};U.prototype.leftOuterJoin=U.prototype.kg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Rb))throw new E(528);if(a instanceof Jd)this.query.Rb=a;else{if(0>a)throw new E(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Gb))throw new E(529);if(a instanceof Jd)this.query.Gb=a;else{if(0>a)throw new E(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){ei(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){ei(this,549);if(null!=this.query.qa)throw new E(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function di(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Sc=null;return a};U.prototype.clone=U.prototype.clone;function gi(a,b){T.call(this,a,new Eh(a.b(uc)));this.query.table=b}u(gi,T);t("lf.query.UpdateBuilder",gi);gi.prototype.set=function(a,b){a={Pc:b instanceof Jd?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};gi.prototype.set=gi.prototype.set;gi.prototype.u=function(a){this.Ad();this.query.u=a;return this};gi.prototype.where=gi.prototype.u;gi.prototype.Ad=function(){if(null!=this.query.u)throw new E(516);};
gi.prototype.Xa=function(){gi.eb.Xa.call(this);if(null==this.query.set)throw new E(532);if(this.query.set.some(function(a){return a.value instanceof Jd}))throw new E(501);};function hi(a){this.query=a;this.Ga=null}hi.prototype.dc=function(){null===this.Ga&&(this.Ga=this.Xc());return this.Ga};function ii(a){hi.call(this,a)}u(ii,hi);ii.prototype.Xc=function(){return this.query.Yb?new eh(this.query.Ka,this.query.values):new dh(this.query.Ka,this.query.values)};function ji(a){hi.call(this,a)}u(ji,hi);
ji.prototype.Xc=function(){var a=new gh(this.query.table),b=null!=this.query.u?new hh(this.query.u.Kb()):null,c=new ih(this.query.table);null===b?Yd(a,c):(Yd(b,c),Yd(a,b));return a};function ki(a,b,c){this.Ga=a;this.fe=b;this.Ub=c}ki.prototype.dc=function(){this.Ub.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function li(a,b){hi.call(this,a);this.Ub=b}u(li,hi);li.prototype.Xc=function(){var a=new fh(this.query.from),b=null!=this.query.u?new hh(this.query.u.Kb()):null,c=new ih(this.query.from);null===b?Yd(a,c):(Yd(b,c),Yd(a,b));return(new ki(a,this.query,this.Ub)).dc()};function mi(){}u(mi,rh);mi.prototype.cb=function(a,b){if(2>b.from.length)return a;this.G=a;this.sb(this.G,b);return this.G};mi.prototype.sb=function(a,b){if(a instanceof hh&&a.N instanceof Cg){var c=a.N.V(),d=Wd(a,0);d instanceof jh&&(c=null!=b.ab&&b.ab.has(c),c=new qh(a.N,c),xg(a,d,c,c),a==this.G&&(this.G=c),a=c)}M(a).forEach(function(e){this.sb(e,b)},this)};function ni(){this.Oc=C()}u(ni,rh);ni.prototype.cb=function(a,b){if(!q(b.u))return a;this.Oc.clear();this.G=a;this.sb(this.G,b);this.Oc.clear();return this.G};ni.prototype.sb=function(a,b){var c=function(e){M(e).forEach(d)}.bind(this),d=function(e){if(!this.Oc.has(e)){if(e instanceof hh){var f=e.N.o(),g=function(k){return oi(this,k,f)}.bind(this);g=pi(this,b,e,g);this.Oc.add(e);g!=e&&(null===g.getParent()&&(this.G=g),d(g))}c(e)}}.bind(this);d(a)};
function pi(a,b,c,d){var e=c;if(qi(b,c))e=vg(c),pi(a,b,c,d);else if(ri(c)){var f=[];e=wg(c,d,function(g){g=new hh(g.N);f.push(g);return g});f.forEach(function(g){pi(this,b,g,d)},a)}return e}function oi(a,b,c){var d=C();rg(b).forEach(function(e){d.add(e.table)},a);b instanceof ih&&d.add(b.table);return vc(d,c)}function ri(a){a=Wd(a,0);return a instanceof jh||a instanceof qh}
function qi(a,b){var c=Wd(b,0);if(!(c instanceof hh))return!1;if(null==a.ab)return!0;b=b.N instanceof Cg;a=a.ab.has(c.N.V());return b||!a};function si(a,b){hi.call(this,a);this.Ub=b;this.ef=this.Ye=this.nf=this.af=this.ye=this.Ne=this.mf=this.Ee=this.qf=null}u(si,hi);
si.prototype.Xc=function(){ti(this);2<=this.query.from.length&&(this.Ee=new jh);this.mf=null!=this.query.u?new hh(this.query.u.Kb()):null;this.query.M&&(this.af=new lh(this.query.M));if(null!=this.query.K&&0<this.query.K||null!=this.query.Gb)this.nf=new ph(this.query.K);null!=this.query.W&&(this.Ye=new oh(this.query.W));null!=this.query.qa&&(this.Ne=new nh(this.query.qa));ui(this);this.ef=new kh(this.query.f||[],this.query.qa||null);var a=vi(this);return(new ki(a,this.query,this.Ub)).dc()};
function vi(a){for(var b=[a.Ye,a.nf,a.ef,a.af,a.ye,a.Ne,a.mf,a.Ee],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Yd(b[c],f),c=e)}a.qf.forEach(function(g){Yd(b[c],g)});return d}function ti(a){a.qf=a.query.from.map(function(b){return new ih(b)},a)}function ui(a){var b=a.query.f.filter(function(c){return c instanceof R});null!=a.query.M&&a.query.M.forEach(function(c){c.I instanceof R&&b.push(c.I)});0<b.length&&(a.ye=new mh(b))};function wi(){this.le=[new sh,new vh,new ni,new mi];this.Kd=[new sh]}wi.prototype.create=function(a){if(a instanceof Ch)var b=new ii(a);else if(a instanceof zh)b=new li(a,this.Kd);else if(a instanceof me)b=new si(a,this.le);else if(a instanceof Eh)b=new ji(a);else throw new E(513);b=b.dc();return new bh(b,a.ca())};function xi(a){S.call(this,1,1);this.S=a}u(xi,S);xi.prototype.toString=function(){return"delete("+this.S.getName()+")"};xi.prototype.ba=function(a,b){a=a[0].entries.map(function(c){return c.ta});b.remove(this.S,a);return[Ad()]};function yi(a,b){S.call(this,0,-1);this.table=b;this.A=a.b(qc)}u(yi,S);yi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};yi.prototype.ba=function(){var a=this.A.get(Ye(this.table)),b=new H([],[this.table.getName()]),c=Ng();a=a.X().ha;null===b.Wa&&(b.Wa=z());b.Wa.set(c.j(),a);return[b]};function zi(a,b){S.call(this,0,-1);this.U=a.b(pc);this.A=a.b(qc);this.table=b}u(zi,S);zi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};zi.prototype.ba=function(){var a=this.A.get(Ye(this.table)).Ra();return[Dd(qf(this.U,a),[Gd(this.table)])]};function Ai(a){this.c=a}u(Ai,rh);Ai.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;a=sg(a,function(c){return c instanceof zi})[0];b=new yi(this.c,a.table);xg(a,a,b,b);return this.G};Ai.prototype.Cd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Ib&&a.child instanceof Mg):!1};function Bi(a){S.call(this,1,1);this.Me=a}u(Bi,S);Bi.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.j()}).toString()+")"};Bi.prototype.ba=function(a){return Ci(this,a[0])};function Ci(a,b){var c=new Qc,d=function(e){return this.Me.map(function(f){return I(e,f)},this).join(",")}.bind(a);b.entries.forEach(function(e){c.set(d(e),e)},a);return c.keys().map(function(e){return new H(c.get(e),b.o())},a)};function Di(a,b,c){S.call(this,2,0);this.A=a.b(qc);this.U=a.b(pc);this.N=b;this.Qb=c;this.yd="eq"==this.N.D?0:2;this.Pe=null}u(Di,S);var Ei=["hash","index_nested_loop","nested_loop"];Di.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", impl: "+Ei[this.yd]+", "+this.N.toString()+")"};
Di.prototype.ba=function(a){switch(this.yd){case 0:return[Gg(this.N,a[0],a[1],this.Qb)];case 1:return[Hg(this.N,a[0],a[1],this.Pe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Qb,e=[c,a];d||(e=Dg(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.o(),g=a.o(),k=c.entries.length,l=a.entries.length,p=l+256-1>>8,r=0;r<p;){for(var W=0;W<k;W++){var K=!1,y=I(c.entries[W],b.fa);if(null!==y)for(var L=Math.min(r+1<<8,l),V=r<<8;V<L;V++)if(b.rc(y,I(a.entries[V],b.ma))){K=!0;var ma=Id(c.entries[W],f,a.entries[V],
g);e.push(ma)}d&&!K&&e.push(Fg(b,c.entries[W],f))}r++}b=c.o().concat(a.o());return[new H(e,b)]}};function Fi(a,b){a.yd=1;var c=a.A.get(b.Ba().j());a.Pe={Zf:b,rg:b==a.N.fa?a.N.ma:a.N.fa,index:c}};function Gi(a){S.call(this,-1,-1);this.ff=a}u(Gi,S);Gi.prototype.toString=function(){return"no_op_step("+this.ff[0].o().join(",")+")"};Gi.prototype.ba=h("ff");function Hi(){}u(Hi,rh);Hi.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;sg(a,function(c){return c instanceof Di}).forEach(this.Bg,this);return this.G};Hi.prototype.Cd=function(a){return 1<a.from.length};
Hi.prototype.Bg=function(a){if("eq"==a.N.D&&!a.Qb){var b=function(e){if(!(e instanceof zi))return null;e=Gd(e.table)==Gd(a.N.ma.H())?a.N.ma:a.N.fa;return null===e.Ba()?null:e},c=b(Wd(a,0));b=b(Wd(a,1));if(null!==c||null!==b){b=null===b?c:b;Fi(a,b);var d=new H([],[Gd(b.H())]);$d(a,new Gi([d]),b==c?0:1)}}};function Ii(a){a=a.map(function(c){return c.Nb()});a=zb.apply(null,a);var b=[];yb(a,function(c){b.push(c)});return b}function Ji(a){this.Pb=a}Ji.prototype.Yc=function(){return 1==this.Pb.f.length?[qd()]:[this.Pb.f.map(function(){return qd()})]};function Ki(a,b){this.Pb=a;this.Fa=b;this.Gd=this.We=null}
function Li(a,b){var c=z();a.Fa.keys().forEach(function(d){var e=this.Fa.get(d).map(function(g){return ie(b,g)},this),f=new ud([qd()]);e.forEach(function(g){f=vd(f,g.qe())});c.set(d,f)},a);return c}Ki.prototype.Yc=function(a){if(this.We==a)return this.Gd;for(var b=Li(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.$.getName())||null))break;b.set(d.$.getName(),new ud([qd()]))}this.Gd=1==this.Pb.f.length?A(b)[0].Nb():Ii(Mi(this,b));this.We=a;return this.Gd};
function Mi(a,b){var c=z(),d=0;a.Pb.f.forEach(function(e){c.set(e.$.getName(),d);d++});return $b(b).sort(function(e,f){return c.get(e)-c.get(f)}).map(function(e){return b.get(e)})};function Ni(a,b){this.sd=b;this.A=a.b(qc)}function Oi(a){a=a.A.get(Ye(a.sd));return Math.floor(.02*a.X().ha)}function Pi(a,b,c){c=c.filter(a.fg,a);if(0==c.length)return null;a=Qi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(e,f){var g=Ri(f,b);return g<d?(d=g,f):e},null)}
function Qi(a,b){return a.sd.Ca().map(function(c){c=new Si(this.A,c);Ti(c,b);return c},a).filter(function(c){if(null===c.Fa)c=!1;else{for(var d=!1,e=!0,f=0;f<c.$a.f.length;f++){var g=c.Fa.has(c.$a.f[f].$.getName());if(d&&g){e=!1;break}g||(d=!0)}c=e}return c})}Ni.prototype.fg=function(a){return a instanceof de?!a.fd()||a.I.H()!=this.sd||"in"==a.D&&a.value.length>Oi(this)?!1:!0:a instanceof zg?a.fd()&&Wd(a,0).I.H()==this.sd?M(a).length<=Oi(this):!1:!1};
function Si(a,b){this.A=a;this.$a=b;this.$f=C(this.$a.f.map(function(c){return c.$.getName()}));this.Vd=this.Fa=null}function Ui(a){null===a.Vd&&(a.Vd=new Ki(a.$a,a.Fa));return a.Vd}function Ti(a,b){b.forEach(function(c){var d=c.jb()[0].getName();this.$f.has(d)&&(null===this.Fa&&(this.Fa=new Qc),this.Fa.set(d,c.V()))},a)}function Ri(a,b){b=Ui(a).Yc(b);var c=a.A.get(a.$a.j());return b.reduce(function(d,e){return d+c.Vc(e)},0)};function Vi(a,b,c,d){S.call(this,0,-1);this.A=a.b(qc);this.index=b;this.Ve=c;this.je=d;this.Nc=this.Mc=!1}u(Vi,S);Vi.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Mc?", limit:?":"")+(this.Nc?", skip:?":"")+")"};Vi.prototype.Lc=function(a){var b=this.toString(),c=this.Ve.Yc(a);b=b.replace("?",c.toString());this.Mc&&(b=b.replace("?",a.W.toString()));this.Nc&&(b=b.replace("?",a.K.toString()));return b};
Vi.prototype.ba=function(a,b,c){a=this.Ve.Yc(c);b=this.A.get(this.index.j());c=(1==a.length&&a[0]instanceof F&&rd(a[0])?uf(b.get(a[0].from),!1,this.Mc?c.W:void 0,this.Nc?c.K:void 0):b.Ra(a,this.je,this.Mc?c.W:void 0,this.Nc?c.K:void 0)).map(function(d){return new ac(d,{})},this);return[Dd(c,[this.index.jc])]};function Wi(){S.call(this,-1,0)}u(Wi,S);Wi.prototype.toString=m("multi_index_range_scan()");
Wi.prototype.ba=function(a){var b=z();a.forEach(function(d){d.entries.forEach(function(e){b.set(e.ta.id(),e)})});var c=A(b);return[new H(c,a[0].o())]};function Xi(a){S.call(this,1,1);this.gc=a}u(Xi,S);Xi.prototype.toString=m("select(?)");Xi.prototype.Lc=function(a){a=ie(a,this.gc);return this.toString().replace("?",a.toString())};Xi.prototype.ba=function(a,b,c){return[ie(c,this.gc).eval(a[0])]};function Yi(a,b){S.call(this,1,1);this.U=a.b(pc);this.S=b}u(Yi,S);Yi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Yi.prototype.ba=function(a){return[Dd(qf(this.U,xd(a[0])),[Gd(this.S)])]};function Zi(a){this.c=a}u(Zi,rh);Zi.prototype.cb=function(a,b){this.G=a;sg(a,function(c){return c instanceof zi}).forEach(function(c){var d=$i(c);if(0!=d.length){var e=Pi(new Ni(this.c,c.table),b,d.map(function(g){return ie(b,g.gc)}));if(null!==e){var f=z();d.forEach(function(g){f.set(g.gc,g)},this);this.G=aj(this,e,f,c)}}},this);return this.G};function $i(a){var b=[];for(a=a.getParent();a;){if(a instanceof Xi)b.push(a);else if(a instanceof Di)break;a=a.getParent()}return b}
function aj(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(e){return c.get(e)}).forEach(tg);b=new Vi(a.c,b.$a,Ui(b),!1);a=new Yi(a.c,d.table);Yd(a,b);xg(d,d,a,b);return b.Za()};function bj(a,b){S.call(this,0,-1);this.A=a.b(qc);this.S=b}u(bj,S);bj.prototype.toString=function(){return"insert("+this.S.getName()+")"};bj.prototype.ba=function(a,b,c){cj(this.S,c.values,this.A);b.yb(this.S,c.values);return[Dd(c.values,[this.S.getName()])]};function cj(a,b,c){a=a.Jb.nd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].$.getName();c=c.get(a.j()).X().Ac;var e=null===c?0:c;b.forEach(function(f){if(0==f.l[d]||null==f.l[d])e++,f.l[d]=e})}}
function dj(a,b){S.call(this,0,-1);this.A=a.b(qc);this.S=b}u(dj,S);dj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};dj.prototype.ba=function(a,b,c){cj(this.S,c.values,this.A);b.Rd(this.S,c.values);return[Dd(c.values,[this.S.getName()])]};function ej(){S.call(this,1,1)}u(ej,S);ej.prototype.toString=m("limit(?)");ej.prototype.Lc=function(a){return this.toString().replace("?",a.W.toString())};ej.prototype.ba=function(a,b,c){a[0].entries.splice(c.W);return a};function fj(a){S.call(this,-1,1);this.M=a}u(fj,S);n=fj.prototype;n.toString=function(){return"order_by("+ne(this.M)+")"};n.ba=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Og(this.M[d].I);if(null!==b.Wa&&b.Wa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:yd(a[0],b)).entries.sort(this.Of.bind(this))}else a.sort(this.Eg.bind(this));return a};
n.Y=function(a,b){var c=-1;do{c++;var d=this.M[c].I;var e=this.M[c].order;var f=a(d);d=b(d)}while(f==d&&c+1<this.M.length);a=f<d?-1:f>d?1:0;return 1==e?a:-a};n.Eg=function(a,b){return this.Y(function(c){return c instanceof R?yd(a,c):I(a.entries[a.entries.length-1],c)},function(c){return c instanceof R?yd(b,c):I(b.entries[b.entries.length-1],c)})};n.Of=function(a,b){return this.Y(function(c){return I(a,c)},function(c){return I(b,c)})};function gj(a,b){this.Ma=a;this.J=b}function hj(a){return a.J.some(function(b){return b instanceof R},a)?ij(a):jj(a)}function ij(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Ib)return a=yd(a.Ma,a.J[0]).entries.map(function(c){var d=new Ed(new ac(-1,{}),1<this.Ma.L.size);Hd(d,this.J[0],I(c,this.J[0].child));return d},a),new H(a,[]);var b=new Ed(new ac(-1,{}),1<a.Ma.L.size);a.J.forEach(function(c){var d=c instanceof R?yd(this.Ma,c):I(this.Ma.entries[0],c);Hd(b,c,d)},a);return new H([b],a.Ma.o())}
function jj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(d,e){b[e]=new Ed(new ac(d.ta.id(),{}),c);this.J.forEach(function(f){Hd(b[e],f,I(d,f))},this)},a);return new H(b,a.Ma.o())}function kj(a,b){var c=a.map(function(d){return hj(new gj(d,b)).entries[0]});return new H(c,a[0].o())};function lj(a,b){S.call(this,-1,1);this.f=a;this.Ob=b}u(lj,S);lj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob){var b=this.Ob.map(function(c){return c.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};lj.prototype.ba=function(a){0==a.length?a=[Ad()]:1==a.length?(a=a[0],a=[0==this.f.length?a:hj(new gj(a,this.f))]):a=[kj(a,this.f)];return a};function mj(a){return a.f.some(function(b){return b instanceof R})||null!==a.Ob};function nj(){S.call(this,1,1)}u(nj,S);nj.prototype.toString=m("skip(?)");nj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};nj.prototype.ba=function(a,b,c){return[new H(a[0].entries.slice(c.K),a[0].o())]};function oj(){}u(oj,rh);oj.prototype.cb=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=pj(a);if(null===c)return a;sg(a,function(d){return d instanceof ej||d instanceof nj}).forEach(function(d){d instanceof ej?c.Mc=!0:c.Nc=!0;tg(d)},this);return c.Za()};function pj(a){a=sg(a,function(b){return b instanceof Vi},function(b){return b instanceof lj&&mj(b)||b instanceof fj||1!=M(b).length||b instanceof Xi});return 0<a.length?a[0]:null};function qj(a){this.c=a}u(qj,rh);qj.prototype.cb=function(a,b){this.G=a;var c=rj(this,b);if(0==c.length)return this.G;var d=0;do{var e=c[d++];a=sj(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.G;b=tj(this,a[0].$a.jc);return null===b?this.G:this.G=uj(this,e,b,a)};function rj(a,b){return sg(a.G,function(c){if(!(c instanceof Xi))return!1;c=ie(b,c.gc);return c instanceof zg&&"or"==c.nb})}
function tj(a,b){return sg(a.G,function(c){return c instanceof zi&&c.table.getName()==b})[0]||null}function sj(a,b,c){b=ie(c,b.gc);var d=b.o();if(1!=d.size)return null;d=D(d)[0];var e=new Ni(a.c,d),f=null;return M(b).every(function(g){g=Pi(e,c,[g]);null===g||(null===f?f=[g]:f.push(g));return null!==g})?f:null}function uj(a,b,c,d){var e=new Yi(a.c,c.table),f=new Wi;Yd(e,f);d.forEach(function(g){g=new Vi(this.c,g.$a,Ui(g),!1);Yd(f,g)},a);tg(b);xg(c,c,e,f);return f.Za()};function vj(a){this.c=a}u(vj,rh);vj.prototype.cb=function(a,b){b=wj(a,b);if(null===b)return a;a:{var c=b;a=xj(Wd(b,0));if(null!==a){var d=b.M;for(var e=null,f=a.table.Ca(),g=0;g<f.length&&null===e;g++)e=yj(f[g],d);d=e;if(null===d){a=c;break a}c=new Vi(this.c,d.$a,new Ji(d.$a),d.Se);d=new Yi(this.c,a.table);Yd(d,c);tg(b);c=xg(a,a,d,c)}a=c}a==b&&(a=b,c=zj(Wd(b,0)),null!==c&&(d=yj(c.index,b.M),null!==d&&(c.je=d.Se,a=tg(b).parent)));return a.Za()};
function zj(a){a=sg(a,function(b){return b instanceof Vi},function(b){return 1!=M(b).length});return 0<a.length?a[0]:null}function xj(a){a=sg(a,function(b){return b instanceof zi},function(b){return 1!=M(b).length});return 0<a.length?a[0]:null}function wj(a,b){return q(b.M)?sg(a,function(c){return c instanceof fj})[0]:null}function yj(a,b){if(a.f.length!=b.length||!b.every(function(c,d){return c.I.getName()==a.f[d].$.getName()}))return null;b=Aj(b,a);return b[0]||b[1]?{$a:a,Se:b[1]}:null}
function Aj(a,b){var c=a.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0),d=b.f.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Bj(a,b,c){this.Ga=a;this.fe=b;this.Ub=c}Bj.prototype.dc=function(){this.Ub.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function Cj(a){S.call(this,1,1);this.S=a}u(Cj,S);Cj.prototype.toString=function(){return"update("+this.S.getName()+")"};Cj.prototype.ba=function(a,b,c){a=a[0].entries.map(function(d){var e=this.S.ib(d.ta.Ia());c.set.forEach(function(f){e.l[f.I.getName()]=f.value},this);return e},this);b.update(this.S,a);return[Ad()]};function Dj(a){this.c=a;this.le=[new Hi,new Zi(this.c),new qj(this.c),new vj(this.c),new oj,new Ai(this.c)];this.Kd=[new Zi(this.c)]}Dj.prototype.create=function(a,b){var c=a.Za();if(c instanceof eh||c instanceof dh)return Ej(this,a,b);if(c instanceof kh||c instanceof oh||c instanceof ph)return Ej(this,a,b,this.le);if(c instanceof fh||c instanceof gh)return Ej(this,a,b,this.Kd);throw new E(8);};
function Ej(a,b,c,d){a=qg(b.Za(),a.qg.bind(a));null!=d&&(a=(new Bj(a,c,d)).dc());return new oe(a,b.ca())}
Dj.prototype.qg=function(a){if(a instanceof kh)return new lj(a.f,a.Ob);if(a instanceof nh)return new Bi(a.f);if(a instanceof mh)return new Sg(a.f);if(a instanceof lh)return new fj(a.M);if(a instanceof ph)return new nj;if(a instanceof oh)return new ej;if(a instanceof hh)return new Xi(a.N.V());if(a instanceof jh)return new wh;if(a instanceof qh)return new Di(this.c,a.N,a.Qb);if(a instanceof ih)return new zi(this.c,a.table);if(a instanceof fh)return new xi(a.table);if(a instanceof gh)return new Cj(a.table);
if(a instanceof eh)return new dj(this.c,a.table);if(a instanceof dh)return new bj(this.c,a.table);throw new E(514);};function Fj(a){this.ng=new wi;this.zg=new Dj(a)};function Gj(){this.Ze=z()}function Hj(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new Ij,a.Ze.set(b.getName(),c));return c}function Jj(a,b,c,d){c.forEach(function(e){e=Hj(this,e);0==d?(e.bb=null,e.sc=b):3==d?(null===e.Wb&&(e.Wb=C()),e.Wb.add(b),null===e.Ua&&(e.Ua=C()),e.Ua.delete(b)):1==d?(null===e.Ua&&(e.Ua=C()),e.Ua.add(b)):2==d&&(e.bb=b)},a)}
function Kj(a,b,c,d){var e=!0;c.forEach(function(f){if(e){f=Hj(this,f);var g=null===f.Ua||0==f.Ua.size;e=0==d?(null===f.Wb||0==f.Wb.size)&&g&&null===f.sc&&null!==f.bb&&f.bb==b:3==d?null===f.sc&&null===f.bb&&null!==f.Ua&&f.Ua.has(b):1==d?null===f.bb:g&&(null===f.bb||f.bb==b)}},a);return e}function Lj(a,b,c,d){var e=Kj(a,b,c,d);e&&Jj(a,b,c,d);return e}Gj.prototype.releaseLock=function(a,b){b.forEach(function(c){Hj(this,c).releaseLock(a)},this)};
function Mj(a,b){b.forEach(function(c){Hj(this,c).bb=null},a)}function Ij(){this.Wb=this.Ua=this.bb=this.sc=null}Ij.prototype.releaseLock=function(a){this.sc==a&&(this.sc=null);this.bb==a&&(this.bb=null);null===this.Ua||this.Ua.delete(a);null===this.Wb||this.Wb.delete(a)};function Nj(){this.Tb=new Oj;this.zc=new Gj}function we(a,b){(2>b.getPriority()||2>b.getPriority())&&Mj(a.zc,b.ca());a.Tb.yb(b);Pj(a);return b.Bb.ga}function Pj(a){for(var b=a.Tb.Nb(),c=0;c<b.length;c++){var d=b[c];if(0==d.F()?Qj(a,d,1,3):Qj(a,d,2,0)){a.Tb.remove(d);var e=a;d.exec().then(e.wg.bind(e,d),e.vg.bind(e,d))}}}function Qj(a,b,c,d){var e=!1;Lj(a.zc,b.V(),b.ca(),c)&&(e=Lj(a.zc,b.V(),b.ca(),d));return e}Nj.prototype.wg=function(a,b){this.zc.releaseLock(a.V(),a.ca());a.Bb.resolve(b);Pj(this)};
Nj.prototype.vg=function(a,b){this.zc.releaseLock(a.V(),a.ca());a.Bb.reject(b);Pj(this)};function Oj(){this.Tb=[]}Oj.prototype.yb=function(a){tf(this.Tb,a,function(b,c){var d=b.getPriority()-c.getPriority();return 0==d?b.V()-c.V():d})};Oj.prototype.Nb=function(){return this.Tb.slice()};Oj.prototype.remove=function(a){var b=this.Tb;a=ta(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Rj(){this.Ic=z()}var Sj;function Tj(){Sj||(Sj=new Rj);return Sj}Rj.prototype.clear=function(){this.Ic.clear()};Rj.prototype.clear=Rj.prototype.clear;Rj.prototype.pb=function(a,b){this.Ic.set(a.toString(),b);return b};Rj.prototype.registerService=Rj.prototype.pb;Rj.prototype.b=function(a){var b=this.Ic.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Rj.prototype.getService=Rj.prototype.b;Rj.prototype.gd=function(a){return this.Ic.has(a.toString())};
Rj.prototype.isRegistered=Rj.prototype.gd;function Uj(){var a=Tj();return $b(a.Ic)};function Vj(a,b,c,d){return null!=a?null!=b?Wj(a,b,c,d):Xj(a):Yj()}function Zj(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function ak(a){var b=Tj();a=new nc("ns_"+a);return b.gd(a)?b.b(a):null}function Yj(){var a={};Uj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=ak(b).b(uc).version())});return Zj(a)}function Xj(a){a=ak(a);var b={};if(null!=a){var c=a.b(qc);a.b(uc).oa().forEach(function(d){b[d.getName()]=c.get(Ye(d)).X().ha})}return Zj(b)}
function Wj(a,b,c,d){var e=ak(a);a=[];if(null!=e){var f=null;try{f=e.b(uc).table(b)}catch(g){}null!=f&&(b=e.b(qc),e=e.b(pc),c=b.get(Ye(f)).Ra(void 0,!1,c,d),c.length&&(a=qf(e,c).map(function(g){return g.l})))}return Zj(a)};function bk(a,b){this.Ld=Sd();this.ge=a;this.jd=b;this.J=ck(this)}function ck(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(c){c.jb().forEach(function(d){b.push(d)})});return b}bk.prototype.Y=function(a,b){return this.J.every(function(c){return 6==c.F()||0==c.F()?I(a,c)===I(b,c):Td(this.Ld,c.F(),"eq")(I(a,c),I(b,c))},this)};
function dk(a,b,c){var d=null===b?[]:b.entries,e=qb(d,c.entries,a.Y.bind(a),function(l){return d[l]});b=[];for(var f=0,g=0;g<d.length;g++){var k=d[g];e[f]==k?f++:(k=a.jd.splice(f,1),k=ek(g,k,0,a.jd),b.push(k))}e=qb(d,c.entries,a.Y.bind(a),function(l,p){return c.entries[p]});for(g=f=0;g<c.entries.length;g++)k=c.entries[g],e[f]==k?f++:(a.jd.splice(g,0,k.ta.l),k=ek(g,[],1,a.jd),b.push(k));return b}function ek(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function fk(){this.cc=z()}fk.prototype.xd=function(a,b){var c=ka(a.query).toString(),d=this.cc.get(c)||null;null===d&&(d=new gk(a),this.cc.set(c,d));d.xd(b)};fk.prototype.he=function(a,b){a=ka(a.query).toString();var c=this.cc.get(a)||null;c.he(b);0<c.Cc.size||this.cc.delete(a)};function ve(a,b){var c=C();b.forEach(function(e){c.add(e.getName())});var d=[];a.cc.forEach(function(e){e=e.wc();e.context.from.some(function(f){return c.has(f.getName())})&&d.push(e)});return d}
function te(a,b,c){b=ka(null!=b.Sc?b.Sc:b).toString();a=a.cc.get(b)||null;null!==a&&hk(a,c)}function gk(a){this.Cf=a;this.Cc=C();this.tg=[];this.Xe=null;this.Mf=new bk(a.query,this.tg)}gk.prototype.xd=function(a){this.Cc.has(a)||this.Cc.add(a)};gk.prototype.he=function(a){this.Cc.delete(a)};gk.prototype.wc=function(){var a=this.Cf;return{context:a.query,de:Vh(a)}};function hk(a,b){var c=dk(a.Mf,a.Xe,b);a.Xe=b;0<c.length&&a.Cc.forEach(function(d){d(c)})};function ik(a,b){var c=a.b(uc),d=b||{};b=new pf(c);a.pb(pc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(q(Zb)||(Zb=new Yb),b=Zb,b=b.ag?0:b.Pg?4:1);switch(b){case 0:b=new Ue(a,c);break;case 1:b=new af(c);break;case 5:b=new cf(c);break;case 4:b=new mf(a,c,d.webSqlDbSize);break;case 3:b=new Ie(c,d.firebase);e=!0;break;default:throw new E(300);}a.pb(oc,b);var f=new pg;a.pb(qc,f);return b.Da(d.onUpgrade).then(function(){var g=new Fj(a);a.pb(rc,g);g=new Nj;a.pb(sc,g);g=new fk;a.pb(tc,g);return f.Da(c)}).then(function(){if(e){var g=
new xe(a);g.Ya.subscribe(g.Zd.bind(g))}d.enableInspector&&(window.top["#lfInspect"]=Vj);return(new ig(a)).Da(c)})};function jk(a){this.c=a;this.g=a.b(uc);this.Z=C(this.g.oa());this.Bb=eb()}function kk(a){var b=a.c.b(qc),c=a.c.b(pc),d={};a.g.oa().forEach(function(e){var f=b.get(Ye(e)).Ra();f=qf(c,f).map(function(g){return g.l});d[e.getName()]=f});return{name:a.g.name(),version:a.g.version(),tables:d}}n=jk.prototype;n.exec=function(){var a=kk(this);a=new Ed(new ac(-1,a),!0);return x([new H([a],[])])};n.F=m(0);n.ca=h("Z");n.V=function(){return ka(this)};n.getPriority=m(0);function lk(a,b){this.c=a;this.g=a.b(uc);this.Z=C(this.g.oa());this.Bb=eb();this.Aa=b;this.Ya=a.b(oc);this.U=a.b(pc);this.A=a.b(qc)}n=lk.prototype;n.exec=function(){if(!this.Ya.Kc())throw new E(300);a:{var a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.A.get(Ye(a[b])).X().ha){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new E(111);if(null==this.Aa.tables)throw new E(112);return mk(this)};n.F=m(1);n.ca=h("Z");n.V=function(){return ka(this)};
n.getPriority=m(0);function mk(a){var b=new hd(a.c,a.Z);b=a.Ya.Cb(a.F(),D(a.Z),b);for(var c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(k){return d.vb(k)}),f=b.H(c,d.ib,0);a.U.Vb(c,e);var g=a.A.ic.get(c)||[];e.forEach(function(k){g.forEach(function(l){var p=k.lb(l.getName());l.add(p,k.id())})});f.put(e)}return b.ja()};function nk(a,b){this.c=a;this.Ya=a.b(oc);this.Ha=a.b(sc);this.Eb=a.b(tc);this.Z=C(b);this.Oa=new hd(this.c,this.Z);this.Bb=eb();this.tc=eb();this.ue=eb()}n=nk.prototype;n.exec=function(){this.ue.resolve();return this.tc.ga};n.F=m(1);n.ca=h("Z");n.V=function(){return ka(this)};n.getPriority=m(2);function ok(a){we(a.Ha,a);return a.ue.ga}
function pk(a,b){b=b.wc();return b.de.Za().exec(a.Oa,b.context).then(function(c){return wd(c[0])},function(c){this.Oa.Fb();var d=new kb(c.name);this.tc.reject(d);throw c;}.bind(a))}n.ja=function(){this.ia=this.Ya.Cb(this.F(),D(this.Z),this.Oa);this.ia.ja().then(function(){this.Hc();this.tc.resolve()}.bind(this),function(a){this.Oa.Fb();this.tc.reject(a)}.bind(this));return this.Bb.ga};n.Fb=function(){this.Oa.Fb();this.tc.resolve();return this.Bb.ga};
n.Hc=function(){var a=ve(this.Eb,this.Z);0!=a.length&&(a=new se(this.c,a),we(this.Ha,a))};n.X=function(){var a=null;null!=this.ia&&(a=this.ia.X());return null===a?new B(!1,0,0,0,0):a};function qk(a){this.c=a;this.Ha=a.b(sc);this.Hb=null;this.Qa=0;0==rk.size&&(rk.set(0,C([1,4])),rk.set(1,C([2])),rk.set(2,C([3,5,6])),rk.set(3,C([2,7])),rk.set(4,C([7])),rk.set(5,C([7])),rk.set(6,C([7])))}t("lf.proc.Transaction",qk);var rk=z();function sk(a,b){var c=rk.get(a.Qa)||null;if(null===c||!c.has(b))throw new E(107,a.Qa,b);a.Qa=b}
qk.prototype.exec=function(a){sk(this,4);var b=[];try{a.forEach(function(c){c.Xa();b.push(c.wc())},this)}catch(c){return sk(this,7),ab(c)}this.Hb=new xh(this.c,b);return we(this.Ha,this.Hb).then(function(c){sk(this,7);return c.map(function(d){return wd(d)})}.bind(this),function(c){sk(this,7);throw c;}.bind(this))};qk.prototype.exec=qk.prototype.exec;qk.prototype.Af=function(a){sk(this,1);this.Hb=new nk(this.c,a);return ok(this.Hb).then(function(){sk(this,2)}.bind(this))};qk.prototype.begin=qk.prototype.Af;
qk.prototype.zf=function(a){sk(this,3);try{a.Xa()}catch(b){return sk(this,7),ab(b)}return pk(this.Hb,a).then(function(b){sk(this,2);return b}.bind(this),function(b){sk(this,7);throw b;}.bind(this))};qk.prototype.attach=qk.prototype.zf;qk.prototype.ja=function(){sk(this,5);return this.Hb.ja().then(function(){sk(this,7)}.bind(this))};qk.prototype.commit=qk.prototype.ja;qk.prototype.Fb=function(){sk(this,6);return this.Hb.Fb().then(function(){sk(this,7)}.bind(this))};qk.prototype.rollback=qk.prototype.Fb;
qk.prototype.X=function(){if(7!=this.Qa)throw new E(105);return this.Hb.X()};qk.prototype.stats=qk.prototype.X;function X(a){this.c=a;this.g=a.b(uc);this.dd=!1}t("lf.proc.Database",X);X.prototype.Da=function(a){this.c.pb(uc,this.g);return ik(this.c,a).then(function(){this.dd=!0;this.Ha=this.c.b(sc);return this}.bind(this))};X.prototype.init=X.prototype.Da;X.prototype.xb=h("g");X.prototype.getSchema=X.prototype.xb;function tk(a){if(!a.dd)throw new E(2);}X.prototype.select=function(a){tk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.yb=function(){tk(this);return new Xh(this.c)};X.prototype.insert=X.prototype.yb;X.prototype.Rd=function(){tk(this);return new Xh(this.c,!0)};X.prototype.insertOrReplace=X.prototype.Rd;X.prototype.update=function(a){tk(this);return new gi(this.c,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){tk(this);return new Wh(this.c)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){tk(this);this.c.b(tc).xd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){tk(this);this.c.b(tc).he(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.If=function(){tk(this);return new qk(this.c)};X.prototype.createTransaction=X.prototype.If;X.prototype.close=function(){try{this.c.b(oc).close()}catch(a){}this.c.clear();this.dd=!1};X.prototype.close=X.prototype.close;
X.prototype.Sf=function(){tk(this);var a=new jk(this.c);return we(this.Ha,a).then(function(b){return wd(b[0])[0]})};X.prototype["export"]=X.prototype.Sf;X.prototype.import=function(a){tk(this);a=new lk(this.c,a);return we(this.Ha,a).then(m(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.sf=e;this.Ja=f||null}t("lf.schema.BaseColumn",Y);n=Y.prototype;n.getName=h("w");n.j=function(){return Gd(this.S)+"."+this.w};n.toString=function(){return this.j()};n.H=h("S");n.F=h("sf");Y.prototype.getType=Y.prototype.F;Y.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.H().Ca().forEach(function(a){-1!=a.f.map(function(b){return b.$.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
Y.prototype.Ba=function(){if(!q(this.ea)){var a=this.Ca().filter(function(b){return 1!=b.f.length?!1:b.f[0].$.getName()==this.getName()},this);this.ea=0<a.length?a[0]:null}return this.ea};Y.prototype.ec=h("Re");Y.prototype.isNullable=Y.prototype.ec;Y.prototype.yc=h("Te");Y.prototype.Na=function(a){return Ig(this,a,"eq")};Y.prototype.eq=Y.prototype.Na;Y.prototype.$e=function(a){return Ig(this,a,"neq")};Y.prototype.neq=Y.prototype.$e;Y.prototype.og=function(a){return Ig(this,a,"lt")};
Y.prototype.lt=Y.prototype.og;Y.prototype.pg=function(a){return Ig(this,a,"lte")};Y.prototype.lte=Y.prototype.pg;Y.prototype.Wf=function(a){return Ig(this,a,"gt")};Y.prototype.gt=Y.prototype.Wf;Y.prototype.Xf=function(a){return Ig(this,a,"gte")};Y.prototype.gte=Y.prototype.Xf;Y.prototype.match=function(a){return Ig(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Bf=function(a,b){return Ig(this,[a,b],"between")};Y.prototype.between=Y.prototype.Bf;
Y.prototype.Yf=function(a){return Ig(this,a,"in")};Y.prototype["in"]=Y.prototype.Yf;Y.prototype.ig=function(){return this.Na(null)};Y.prototype.isNull=Y.prototype.ig;Y.prototype.hg=function(){return this.$e(null)};Y.prototype.isNotNull=Y.prototype.hg;Y.prototype.as=function(a){return new Y(this.S,this.w,this.Te,this.Re,this.sf,a)};Y.prototype.as=Y.prototype.as;function uk(a){this.g=a;this.Dd=new Qc;this.ie=new Qc;this.bf=new Qc;this.De=z();this.h=new Qc;this.ze=new Qc;this.gf=new Qc;this.Ce=new Qc;vk(this)}function vk(a){a.g.oa().forEach(function(b){var c=b.getName();b.Jb.Pd.forEach(function(d){this.bf.set(c,this.g.table(d.Ta));this.h.set(d.Ta,b);0==d.action?(this.ie.set(d.Ta,d),this.gf.set(d.Ta,b)):(this.Dd.set(d.Ta,d),this.ze.set(d.Ta,b));this.De.set(b.getName()+"."+d.tb,d.Ta);this.Ce.set(d.Ta+"."+d.Ec,b.getName())},this)},a)}
function Yc(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Dh(a,b){a=b.get(a);return null===a?[]:a}function Fh(a,b){var c=C();b.forEach(function(d){(d=this.De.get(d))&&c.add(d)},a);return D(c).map(function(d){return this.g.table(d)},a)}function Bh(a,b,c){return null!=c?0==c?Dh(b,a.gf):Dh(b,a.ze):Dh(b,a.h)}
function Gh(a,b){var c=C();b.forEach(function(d){(d=this.Ce.get(d))&&d.forEach(function(e){c.add(e)})},a);return D(c).map(function(d){return this.g.table(d)},a)};function wk(a,b,c){this.nd=a;this.sg=b;this.Pd=c}t("lf.schema.Constraint",wk);wk.prototype.Vf=h("nd");wk.prototype.getPrimaryKey=wk.prototype.Vf;wk.prototype.Uf=h("Pd");wk.prototype.getForeignKeys=wk.prototype.Uf;function xk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Be=b;this.tb=a.local;this.Ta=d[0];this.Ec=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){yk(a);this.Ld=Sd();this.w=a;this.J=z();this.ud=C();this.lc=C();this.hd=C();this.Ea=null;this.sa=z();this.md=!1;this.wb=[]}t("lf.schema.TableBuilder",Z);function zk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Ak=C([0,6]);function yk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Bk(a,b){if(b==a.w)throw new E(546,b);if(a.J.has(b)||a.sa.has(b)||a.lc.has(b))throw new E(503,a.w+"."+b);}
function Ck(a,b){var c=!1;b.forEach(function(d){var e=this.J.get(d.name);c=c||d.autoIncrement;if(d.autoIncrement&&3!=e)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Dk(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(d){return d.name}),c=0;if(a.wb.some(function(d,e){c=e;return-1!=b.indexOf(d.tb)},a))throw new E(543,a.wb[c].name);}}
function Ek(a){if(null!==a.Ea){var b=function(d){return d.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(d,e){if(e!=this.Ea&&(d=d.map(b),JSON.stringify(d)==c))throw new E(544,this.w+"."+e);},a)}}function Fk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(b){if(this.hd.has(b.name))throw new E(545,this.w+"."+b.name);},a)}Z.prototype.uf=function(a,b){yk(a);Bk(this,a);this.J.set(a,b);Ak.has(b)&&this.we([a]);return this};Z.prototype.addColumn=Z.prototype.uf;
Z.prototype.wf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));yk(this.Ea);Bk(this,this.Ea);a=Gk(this,a,!0,void 0,b);Ck(this,a);1==a.length&&this.ud.add(a[0].name);this.lc.add(this.Ea);this.sa.set(this.Ea,a);return this};Z.prototype.addPrimaryKey=Z.prototype.wf;
Z.prototype.vf=function(a,b){yk(a);Bk(this,a);b=new xk(b,this.w,a);q(b.action)||(b.action=0);q(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new E(506);if(!this.J.has(b.tb))throw new E(540,a);this.wb.push(b);this.ve(a,[b.tb],this.ud.has(b.tb));return this};Z.prototype.addForeignKey=Z.prototype.vf;Z.prototype.xf=function(a,b){yk(a);Bk(this,a);b=Gk(this,b,!0);1==b.length&&(this.ud.add(b[0].name),Hk(this,b[0].name));this.sa.set(a,b);this.lc.add(a);return this};Z.prototype.addUnique=Z.prototype.xf;
function Hk(a,b){a.wb.forEach(function(c){c.tb==b&&this.lc.add(c.name.split(".")[1])},a)}Z.prototype.we=function(a){Gk(this,a,!1).forEach(function(b){this.hd.add(b.name)},this);return this};Z.prototype.addNullable=Z.prototype.we;Z.prototype.ve=function(a,b,c,d){yk(a);Bk(this,a);b=Gk(this,b,!0,d);c&&this.lc.add(a);this.sa.set(a,b);return this};Z.prototype.addIndex=Z.prototype.ve;Z.prototype.Ab=ba("md");Z.prototype.persistentIndex=Z.prototype.Ab;
Z.prototype.xb=function(){Dk(this);Ek(this);Fk(this);return new (Ik(this))};Z.prototype.getSchema=Z.prototype.xb;function Gk(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(g){return new zk({name:g,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(g){return new zk(g)});f.forEach(function(g){if(!this.J.has(g.name))throw new E(508,this.w,g.name);if(c){var k=this.J.get(g.name);if(0==k||6==k)throw new E(509,this.w,g.name);}},a);return f}
function Ik(a){function b(){function c(k){return a.sa.get(k).map(function(l){return{$:this[l.name],order:l.order,autoIncrement:l.autoIncrement}},this)}var d=$b(a.J).map(function(k){this[k]=new Y(this,k,a.ud.has(k),a.hd.has(k),a.J.get(k));return this[k]},this),e=$b(a.sa).map(function(k){return new Kg(a.w,k,a.lc.has(k),c.call(this,k))},this);Q.call(this,a.w,d,e,a.md);var f=null===a.Ea?null:new Kg(a.w,a.Ea,!0,c.call(this,a.Ea)),g=d.filter(function(k){return!a.hd.has(k.getName())});this.Jb=new wk(f,g,
a.wb);this.kf=Jk(a,d,e)}u(b,Q);b.prototype.vb=function(c){return new this.kf(bc++,c)};b.prototype.createRow=b.prototype.vb;b.prototype.ib=function(c){var d={};this.jb().forEach(function(e){var f=e.getName();e=e.F();var g=c.value[f];if(0==e)if(e=g,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);g=new ArrayBuffer(e.length/2);for(var k=new Uint8Array(g),l=0,p=0;l<e.length;l+=2)k[p++]=parseInt(e.substr(l,2),16);e=g}else e=null;else e=2==e?null!=g?new Date(g):null:g;d[f]=e},this);return new this.kf(c.id,d)};
b.prototype.deserializeRow=b.prototype.ib;b.prototype.Ie=h("Jb");b.prototype.getConstraint=b.prototype.Ie;return b}
function Jk(a,b,c){function d(k,l){this.J=b;this.sa=c;ac.call(this,k,l)}u(d,ac);d.prototype.Fe=function(){var k={};this.J.forEach(function(l){k[l.getName()]=l.ec()?null:Pc[l.F()]});return k};d.prototype.rf=function(){var k={};this.J.forEach(function(l){var p=l.getName();l=l.F();var r=this.l[p];k[p]=0==l?null!=r?ec(r):null:2==l?null!=r?r.getTime():null:6==l?null!=r?r:null:r},this);return k};var e=function(k){var l=this.J.get(k.getName()),p=this.Ld.Ue.get(l)||null;return function(r){return p(r[k.getName()])}}.bind(a),
f=function(k){var l=k.map(function(p){return e(p.$)});return function(p){return l.map(function(r){return r(p)})}}.bind(a),g={};c.forEach(function(k){var l=k.j();k=1==k.f.length?e(k.f[0].$):f(k.f);g[l]=k});d.prototype.lb=function(k){return-1!=k.indexOf("#")?this.id():g.hasOwnProperty(k)?g[k](this.l):null};return d};function Kk(a,b){this.g=new Lk(a,b);this.rb=z();this.uc=!1;this.i=null;this.Uc=!1}t("lf.schema.Builder",Kk);function Mk(a,b){b.wb.forEach(function(c){var d=c.Ta;if(!this.rb.has(d))throw new E(536,c.name);d=this.rb.get(d).xb();var e=c.Ec;if(!d.hasOwnProperty(e))throw new E(537,c.name);if(b.xb()[c.tb].F()!=d[e].F())throw new E(538,c.name);if(!d[e].yc())throw new E(539,c.name);},a)}
Kk.prototype.Ff=function(a){a.wb.forEach(function(b){this.rb.get(b.Ta).wb.forEach(function(c){if(c.tb==b.Ec)throw new E(534,b.name);},this)},this)};function Nk(a){a.uc||(a.rb.forEach(function(b){Mk(this,b);b=b.xb();this.g.L.set(b.getName(),b)},a),A(a.rb).forEach(a.Ff,a),Ok(a),a.rb.clear(),a.uc=!0)}function Pk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(d){d=c.get(d);if(!d.se)Pk(this,d,c);else if(d.$d&&b!=d)throw new E(533);},a));b.$d=!1}
function Ok(a){var b=z();a.g.L.forEach(function(c,d){b.set(d,new Qk(d))},a);a.rb.forEach(function(c,d){c.wb.forEach(function(e){b.get(e.Ta).Ge.add(d)})});A(b).forEach(function(c){Pk(this,c,b)},a)}function Qk(a){this.$d=this.se=!1;this.Ge=C();this.jc=a}Kk.prototype.xb=function(){this.uc||Nk(this);return this.g};Kk.prototype.getSchema=Kk.prototype.xb;Kk.prototype.Le=function(){var a=new nc("ns_"+this.g.name()),b=Tj();if(b.gd(a))var c=b.b(a);else c=new Rj,b.pb(a,c);return c};Kk.prototype.getGlobal=Kk.prototype.Le;
Kk.prototype.connect=function(a){if(this.Uc||null!==this.i&&this.i.dd)throw new E(113);this.Uc=!0;if(null===this.i){var b=this.Le();b.gd(uc)||b.pb(uc,this.xb());this.i=new X(b)}return this.i.Da(a).then(function(c){this.Uc=!1;return c}.bind(this),function(c){this.Uc=!1;this.i.close();throw c;}.bind(this))};Kk.prototype.connect=Kk.prototype.connect;Kk.prototype.Hf=function(a){if(this.rb.has(a))throw new E(503,a);if(this.uc)throw new E(535);this.rb.set(a,new Z(a));return this.rb.get(a)};
Kk.prototype.createTable=Kk.prototype.Hf;Kk.prototype.me=function(a){if(this.uc)throw new E(535);this.g.me(a);return this};Kk.prototype.setPragma=Kk.prototype.me;function Lk(a,b){this.w=a;this.Xb=b;this.L=z();this.ee={Nf:!1}}t("lf.schema.DatabaseSchema",Lk);Lk.prototype.name=h("w");Lk.prototype.name=Lk.prototype.name;Lk.prototype.version=h("Xb");Lk.prototype.version=Lk.prototype.version;Lk.prototype.oa=function(){return A(this.L)};Lk.prototype.tables=Lk.prototype.oa;
Lk.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Lk.prototype.table=Lk.prototype.table;Lk.prototype.info=function(){this.Qe||(this.Qe=new uk(this));return this.Qe};Lk.prototype.Ag=h("ee");Lk.prototype.pragma=Lk.prototype.Ag;Lk.prototype.me=ba("ee");t("lf.schema.create",function(a,b){return new Kk(a,b)});w.prototype.catch=w.prototype.pe;w.prototype["catch"]=w.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
