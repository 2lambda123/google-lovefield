if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function k(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(a){return"string"==typeof a}function fa(){}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return null!=a}function ja(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ka(a){return"function"==ha(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Rg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ta(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ta);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ta,Error);ta.prototype.name="CustomError";var ua=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function va(a,b){return-1!=a.indexOf(b)}
function wa(a,b){var c=0;a=ua(String(a)).split(".");b=ua(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",h=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;c=xa(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||xa(0==f[2].length,0==h[2].length)||xa(f[2],h[2]);f=f[3];h=h[3]}while(0==c)}return c}function xa(a,b){return a<b?-1:a>b?1:0};var ya=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ea(a))return ea(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ea(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=Array.prototype.reduce?function(a,b,c,d){d&&(b=qa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Da(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ha(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ga(a,b,c){this.ng=c;this.Kf=a;this.Gg=b;this.ld=0;this.bd=null}Ga.prototype.get=function(){if(0<this.ld){this.ld--;var a=this.bd;this.bd=a.next;a.next=null}else a=this.Kf();return a};Ga.prototype.put=function(a){this.Gg(a);this.ld<this.ng&&(this.ld++,a.next=this.bd,this.bd=a)};var Ha;a:{var Ia=da.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function t(a){return va(Ha,a)};function Ka(){return t("Safari")&&!(Ma()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ma(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Na(a){da.setTimeout(function(){throw a;},0)}var Oa;
function Pa(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Qa(){this.wd=this.mc=null}var Sa=new Ga(function(){return new Ra},function(a){a.reset()},100);Qa.prototype.add=function(a,b){var c=Sa.get();c.set(a,b);this.wd?this.wd.next=c:this.mc=c;this.wd=c};Qa.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.wd=null),a.next=null);return a};function Ra(){this.next=this.scope=this.Od=null}Ra.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Ra.prototype.reset=function(){this.next=this.scope=this.Od=null};function Ta(a,b){Ua||Va();Wa||(Ua(),Wa=!0);Xa.add(a,b)}var Ua;function Va(){if(-1!=String(da.Promise).indexOf("[native code]")){var a=da.Promise.resolve(void 0);Ua=function(){a.then(Ya)}}else Ua=function(){var a=Ya;!ka(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(Oa||(Oa=Pa()),Oa(a)):da.setImmediate(a)}}var Wa=!1,Xa=new Qa;function Ya(){for(var a;a=Xa.remove();){try{a.Od.call(a.scope)}catch(b){Na(b)}Sa.put(a)}Wa=!1};function u(a,b){this.Ra=0;this.hf=void 0;this.Rc=this.bc=this.C=null;this.ad=this.Md=!1;if(a!=fa)try{var c=this;a.call(b,function(a){Za(c,2,a)},function(a){Za(c,3,a)})}catch(d){Za(this,3,d)}}function $a(){this.next=this.context=this.gc=this.Ec=this.child=null;this.zd=!1}$a.prototype.reset=function(){this.context=this.gc=this.Ec=this.child=null;this.zd=!1};var ab=new Ga(function(){return new $a},function(a){a.reset()},100);function bb(a,b,c){var d=ab.get();d.Ec=a;d.gc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(fa);Za(b,2,a);return b}function cb(a){return new u(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Ta(sa(b,a))}function fb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},l=0,p;l<a.length;l++)p=a[l],db(p,sa(f,l),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new gb(c,a,b)}
u.prototype.then=function(a,b,c){return hb(this,ka(a)?a:null,ka(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.pe=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.bc||2!=a.Ra&&3!=a.Ra||jb(a);a.Rc?a.Rc.next=b:a.bc=b;a.Rc=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new u(function(a,h){e.Ec=b?function(c){try{var e=b.call(d,c);a(e)}catch(L){h(L)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof kb?h(b):a(e)}catch(L){h(L)}}:h});e.child.C=a;ib(a,e);return e.child}u.prototype.Mg=function(a){this.Ra=0;Za(this,2,a)};u.prototype.Ng=function(a){this.Ra=0;Za(this,3,a)};
function Za(a,b,c){0==a.Ra&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,eb(c,a.Mg,a.Ng,a)||(a.hf=c,a.Ra=b,a.C=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof u)return ib(a,bb(b||fa,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ka(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){l||(l=!0,d.call(e,a))}function h(a){l||(l=!0,c.call(e,a))}var l=!1;try{b.call(a,h,f)}catch(p){f(p)}}function jb(a){a.Md||(a.Md=!0,Ta(a.Rf,a))}function nb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Rc=null);return b}
u.prototype.Rf=function(){for(var a;a=nb(this);){var b=this.Ra,c=this.hf;if(3==b&&a.gc&&!a.zd){var d;for(d=this;d&&d.ad;d=d.C)d.ad=!1}if(a.child)a.child.C=null,ob(a,b,c);else try{a.zd?a.Ec.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Md=!1};function ob(a,b,c){2==b?a.Ec.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function lb(a,b){a.ad=!0;Ta(function(){a.ad&&pb.call(null,b)})}var pb=Na;function kb(a){ta.call(this,a)}r(kb,ta);kb.prototype.name="cancel";
function gb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function qb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],l=0;l<e+1;l++)h[l]=[],h[l][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(l=1;l<=e;l++)for(p=1;p<=f;p++)c(a[l-1],b[p-1])?h[l][p]=h[l-1][p-1]+1:h[l][p]=Math.max(h[l-1][p],h[l][p-1]);var L=[];l=e;for(p=f;0<l&&0<p;)c(a[l-1],b[p-1])?(L.unshift(d(l-1,p-1)),l--,p--):h[l-1][p]>h[l][p-1]?l--:p--;return L}function rb(a){return Ba(arguments,function(a,c){return a+c},0)}
function sb(a){return rb.apply(null,arguments)/arguments.length}function tb(a){var b=arguments.length;if(2>b)return 0;var c=sb.apply(null,arguments);return rb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function ub(a){return Math.sqrt(tb.apply(null,arguments))};var vb="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw vb;};wb.prototype.te=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.te)return a.te(!1);if(ja(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw vb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Ab(a,b){if(ja(a))try{za(a,b,void 0)}catch(c){if(c!==vb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==vb)throw c;}}}function Bb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw vb;};return b};function Cb(a){Db(a);return a.a.concat()}function Db(a){var b,c;if(a.Gf!=a.a.length){for(b=c=0;c<a.a.length;){var d=a.a[c];Eb(a.$,d)&&(a.a[b++]=d);c++}a.a.length=b}if(a.Gf!=a.a.length){var e={};for(b=c=0;c<a.a.length;)d=a.a[c],Eb(e,d)||(a.a[b++]=d,e[d]=1),c++;a.a.length=b}}function Eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Gb(a,b){var c=Hb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Ib=t("Opera"),Jb=t("Trident")||t("MSIE"),Kb=t("Edge"),Lb=t("Gecko")&&!(va(Ha.toLowerCase(),"webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Mb=va(Ha.toLowerCase(),"webkit")&&!t("Edge"),Nb=t("Macintosh"),Ob=t("Windows"),Pb=t("Android"),Qb=Fb(),Rb=t("iPad"),Sb=t("iPod"),Tb;
a:{var Ub="",Vb=function(){var a=Ha;if(Lb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Kb)return/Edge\/([\d\.]+)/.exec(a);if(Jb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Mb)return/WebKit\/(\S+)/.exec(a);if(Ib)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Vb&&(Ub=Vb?Vb[1]:"");if(Jb){var Wb,Xb=da.document;Wb=Xb?Xb.documentMode:void 0;if(null!=Wb&&Wb>parseFloat(Ub)){Tb=String(Wb);break a}}Tb=Ub}var Yb=Tb,Hb={};function Zb(a){return Gb(a,function(){return 0<=wa(Yb,a)})};var $b=function(){if(Ob){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Ha))?a[1]:"0"}return Nb?(a=/10[_.][0-9_.]+/,(a=a.exec(Ha))?a[0].replace(/_/g,"."):"10"):Pb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Ha))?a[1]:""):Qb||Rb||Sb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Ha))?a[1].replace(/_/g,"."):""):""}();var ac=Fb()||t("iPod"),bc=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function cc(){var a;!(a=Ka()&&!Zb(10))&&(a=bc||ac)&&(a=!(0<=wa($b,10)));this.mg=a;this.bg=!(this.mg||Jb&&!Zb(10));!Jb||Zb(11);this.Qg=Ma()||Ka()}var dc;function x(){return new window.Map}function ec(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function fc(a,b){this.ra=a;this.l=b||this.Fe()}var gc=0;m=fc.prototype;m.id=g("ra");m.Fe=function(){return{}};m.rf=g("l");m.Ia=function(){return{id:this.ra,value:this.rf()}};m.lb=function(a){return"#"==a.substr(-1)?this.ra:null};function hc(a){return new fc(a.id,a.value)}function ic(a){return new fc(gc++,a||{})}function jc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};var kc={};q("lf.TransactionType",kc);kc.READ_ONLY=0;kc.READ_WRITE=1;function z(a,b,c,d,e){this.rd=a;this.fg=b;this.Pg=c;this.Mf=d;this.Ef=e}q("lf.TransactionStats",z);z.prototype.Kg=g("rd");z.prototype.success=z.prototype.Kg;z.prototype.eg=g("fg");z.prototype.insertedRowCount=z.prototype.eg;z.prototype.Og=g("Pg");z.prototype.updatedRowCount=z.prototype.Og;z.prototype.Lf=g("Mf");z.prototype.deletedRowCount=z.prototype.Lf;z.prototype.Df=g("Ef");z.prototype.changedTableCount=z.prototype.Df;function lc(a,b){this.td=a;this.Pa=b||null;this.O=w();this.rd=!1;this.ya=null}lc.prototype.ka=function(){return(0==this.td?this.pc():mc(this)).then(function(a){this.rd=!0;return a}.bind(this))};function mc(a){try{nc(a.Pa)}catch(b){return cb(b)}return oc(a).then(function(a){this.Pa.ka();return a}.bind(a))}function oc(a){pc(a);qc(a);return a.pc()}
function pc(a){a.Pa.fb.forEach(function(a,c){c=this.Pa.da().get(c);c=this.H(c.getName(),c.ib.bind(c),0);var b=y(a.wa).map(function(a){return a.id()});0<b.length&&c.remove(b).pe(this.Oe,this);a=y(a.la).map(function(a){return a[1]}).concat(y(a.va));c.put(a).pe(this.Oe,this)},a)}function qc(a){rc(a.Pa).forEach(function(a){var b=this.H(a.getName(),hc,1);b.remove([]);b.put(a.Ia())},a)}lc.prototype.Oe=function(a){this.O.reject(a)};
lc.prototype.X=function(){if(null===this.ya)if(this.rd)if(0==this.td)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Pa.fb.forEach(function(e){d++;a+=e.va.size;c+=e.la.size;b+=e.wa.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function sc(a){this.Hg=a}sc.prototype.toString=g("Hg");var tc=new sc("backstore"),uc=new sc("cache"),vc=new sc("indexstore"),wc=new sc("engine"),xc=new sc("runner"),yc=new sc("observerregistry"),A=new sc("schema");function B(a){return n(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function zc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function Ac(a,b){this.ra=a;this.l=b||{}}function Bc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}Ac.prototype.V=g("ra");function Cc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function Dc(a,b){b.forEach(function(a){delete this.l[a]},a)}Ac.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function Ec(a){return new Ac(a.id,JSON.parse(a.value))};function Fc(a,b,c){this.Y=a;this.Eb=b;this.jf=c}m=Fc.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Eb;return Gc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.l[a])})})};function Gc(a,b){var c=x(),d=w();a=Bc(b).map(function(a){return new u(function(b,d){try{var e=this.Y.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Ec(a.target.result);c.set(a.V(),a);b()}},this)},a);fb(a).then(function(){d.resolve(c)});return d.ha}
m.Qd=function(){return new u(function(a,b){var c=[];try{var d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Ec(b.value).l,h;for(h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Rb=function(a){return new u(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.Y.name,c));Cc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this));var b=x();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.Y.name,c));Dc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return 0==Object.keys(a.l).length?this.Y.delete(a.V()):this.Y.put(a.Ia())}.bind(this))},this);return fb(a)};function Hc(a,b,c){a=a.b(uc);var d=[c<<9,(c+1<<9)-1];b=a.Sa(b,d[0],d[1]);c=new Ac(c);Cc(c,b);return c}
function Ic(a,b){return new Ac(b)};function Jc(a){this.U=a.b(uc);this.B=a.b(vc);this.g=a.b(A)}Jc.prototype.update=function(a){a.forEach(function(a){Kc(this,a);Lc(this,a)},this)};function Lc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.la.forEach(function(a){this.U.set(c,a[1])},a)}function Kc(a,b){var c=a.g.table(b.getName());Mc(b).forEach(function(a){Nc(this,c,a)},a)}
function Nc(a,b,c){var d=a.B.jc.get(b.getName())||[],e=0;d.forEach(function(a){try{Oc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Oc(a,[c[1],c[0]])},this),h;}},a)}function Oc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.gb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Qc={};q("lf.ConstraintAction",Qc);Qc.RESTRICT=0;Qc.CASCADE=1;var Rc={};q("lf.ConstraintTiming",Rc);Rc.IMMEDIATE=0;Rc.DEFERRABLE=1;var Sc={};q("lf.Order",Sc);Sc.DESC=0;Sc.ASC=1;var Tc={};q("lf.Type",Tc);Tc.ARRAY_BUFFER=0;Tc.BOOLEAN=1;Tc.DATE_TIME=2;Tc.INTEGER=3;Tc.NUMBER=4;Tc.STRING=5;Tc.OBJECT=6;var Uc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Uc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Vc(){this.$=x();this.size=0}m=Vc.prototype;m.has=function(a){return this.$.has(a)};m.set=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Ub=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Ub(b,c)},this);return this};
m.delete=function(a,b){var c=this.$.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.$.delete(a);return b};m.get=function(a){a=this.$.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.$.clear();this.size=0};m.keys=function(){return ec(this.$)};m.values=function(){var a=[];this.$.forEach(function(b){a.push.apply(a,C(b))});return a};function Wc(a){this.B=a.b(vc);this.g=a.b(A);this.U=a.b(uc);this.Wc=null}function Xc(a,b,c){var d=b.Kb.tg;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Yc(a,b,c,d){b.Kb.Pd.forEach(function(a){a.timing==d&&Zc(this,a,c)},a)}function Zc(a,b,c){var d=$c(a,b);c.forEach(function(a){if(ad(a[0],a[1],b.name)&&(a=a[1].lb(b.name),null!==a&&!d.hb(a)))throw new D(203,b.name);},a)}
function $c(a,b){null===a.Wc&&(a.Wc=x());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Ua)[b.Fc].Ba(),c=a.B.get(c.j()),a.Wc.set(b.name,c));return c}function ad(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function bd(a,b,c,d){b=cd(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&dd(a,b,c,function(a,b,c){if(b.hb(c))throw new D(203,a.name);}))}
function ed(a,b,c){b=cd(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Vc;dd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Ub(a.Be,b)});return d}function fd(a,b,c){var d=new Vc;dd(a,c,b,function(a,b,c,l){b.get(c).forEach(function(b){d.set(b,{Nd:a,yg:l[1]})})});return d}function dd(a,b,c,d){b.forEach(function(a){var b=this.B.get(a.name),e=$c(this,a);c.forEach(function(c){if(ad(c[0],c[1],e.getName())){var f=c[0].lb(e.getName());d(a,b,f,c)}},this)},a)}
function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Yc(a,b,c,d))}function hd(a,b,c,d){0!=c.length&&(Yc(a,b,c,d),bd(a,b,c,d))}function id(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),bd(a,b,c,d))}
function jd(a,b,c){var d={oe:[],lf:new Vc},e=new Vc;e.Ub(b.getName(),c.map(function(a){return a.id()}));do{var f=new Vc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=ed(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Wd(b))},a);e=f;d.lf.Wd(e)}while(0<e.size);return d};function kd(a){this.va=x();this.la=x();this.wa=x();this.w=a}m=kd.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.la.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Wd=function(a){a.va.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Mc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+ec(this.va).toString()+"], ["+ec(this.la).toString()+"], ["+ec(this.wa).toString()+"]"};function ld(a){var b=new kd(a.w);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.hg=function(){return 0==this.va.size&&0==this.wa.size&&0==this.la.size};function md(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(A);this.U=a.b(uc);this.B=a.b(vc);this.za=new Wc(a);this.cd=new Jc(a);this.fb=x()}function rc(a){var b=[];ec(a.fb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Bb()&&(a.Ca().forEach(function(a){b.push(this.B.get(a.j()))},this),b.push(this.B.get(a.getName()+".#")))},a);return b}m=md.prototype;m.da=g("aa");
m.zb=function(a,b){nd(this,a);Xc(this.za,a,b);gd(this.za,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[null,b[c]])};function od(a,b,c){var d=b.getName(),e=a.fb.get(d)||new kd(d);a.fb.set(d,e);try{Nc(a.cd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){nd(this,a);Xc(this.za,a,b);b=b.map(function(a){return[this.U.get(a.id()),a]},this);pd(this,a,b);hd(this.za,a,b,0);b.forEach(function(b){od(this,a,b)},this)};m.Rd=function(a,b){nd(this,a);Xc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.Kb.nd;if(null===f)var h=null;else{h=this.za;f=f.j();var l=d.lb(f);h=h.B.get(f).get(l);h=0==h.length?null:h[0]}null!=h?(e=this.U.get(h),d.ra=h,hd(this.za,a,[[e,d]],0)):gd(this.za,a,[d],0);od(this,a,[e,d])}};
m.remove=function(a,b){nd(this,a);qd(this,a,b);id(this.za,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[b[c],null])};function pd(a,b,c){b=cd(a.g.info(),b.getName(),1);if(null!==b){var d=fd(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Nd.Be),d=this.U.get(a),e=c.ib(d.Ia());e.l[b.Nd.tb]=b.yg.l[b.Nd.Fc];od(this,c,[d,e])},this)},a)}}
function qd(a,b,c){if(null!==cd(a.g.info(),b.getName(),1)){b=jd(a.za,b,c);var d=b.lf;b.oe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);id(this.za,b,a,0);a.forEach(function(a){od(this,b,[a,null])},this)},a)}}function nc(a){a.fb.forEach(function(a){var b=this.aa.get(a.getName());gd(this.za,b,y(a.va),1);id(this.za,b,y(a.wa),1);hd(this.za,b,y(a.la),1)},a)}m.ka=aa();m.Hb=function(){var a=y(this.fb).map(function(a){return ld(a)});this.cd.update(a)};
function nd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.m=b;this.ea=this.from==F?!1:c;this.na=this.m==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.m==F?"unbound":this.m)+(this.na?")":"]")};function rd(a){if(sd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.m==F||(c=new E(a.m,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.m,this.from,this.na,this.ea)};
function td(a,b){var c=ud(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.m==F||d.m>a.from||d.m==a.from&&!d.na&&!a.ea}function vd(){return new E(F,F,!1,!1)}function sd(a){return a.from==F&&a.m==F}function wd(a){return a.from==a.m&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.m==F||a<this.m||a==this.m&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function ud(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function xd(a,b){var c=ud(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=ud(a.m,b.m,!1,a.na,b.na));return c}function yd(a){if(0==a.length)return[];a.sort(xd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].m,F,!0,!1):new E(a[c-1].m,a[c].from,!0,!0);return b};function zd(a){this.ic=[];n(a)&&this.add(a)}zd.prototype.toString=function(){return this.ic.map(function(a){return a.toString()}).join(",")};zd.prototype.hb=function(a){return this.ic.some(function(b){return b.contains(a)})};zd.prototype.yb=g("ic");
zd.prototype.add=function(a){if(0!=a.length)if(a=this.ic.concat(a),1==a.length)this.ic=a;else{a.sort(xd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(td(c,a[d])){var e=c,f=a[d],h=vd();e.from!=F&&f.from!=F&&(c=ud(e.from,f.from,!0),1!=c?(h.from=e.from,h.ea=0!=c?e.ea:e.ea&&f.ea):(h.from=f.from,h.ea=f.ea));e.m!=F&&f.m!=F&&(c=ud(e.m,f.m,!1),-1!=c?(h.m=e.m,h.na=0!=c?e.na:e.na&&f.na):(h.m=f.m,h.na=f.na));c=h}else b.push(c),c=a[d];b.push(c);this.ic=b}};
function Ad(a,b){var c=[];a.yb().map(function(a){return b.yb().map(function(b){if(td(a,b)){var c=vd();var d=ud(a.from,b.from,!0);d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.m==F||b.m==F?b=a.m==F?b:a:(d=ud(a.m,b.m,!1),b=0==d?a.na?a:b:-1==d?a:b);c.m=b.m;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new zd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Xa=null}G.prototype.s=function(){return C(this.L)};function Bd(a){return a.entries.map(function(a){return a.ua.l})}function Cd(a){return a.entries.map(function(a){return a.ua.id()})}function Dd(a,b){return a.Xa.get(b.j())}var Ed=null;function Fd(){null===Ed&&(Ed=new G([],[]));return Ed}
function Gd(a){if(0==a.length)return Fd();var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0;b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b});for(var e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function Hd(a){if(0==a.length)return Fd();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function Id(a,b){var c=1<b.length;a=a.map(function(a){return new Jd(a,c)});return new G(a,b)}function Jd(a,b){this.ua=a;this.id=Kd++;this.Td=b}var Kd=0;function H(a,b){var c=b.Ja;return null!==c&&a.ua.l.hasOwnProperty(c)?a.ua.l[c]:a.Td?a.ua.l[Ld(b.H())][b.getName()]:a.ua.l[b.getName()]}function Md(a,b,c){var d=b.Ja;if(null!=d)a.ua.l[d]=c;else if(a.Td){d=Ld(b.H());var e=a.ua.l[d];null==e&&(e={},a.ua.l[d]=e);e[b.getName()]=c}else a.ua.l[b.getName()]=c}
function Nd(a,b,c,d){function e(a,b){if(a.Td){a=a.ua.l;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ua.l}var f={};e(a,b);e(c,d);a=new fc(-1,f);return new Jd(a,!0)};q("lf.bind",function(a){return new Od(a)});function Od(a){this.fa=a}q("lf.Binder",Od);Od.prototype.Ba=g("fa");function Pd(){this.Ue=Qd();var a=Rd();this.Mb=x();this.Mb.set(1,Sd());this.Mb.set(2,Td());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Ud());this.Mb.set(6,Vd())}var Wd;function Xd(){null!=Wd||(Wd=new Pd);return Wd}function Yd(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Qd(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Sd(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Rd(){var a=Sd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Ud(){var a=Rd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Vd(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Td(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.C=null}var Zd=[];I.prototype.getParent=g("C");I.prototype.Za=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function $d(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Zd}function ae(a,b){return J(a)[b]||null}function be(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function ce(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return ce(this,J(this).indexOf(a))};function de(a,b,c){ae(a,c).C=null;b.C=a;a.h[c]=b}function ee(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){ee(a,b,c)})};function fe(){I.call(this);this.ra=he++}r(fe,I);var he=0;fe.prototype.V=g("ra");function ie(a,b,c){fe.call(this);this.I=a;this.value=b;this.D=c;this.sc=Yd(Xd(),this.I.F(),this.D);this.Ta=!1;this.ac=b}r(ie,fe);m=ie.prototype;m.Lb=function(){var a=new ie(this.I,this.value,this.D);a.ac=this.ac;a.qd(this.Ta);var b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.s=function(a){a=null!=a?a:B();a.add(this.I.H());return a};m.qd=ca("Ta");
function je(a){var b=!1;a.value instanceof Od||(b="array"==ha(a.value)?!a.value.some(function(a){return a instanceof Od}):!0);if(!b)throw new D(501);}m.eval=function(a){je(this);if("in"==this.D)return ke(this,a);var b=a.entries.filter(function(a){return this.sc(H(a,this.I),this.value)!=this.Ta},this);return new G(b,a.s())};
m.bind=function(a){if(this.ac instanceof Od){var b=this.ac.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ha(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof Od){var c=b.Ba();if(a.length<=c)throw new D(510);return a[b.Ba()]}return b}))};function ke(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ta}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(a,b.s())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Ta?"(complement)":"")+" "+this.value+")"};m.fd=function(){je(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new E(le(this,this.value[0]),le(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new zd(this.Ta?yd(a):a);a=le(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new zd(this.Ta?rd(a):[a])};function le(a,b){return 2==a.I.F()?b.getTime():b};function me(a){this.ba=a;this.Sc=this.Fa=null}function ne(a,b){null===a.Fa&&null!=a.u&&(a.Fa=oe(a.u));return a.Fa.get(b)||null}function oe(a){var b=x();ee(a,function(a){b.set(a.V(),a)});return b}function pe(a,b){b.u&&(a.u=b.u.Lb());a.Sc=b}me.prototype.bind=function(){return this};function qe(a,b){a=a.u;null!=a&&ee(a,function(a){a instanceof ie&&a.bind(b)})};function re(a){me.call(this,a)}r(re,me);function se(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}re.prototype.da=function(){return B(this.from)};re.prototype.clone=function(){var a=new re(this.ba);pe(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Qb&&(a.Qb=this.Qb);this.Wb&&(a.Wb=this.Wb);a.ab=this.ab;return a};
re.prototype.bind=function(a){re.eb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.Ba()]);null!=this.Wb&&(this.K=a[this.Wb.Ba()]);qe(this,a);return this};function te(a,b){this.Ga=a;this.aa=b}te.prototype.Za=g("Ga");te.prototype.da=g("aa");function ue(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function ve(a,b){this.global=a;this.Na=a.b(tc);this.od=b.map(function(a){return a.context});this.df=b.map(function(a){return a.de});this.Hd=ue(this.df);this.re=we(this);this.Cb=w()}function we(a){return a.od.some(function(a){return!(a instanceof re)})?1:0}m=ve.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.Za().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.re?void 0:new md(this.global,this.Hd),c=[],d=this.df.slice(),e=this.od;return a().then(function(){this.ja=this.Na.Db(this.re,C(this.Hd),b);return this.ja.ka()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Hb();throw a;})};m.F=g("re");m.da=g("Hd");m.V=function(){return la(this)};m.ae=aa();
m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function xe(a,b){ve.call(this,a,b);this.Gb=a.b(yc)}r(xe,ve);xe.prototype.getPriority=k(0);xe.prototype.ae=function(a){this.od.forEach(function(b,c){ye(this.Gb,b,a[c])},this)};function ze(a,b){this.c=a;this.Gb=a.b(yc);this.Ha=a.b(xc);this.cd=new Jc(a);this.fb=b;var c=a.b(A);a=this.fb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Cb=w()}m=ze.prototype;m.exec=function(){this.cd.update(this.fb);this.Ic();return v()};m.F=k(1);m.da=g("aa");m.V=function(){return la(this)};m.getPriority=k(1);m.Ic=function(){var a=Ae(this.Gb,this.aa);0!=a.length&&(a=new xe(this.c,a),Be(this.Ha,a))};function Ce(a){this.c=a;this.Na=a.b(tc);this.Ha=a.b(xc)}Ce.prototype.Zd=function(a){a=new ze(this.c,a);Be(this.Ha,a)};function M(a,b){this.Yb=a;this.i=b;this.Wa=x()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.Zc=g("i");M.prototype.$c=function(){throw new D(351);};function De(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Ee(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Da=function(a){return De(this.i,"@rev/R").then(function(a){this.Qa=a;return De(this.i,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.Wa.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Wa.has(a.getName())||(b[a.getName()]=++c)},this);var d=this.i.child("@table");return Ee(d,b)}.bind(this))};
function Fe(a,b,c){var d=a.Wa.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Qa};return Ee(this.i,a)}.bind(a)):v()}M.prototype.qc=function(a){return Fe(this,a,k(null)).then(function(){this.Wa.delete(a);return Ee(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.nc=function(a,b,c){return Fe(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.nc;M.prototype.rc=function(a,b){return Fe(this,a,function(a){var c=a.P;delete c[b];return{R:this.Qa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Hc=function(a,b,c){return Fe(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Hc;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.yc=g("Yb");M.prototype.getVersion=M.prototype.yc;M.prototype.cc=function(a){var b=w();a=this.Wa.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=ec(this.Wa).map(function(b){return this.cc(b).then(function(c){a[b]=c})}.bind(this));return fb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Ge(a,b,c){lc.call(this,b,c);this.i=a}r(Ge,lc);Ge.prototype.H=function(a){return this.i.wc(a)};
Ge.prototype.pc=function(){if(0==this.td)return this.O.resolve(),this.O.ha;var a=this.Pa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Qa+1;this.i.Qa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Wa.get(e);a.va.forEach(function(a,e){c[e]={R:b,T:d,P:a.l}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].l}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Qa=b-1,c=y(a).map(function(a){return He(this.i,a.getName())},this),
fb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ha};function Ie(){this.Aa=x()}function Je(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}Ie.prototype.getData=g("Aa");Ie.prototype.get=function(a){return v(Je(this,a))};function Ke(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}Ie.prototype.put=function(a){Ke(this,a);return v()};function Le(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
Ie.prototype.remove=function(a){Le(this,a);return v()};function Me(a){return 0==a.Aa.size?0:ec(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Ne(a,b){this.g=a;this.yf=b;this.Gc=x();this.Qa=-1;this.L=x();this.Wa=x();this.Ed=null}m=Ne.prototype;
m.Da=function(a){this.i=this.yf.child(this.g.name());var b=a||function(){return v()};return De(this.i,"@db/version").then(function(a){return null===a?Ee(this.i,Oe(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?De(this.i,"@rev/R").then(function(a){this.Qa=a;return De(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Wa.set(b,a[b]);a=this.g.oa().map(function(a){return He(this,a.getName())},this);
return fb(a)}.bind(this)).then(function(){Pe(this);Qe(this);return v()}.bind(this)):this.be(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Ee(a,{version:this.g.version()},!0)}.bind(this))};
function Qe(a){a.i.off();a.i.on("child_removed",a.vg.bind(a));a.Fd&&(a.Fd.off(),a.Gc.clear());a.Fd=a.i.orderByChild("R").startAt(a.Qa+1);a.Fd.on("value",a.Zd.bind(a))}function Pe(a){gc=y(a.L).map(function(a){return Me(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.vg=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=B(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=Re(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),c=ec(a.wa);0<c.length&&Le(b,c);var f=y(a.va);a.la.forEach(function(a){f.push(a[1])});Ke(b,f)},this),0<a.length&&this.Cc(a),Qe(this))};
function Re(a,b){var c=B(),d=x();a.Wa.forEach(function(a,b){var e=this.L.get(b),f=new kd(b);this.Gc.has(a)&&(b=C(this.Gc.get(a)),b.forEach(function(a){c.add(a)}),Je(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var l=this.L.get(a.getName());e=this.g.table(a.getName()).ib({id:b,value:e.P});l.getData().has(b)?a.modify([Je(l,[b])[0],e]):a.add(e)}}}.bind(a));return y(d).filter(function(a){return!a.hg()})}
function He(a,b){var c=w(),d=a.Wa.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ie,f=[];a.forEach(function(a){f.push(e.ib({id:parseInt(a.key(),10),value:a.val().P}))});Ke(d,f);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Oe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Qa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.L.set(a,new Ie);this.Wa.set(a,d)},a);return b}
m.Db=function(a,b,c){return new Ge(this,a,c)};m.wc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Ed");m.Cc=function(a){null!=this.Ed&&this.Ed(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Yb=a;this.Qc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.Zc=g("i");N.prototype.getRawDBInstance=N.prototype.Zc;N.prototype.$c=g("ja");N.prototype.getRawTransaction=N.prototype.$c;N.prototype.qc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function Se(a,b,c,d){return new u(function(a,f){try{var e=this.ja.objectStore(b);var l=e.openCursor()}catch(p){f(p);return}l.onsuccess=function(){var b=l.result;b?(c(b),b.continue()):(d(e),a())};l.onerror=f},a)}function Te(a){return a instanceof ArrayBuffer?jc(a):a instanceof Date?a.getTime():a}function Ue(a,b,c){function d(a){var b=Ec(a.value),d=b.l,e;for(e in d){var f=hc(d[e]);c(f);d[e]=f.Ia()}a.update(b.Ia())}function e(a){var b=hc(a.value);c(b);a.update(b.Ia())}return Se(a,b,a.Qc?d:e,aa())}
N.prototype.nc=function(a,b,c){var d=Te(c);return Ue(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.nc;N.prototype.rc=function(a,b){return Ue(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.rc;N.prototype.Hc=function(a,b,c){return Ue(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Hc;
function Ve(a,b){var c=[];return new u(function(a,e){try{var d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Qc){var e=Ec(b.value).l,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Te(a[c]);return ic(b)};N.prototype.createRow=N.prototype.vb;N.prototype.yc=g("Yb");N.prototype.getVersion=N.prototype.yc;
N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.cc=function(a){return Ve(this,a).then(function(a){return a.map(function(a){return a.value})})};function We(a,b){this.Y=a;this.Eb=b}We.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Xe(this):Ye(this);a=a.map(function(a){return new u(function(b,d){try{var c=this.Y.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Eb(a.target.result))}.bind(this)},this)},this);return fb(a)};
function Ye(a){return new u(function(a,c){var b=[];try{var e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Eb(c.value)),c.continue()):a(b)}.bind(this)},a)}function Xe(a){return new u(function(a,c){try{var b=this.Y.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
We.prototype.Rb=function(a){return new u(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};We.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return fb(a)};
We.prototype.remove=function(a){return new u(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Rb(function(){return this.Y.delete(a)}.bind(this))},this);fb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ze(a,b,c,d,e){lc.call(this,c,e);this.c=a;this.ja=b;this.Qc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}r(Ze,lc);Ze.prototype.H=function(a,b,c){return this.Qc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Fc(a,b,0==c?sa(Hc,this.c):Ic)):new We(this.ja.objectStore(a),b)};Ze.prototype.pc=function(){return this.O.ha};function $e(a,b){this.c=a;this.g=b;this.Bd=b.ee.Of||!1}m=$e.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){try{var d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){af(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.ke().then(function(b){gc=Math.max(gc,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function af(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Bd);bf(d);a.g.oa().forEach(sa(a.Hf,d),a);return b(c)}function bf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Hf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Bb()&&(b.Ca().forEach(function(b){cf(a,b.j())},this),cf(a,df(b)))};function cf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Db=function(a,b,c){b=this.i.transaction(ef(b),0==a?"readonly":"readwrite");return new Ze(this.c,b,a,this.Bd,c)};
function ef(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(df(a)))});return C(b)}
m.ke=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){try{var l=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}l.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};l.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Bd?(a=Ec(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.wc=function(){throw new D(511);};m.subscribe=aa();m.Cc=aa();function ff(a,b,c){lc.call(this,b,c);this.Y=a;0==b&&this.O.resolve()}r(ff,lc);ff.prototype.H=function(a){return this.Y.wc(a)};ff.prototype.pc=function(){this.O.resolve();return this.O.ha};function gf(a){this.g=a;this.L=x()}m=gf.prototype;m.Da=function(){this.g.oa().forEach(this.cg,this);return v()};m.wc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Db=function(a,b,c){return new ff(this,a,c)};function hf(a,b){if(!a.L.has(b)){var c=new Ie;a.L.set(b,c)}}m.cg=function(a){hf(this,a.getName());a.Bb()&&(a.Ca().forEach(function(a){hf(this,a.j())},this),hf(this,df(a)))};m.close=aa();m.subscribe=aa();m.Cc=aa();function jf(a){gf.call(this,a);this.kd=null}r(jf,gf);jf.prototype.subscribe=function(a){null===this.kd&&(this.kd=a)};jf.prototype.Cc=function(a){null===this.kd||this.kd(a)};function kf(a,b,c){this.ja=a;this.w='"'+b+'"';this.Eb=c}kf.prototype.get=function(a){var b=this.Eb;return mf(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
kf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){mf(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return v()};kf.prototype.remove=function(a){mf(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function nf(a,b,c){lc.call(this,b,c);this.i=a;this.L=x();this.Id=[]}r(nf,lc);function of(a){return a.replace(".","__d__").replace("#","__s__")}nf.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new kf(this,of(a),b),this.L.set(a,c));return c};function mf(a,b,c,d){var e=w();a.Id.push({Jg:b,zg:c,transform:d,O:e});return e.ha}
nf.prototype.pc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.O.resolve(f)}0<this.Id.length?(a=h=this.Id.shift(),b.executeSql(h.Jg,h.zg,e,c)):this.O.resolve(d)}.bind(this);0==this.td?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ha};function O(a,b,c){this.i=c;this.c=a;this.Yb=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.Zc=g("i");O.prototype.getRawDBInstance=O.prototype.Zc;O.prototype.$c=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.$c;function pf(a){return new nf(a.i,1,new md(a.c,B()))}O.prototype.qc=function(a){var b=pf(this);mf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.qc;
O.prototype.cc=function(a){var b=pf(this);mf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function qf(a,b,c){var d=pf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(a){a.forEach(function(a){a=c(a);mf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.nc=function(a,b,c){var d=Te(c);return qf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.rc=function(a,b){return qf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Hc=function(a,b,c){return qf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Hc;O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Te(a[c]);return ic(b)};
O.prototype.createRow=O.prototype.vb;O.prototype.yc=g("Yb");O.prototype.getVersion=O.prototype.yc;function rf(a){mf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=pf(this);rf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cc(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function sf(a,b,c){this.c=a;this.g=b;this.Ig=c||1}m=sf.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Ig);if(null!=c)this.i=c,tf(this,b).then(function(){this.ke().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function tf(a,b){var c=w(),d=new nf(a.i,1,new md(a.c,B()));mf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);mf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Db=function(a,b,c){if(null!=this.i)return new nf(this.i,a,c);throw new D(2);};m.close=aa();
m.wc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Cc=function(){throw new D(355);};m.be=function(a,b){return uf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function uf(a){var b=a.g.oa(),c=new nf(a.i,1,new md(a.c,B())),d=new nf(a.i,1,new md(a.c,B()));mf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);rf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){mf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],l=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Bb&&(a.Ca().forEach(function(a){a=of(a.j());e.push(a);l.push(a)}),a=of(df(a)),e.push(a),p.push(a))});
e.forEach(function(a){mf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.ke=function(){var a=0,b=w(),c=function(b){var c=new nf(this.i,0);mf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});fb(d).then(function(){gc=Math.max(gc,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function vf(a){this.$=x();this.Xb=x();a.oa().forEach(function(a){this.Xb.set(a.getName(),B())},this)}m=vf.prototype;m.set=function(a,b){this.$.set(b.id(),b);this.Xb.get(a).add(b.id())};m.Ub=function(a,b){var c=this.Xb.get(a);b.forEach(function(a){this.$.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.$.get(a)||null};function wf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Sa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Xb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.$.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.$.get(b),d.push(c));return d};m.remove=function(a,b){this.$.delete(b);this.Xb.get(a).delete(b)};m.Sg=function(a){return null!=a?this.Xb.get(a).size:this.$.size};m.clear=function(){this.$.clear();this.Xb.clear()};function xf(a,b,c){var d=0,e=a.length;for(c=c||yf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function yf(a,b){return a-b}function zf(a,b,c){c=xf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Af(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Bf(){this.ia=0;this.Bc=null}Bf.prototype.add=function(a,b){this.ia+=b;this.Bc=null===this.Bc?a:a>this.Bc?a:this.Bc};Bf.prototype.remove=function(a,b){this.ia-=b};Bf.prototype.clear=function(){this.ia=0};function Cf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Df(a,b,c,d){this.w=a;this.Z=b;this.tf=c;this.ya=new Bf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Ef(this,d);this.ta=d=Ff(d)}else this.clear()}var Gf=[];m=Df.prototype;m.getName=g("w");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.zb(a,b)};m.set=function(a,b){this.ta=this.ta.zb(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Vc=function(a){if(null==a)return this.X().ia;if(a instanceof E){if(sd(a))return this.X().ia;if(wd(a))return this.get(a.from).length}return this.Sa([a]).length};m.X=g("ya");m.Qd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ya.ia-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Sa=function(a,b,c,d){var e=Hf(this.ta).a[0];if(!n(e)||0==c)return Gf;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return Gf;if(!n(a)||1==a.length&&a[0]instanceof E&&sd(a[0]))return this.Qd(f,b,c,d);a=this.Z.pf(a);var h=Array(b?this.ya.ia:f),l={count:0,W:h.length,reverse:b,K:d},p=1<this.gb().Ud();a.forEach(function(a){var b=this.Z.pd(a);b=this.Z.Sd(a)?e:b[0];b=this.ta.Uf(b);for(var c=0;null!=b&&l.count<l.W;){if(p){for(var d=b,f=a,L=
l,zb=h,Pc=d.o.gb(),ge=-1,La=0;La<d.a.length;++La)if(Pc.Ab(d.a[La],f)){ge=La;break}if(-1!=ge)for(La=ge;La<d.a.length&&L.count<L.W;++La)Pc.Ab(d.a[La],f)&&If(d,L,zb,La)}else b.Sa(a,l,h);0!=l.K||b.ed(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>l.count&&h.splice(l.count,h.length-l.count);return b?Af(h,b,c,d):h};m.clear=function(){this.ta=Jf(this);this.ya.clear()};m.hb=function(a){return this.ta.hb(a)};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
function Kf(a,b,c){if(!a.Z.Jd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.tf?[b.A[c]]:b.A[c]]}m.Fb=function(a){a:{var b=Hf(this.ta);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=Kf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Lf(this.ta);d=c.a.length-1;do if(0>d)c=c.ob,d=0;else{var e=Kf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("tf");m.gb=g("Z");
m.Oa=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ia=function(){for(var a=[],b=Hf(this.ta);b;)a.push(new fc(b.ra,[b.a,b.A])),b=b.xa;return a};function Mf(a,b,c,d){a=new Df(b,a,c);d=Nf(d,a);a.ta=d;return a}function Of(a,b){this.ra=a;this.o=b;this.kb=0;this.xa=this.ob=this.C=null;this.a=[];this.A=[];this.h=[];this.Uf=1==b.gb().Ud()?this.Ke:this.Je}function Jf(a){return new Of(gc++,a)}function P(a){return 0==a.kb}m=Of.prototype;m.next=g("xa");
function Pf(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.A.join("/"),f=b(a.ob)+"{";f=P(a)?f+e:f+d;f=f+"}"+b(a.C);a.xa&&(a=Pf(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Pf(this);a+=b[0]+"\n"+b[1]+"\n";this.h.length&&(a+=this.h[0].toString());return a};function Hf(a){return P(a)?a:Hf(a.h[0])}function Lf(a){return P(a)?a:Lf(a.h[a.h.length-1])}
function Qf(a,b){b&&(b.ob=a);a&&(a.xa=b)}function Ef(a,b){for(var c=b.length,d=0,e=a=Jf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.A=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=Jf(a.o),Qf(a,f),a=f)}return e}function Rf(a){var b=a[0],c=Jf(b.o);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.a.push(a[b].a[0]);return c}
function Ff(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Rf(c);else{var d=c.length,e=0;b=Jf(a.o);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Rf(f);h.C=b;b.h.length&&(b.a.push(f[0].a[0]),Qf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Sf(this,a);if(P(this)){var c=Gf;this.o.Oa(this.a[b],a)&&(c=c.concat(this.A[b]));return c}b=this.o.Oa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.hb=function(a){var b=Sf(this,a);return this.o.Oa(this.a[b],a)?!0:P(this)?!1:this.h[b].hb(a)};m.remove=function(a,b){Tf(this,a,-1,b);return null===this.C?(a=this,1==this.h.length&&(a=this.h[0],a.C=null),a):this};function Uf(a){return P(a)?a.a[0]:Uf(a.h[0])}function Vf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Uf(a.h[b]))}
function Tf(a,b,c,d){var e=Sf(a,b),f=P(a);if(!f){var h=a.o.Oa(a.a[e],b)?e+1:e;if(Tf(a.h[h],b,h,d))Vf(a);else return!1}else if(!a.o.Oa(a.a[e],b))return!1;if(a.a.length>e&&a.o.Oa(a.a[e],b)){if(n(d)&&!a.o.La()&&f&&(h=a.A[e],d=xf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.o.X().remove(b,1),a.A[e].length))return!1;a.a.splice(e,1);f&&(f=a.o.La()?1:a.A[e].length,a.A.splice(e,1),a.o.X().remove(b,f))}if(256>a.a.length&&null!==a.C){a:{if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.ob&&
256<a.ob.a.length)b=a.ob,d=a.ob.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.A:a.h;P(a)?h=b.A:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Vf(b),Vf(a));b=!0}b||Wf(a,c)}return!0}
function Wf(a,b){var c;if(a.xa&&511>a.xa.a.length){var d=a.xa;var e=c=0}else a.ob&&(d=a.ob,c=d.a.length,e=P(d)?d.A.length:d.h.length);c=[c,0].concat(a.a);Array.prototype.splice.apply(d.a,c);c=null;P(a)?c=a.A:(c=a.h,c.forEach(function(a){a.C=d}));c=[e,0].concat(c);Array.prototype.splice.apply(P(d)?d.A:d.h,c);Qf(a.ob,a.xa);P(d)||Vf(d);-1!=b&&(a.C.a.splice(b,1),a.C.h.splice(b,1))}
m.zb=function(a,b,c){var d=Sf(this,a);if(P(this)){if(this.o.Oa(this.a[d],a)){if(c)this.o.X().remove(a,this.o.La()?1:this.A[d].length),this.A[d]=this.o.La()?b:[b];else{if(this.o.La())throw new D(201,this.o.getName(),JSON.stringify(a));if(!zf(this.A[d],b))throw new D(109);}this.o.X().add(a,1);return this}this.a.splice(d,0,a);this.A.splice(d,0,this.o.La()?b:[b]);this.o.X().add(a,1);512==this.a.length?(d=Jf(this.o),a=Jf(this.o),a.kb=1,a.a=[this.a[256]],a.h=[this,d],a.C=this.C,this.C=a,d.a=this.a.splice(256),
d.A=this.A.splice(256),d.C=a,Qf(d,this.xa),Qf(this,d),d=a):d=this;return d}d=this.o.Oa(this.a[d],a)?d+1:d;a=this.h[d].zb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Yf(this):this};
function Yf(a){var b=Jf(a.o),c=Jf(a.o);b.C=a.C;b.kb=a.kb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.C=b;c.kb=a.kb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Qf(c,a.xa);Qf(a,c);return b}function Sf(a,b){for(var c=0,d=a.a.length,e=a.o.gb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Ke=function(a){if(!P(this)){var b=Sf(this,a);this.o.Oa(this.a[b],a)&&b++;return this.h[b].Ke(a)}return this};
m.Je=function(a){if(!P(this)){var b=Sf(this,a);this.o.Oa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Je(a)}return this};
m.Sa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.o.gb(),f=0,h=this.a.length-1,l=this.a,p=d(e.ub(l[f],a)),L=d(e.ub(l[h],a));if(1!=p&&(-1!=p||-1!=L)){var ra=function(a,b){b=a+b>>1;return b==a?b+1:b},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(l[b],a));if(0==h)return b;if(1==h)return-1;h=ra(b,c);if(h==c)return 0==f?c:-1;var p=d(e.ub(l[h],a));return 0==p?ba(b,h,p):-1==p?ba(h+1,c,f):ba(b+1,h,p)},yb=function(b,c){if(b>=c)return b;var f=d(e.ub(l[c],a));if(0==f)return c;
if(-1==f)return b;f=ra(b,c);if(f==c)return b;var h=d(e.ub(l[f],a));return 0==h?yb(f,c):1==h?yb(b,f-1):-1};0!=p&&(f=ba(f+1,h,L));-1!=f&&(h=yb(f,h),-1!=h&&h>=f&&Zf(this,b,c,f,h+1))}};function If(a,b,c,d){if(a.o.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Zf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)If(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.o.La()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--}else if(this.o.La())b[a.ne++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Nf(a,b){var c=b.X();a=a.map(function(a){var d=new Of(a.id(),b);d.a=a.l[0];d.A=a.l[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.A[e].length)});return d});for(var d=0;d<a.length-1;++d)Qf(a[d],a[d+1]);return 1<a.length?Ff(a[0]):a[0]}m.ed=function(a){return this.o.gb().ed(this.a[0],a)};function $f(a){this.Tc=0==a?ag:bg;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?cg:dg}function bg(a,b){return a>b?1:a<b?-1:0}function ag(a,b){return bg(b,a)}function dg(a,b){return xd(a,b)}function cg(a,b){return xd(b,a)}m=$f.prototype;m.ub=function(a,b){var c=this.Xd(b),d=[c.from==F,c.m==F];d[0]||(b=this.Tc(a,c.from),d[0]=c.ea?1==b:-1!=b);d[1]||(b=this.Tc(a,c.m),d[1]=c.na?-1==b:1!=b);return d};m.compare=function(a,b){return this.Tc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ab=function(a,b){a=this.ub(a,b);return a[0]&&a[1]};m.ed=function(a,b){return this.Ab(a,b)};m.pf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return this.Xd(a).from==F};m.pd=function(a){a=this.Xd(a);return[a.from,a.m]};m.Jd=function(a){return null!==a};m.Ud=k(1);
m.toString=function(){return this.compare==ag?"SimpleComparator_DESC":"SimpleComparator_ASC"};function eg(a){$f.call(this,a);this.Tc=0==a?fg:gg}r(eg,$f);function gg(a,b){return null===a?null===b?0:-1:null===b?1:bg(a,b)}function fg(a,b){return gg(b,a)}eg.prototype.Ab=function(a,b){return null===a?sd(b):eg.eb.Ab.call(this,a,b)};eg.prototype.Fb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};eg.prototype.min=function(a,b){var c=this.Fb(a,b);null===c&&(c=eg.eb.min.call(this,a,b));return c};
eg.prototype.max=function(a,b){var c=this.Fb(a,b);null===c&&(c=eg.eb.max.call(this,a,b));return c};function hg(a){this.pa=a.map(function(a){return new $f(a)})}function ig(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=hg.prototype;m.compare=function(a,b){return ig(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return ig(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return ig(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ab=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Ab(a[d],b[d]);return c};m.ed=function(a,b){return this.pa[0].Ab(a[0],b[0])};
m.pf=function(a){var b=a.filter(function(a){return a.every(ia)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].ce(a[d],b[d]);return c}.bind(this))};m.Sd=function(a){return this.pa[0].Sd(a[0])};
m.pd=function(a){var b=a.map(function(a,b){return this.pa[b].pd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].pd(a)[1]},this);return[b,a]};m.Jd=function(a){return a.every(function(a,c){return this.pa[c].Jd(a)},this)};m.Ud=function(){return this.pa.length};function jg(a){hg.call(this,a);this.pa=a.map(function(a){return new eg(a)})}r(jg,hg);function kg(a){if(1==a.f.length)return new $f(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.fc()})?new jg(b):new hg(b)};function lg(a){this.fa=a;this.mb=B();this.Kc=new Bf;this.ya=new Bf}m=lg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.mb.add(b),this.Kc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.mb.clear(),this.Kc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Kc.remove(a,1)):(this.mb.clear(),this.Kc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.mb):this.fa.get(a)};m.Vc=function(a){return this.fa.Vc(a)};
m.X=function(){Cf(this.ya,[this.fa.X(),this.Kc]);return this.ya};m.Sa=function(a,b,c,d){b=this.fa.Sa(a,b,c,d);return null!=a?b:b.concat(C(this.mb))};m.clear=function(){this.mb.clear();this.fa.clear()};m.hb=function(a){return null===a?0!=this.mb.size:this.fa.hb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new fc(-2,C(this.mb))].concat(this.fa.Ia())};m.gb=function(){return this.fa.gb()};
function mg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new lg(a);d.forEach(function(a){e.mb.add(a)});return e}m.La=function(){return this.fa.La()};function ng(a){this.w=a;this.qb=B();this.Z=new $f(1)}m=ng.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.hb(a)?[a]:[]};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
m.Fb=function(a){if(0==this.qb.size)return null;var b=C(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Vc=function(){return this.qb.size};m.Sa=function(a,b,c,d){var e=a||[vd()];a=C(this.qb).filter(function(a){return e.some(function(b){return this.Z.Ab(a,b)},this)},this);return Af(a,b,c,d)};m.clear=function(){this.qb.clear()};m.hb=function(a){return this.qb.has(a)};m.Ia=function(){return[new fc(0,C(this.qb))]};m.gb=g("Z");
function og(a,b){var c=new ng(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.La=k(!0);m.X=function(){var a=new Bf;a.ia=this.qb.size;return a};function pg(a){this.Na=a.b(tc);this.B=a.b(vc);this.U=a.b(uc)}pg.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Bb()?qg(this,a):rg(this,a)).then(c)}.bind(this);return c()};function rg(a,b){var c=a.Na.Db(0,[b]);a=c.H(b.getName(),b.ib.bind(b),0).get([]).then(function(a){this.U.Ub(b.getName(),a);sg(this,b,a)}.bind(a));c.ka();return a}
function sg(a,b,c){var d=a.B.jc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})})}function qg(a,b){var c=a.Na.Db(0,[b]),d=c.H(b.getName(),b.ib,0).get([]).then(function(a){this.U.Ub(b.getName(),a)}.bind(a));a=b.Ca().map(function(a){return tg(this,a,c)},a).concat(ug(a,b,c));c.ka();return fb(a.concat(d))}
function tg(a,b,c){c=c.H(b.j(),hc,1);var d=kg(b);return c.get([]).then(function(a){if(0<a.length){if(vg(b)){var c=Mf.bind(void 0,d,b.j(),b.zc);a=mg(c,a)}else a=Mf(d,b.j(),b.zc,a);this.B.set(b.kc,a)}}.bind(a))}function ug(a,b,c){return c.H(df(b),hc,1).get([]).then(function(a){0<a.length&&(a=og(df(b),a),this.B.set(b.getName(),a))}.bind(a))};function wg(){this.Y=x();this.jc=x()}wg.prototype.Da=function(a){a.oa().forEach(function(a){var b=[];this.jc.set(a.getName(),b);var d=df(a);if(null===this.get(d)){var e=new ng(d);b.push(e);this.Y.set(d,e)}a.Ca().forEach(function(a){var c=kg(a);c=new Df(a.j(),c,a.zc);c=vg(a)&&1==a.f.length?new lg(c):c;b.push(c);this.Y.set(a.j(),c)},this)},this);return v()};wg.prototype.get=function(a){return this.Y.get(a)||null};
wg.prototype.set=function(a,b){var c=this.jc.get(a)||null;null===c&&(c=[],this.jc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Y.set(b.getName(),b)};function xg(a,b){var c=[],d=null,e=null;ee(a,function(a){var f=b(a);null==a.getParent()?e=f:K(d,f);var l=a.getParent();null!==l&&J(l).length==J(d).length&&(l=c.indexOf(d),-1!=l&&c.splice(l,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function yg(a){return zg(a,function(a){return null===a.h})}
function Ag(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||be(b,d,c+f)});return{parent:b,children:d}}function Bg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function Cg(a){var b=ae(a,0);Ag(a);Bg(b,a);return b}
function Dg(a,b,c){var d=ae(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;Ag(a);e.forEach(function(e,h){if(b(e)){var f=c(a);ce(d,h);K(f,e);be(d,f,h)}});return d}function Eg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),ce(e,a),be(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function zg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Fg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ee(a,function(a){for(var b=0;b<$d(a);b++)d+="-";d+=c(a)});return d};function Gg(a){fe.call(this);this.nb=a;this.Ta=!1}r(Gg,fe);m=Gg.prototype;m.Lb=function(){return xg(this,function(a){if(a instanceof Gg){var b=new Gg(a.nb);b.Ta=a.Ta;a=a.V();b.ra=a;return b}return a.Lb()})};m.jb=function(a){var b=a||[];ee(this,function(a){a!=this&&a.jb(b)}.bind(this));a=B(b);return C(a)};m.s=function(a){var b=null!=a?a:B();ee(this,function(a){a!=this&&a.s(b)}.bind(this));return b};m.qd=function(a){this.Ta!=a&&(this.Ta=a,this.nb="and"==this.nb?"or":"and",J(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Hg(this,b)};function Hg(a,b){return"and"==a.nb?Gd(b):Hd(b)}m.toString=function(){return"combined_pred_"+this.nb.toString()};m.qe=function(){if("or"==this.nb){var a=new zd;J(this).forEach(function(b){b=b.qe().yb();a.add(b)});return a}return new zd};m.fd=function(){return"or"==this.nb?Ig(this):!1};
function Ig(a){var b=null;return J(a).every(function(a){if(!(a instanceof ie&&a.fd()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function Jg(a,b,c){fe.call(this);this.ga=a;this.ma=b;this.D=c;this.Yd=null;a=Xd();this.sc=Yd(a,this.ga.F(),this.D);this.kg=a.Ue.get(this.ga.F())||null}r(Jg,fe);m=Jg.prototype;m.Lb=function(){var a=new Jg(this.ga,this.ma,this.D),b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.s=function(a){a=null!=a?a:B();a.add(this.ga.H());a.add(this.ma.H());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Jg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.sc(b,a)},this);return new G(b,a.s())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.D+" "+this.ma.j()+")"};
function Kg(a,b,c){if(-1!=b.s().indexOf(Ld(a.ga.H()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.sc=Yd(Xd(),a.ga.F(),a.D)}return[b,d]}return[d,b]}function Lg(a){var b={};a.jb().forEach(function(a){b[a.getName()]=null});return b}
function Mg(a,b,c){null===a.Yd&&(a.Yd=Lg(a.ma.H()));var d=new Jd(new fc(-1,a.Yd),!1);return Nd(b,c,d,[Ld(a.ma.H())])}
function Ng(a,b,c,d){var e=[b,c];d||(e=Kg(a,b,c));b=e[0];c=e[1];e=b;var f=c,h=a.ga,l=a.ma;d&&(e=c,f=b,h=a.ma,l=a.ga);var p=new Vc,L=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ra=e.s(),ba=f.s();f.entries.forEach(function(a){var b=H(a,l),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Nd(a,ba,b,ra);L.push(b)}):d&&L.push(Mg(this,a,ba))}.bind(a));a=b.s().concat(c.s());return new G(L,a)}
function Og(a,b,c,d,e){function f(a,b){b=new Jd(b,1<ra.length);a=Nd(a,ba,b,ra);L.push(a)}var h=d.$f.H(),l=b,p=c;-1!=b.s().indexOf(Ld(h))&&(l=c,p=b);var L=[],ra=p.s(),ba=l.s();l.entries.forEach(function(a){var b=this.kg(H(a,d.sg));b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):wf(e,b).forEach(f.bind(null,a)))},a);a=l.s().concat(p.s());return new G(L,a)};function Pg(a,b,c){return null===b?new ie(a,b,c):n(b.j)?new Jg(a,b,c):new ie(a,b,c)};var Qg={};q("lf.schema.DataStoreType",Qg);Qg.INDEXED_DB=0;Qg.MEMORY=1;Qg.LOCAL_STORAGE=2;Qg.FIREBASE=3;Qg.WEB_SQL=4;Qg.OBSERVABLE_STORE=5;function Rg(a,b,c,d){this.kc=a;this.name=b;this.zc=c;this.f=d}Rg.prototype.j=function(){return this.kc+"."+this.name};function vg(a){return a.f.some(function(a){return a.ba.fc()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.md=d;this.Ja=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;
function Ld(a){return a.Ja||a.w}Q.prototype.oc=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Eg=this.Eg;return b};Q.prototype.as=Q.prototype.oc;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.ib;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.jb=g("J");Q.prototype.getColumns=Q.prototype.jb;Q.prototype.getConstraint=Q.prototype.Ie;Q.prototype.Bb=g("md");Q.prototype.persistentIndex=Q.prototype.Bb;function df(a){return a.w+".#"};function R(a,b){this.child=a;this.Jb=b;this.Ja=null}m=R.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.j=function(){return this.Jb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.F=function(){return this.child.F()};m.Ca=function(){return[]};m.Ba=k(null);m.fc=k(!1);m.oc=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.oc;
function Sg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Tg(a){this.Ja=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Tg.prototype;m.getName=k("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("S");m.F=k(4);m.Ca=function(){return[]};m.Ba=k(null);m.fc=k(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Ug(a){return new R(a||new Tg,"COUNT")}q("lf.fn.count",Ug);function Vg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Vg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Qf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Qf){case 1:return Wg(this,a,b);case 0:return Xg(this,a,b);default:return Yg(this,a,b)}};S.prototype.toString=k("dummy_node");S.prototype.Lc=function(){return this.toString()};function Yg(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function Wg(a,b,c){return ae(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Xg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Zg(a){S.call(this,0,1);this.xe=a}r(Zg,S);Zg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.j()}).toString()+")"};Zg.prototype.ca=function(a){a.forEach(function(a){$g(new ah(a,this.xe))},this);return a};function ah(a,b){this.Ma=a;this.J=b}
function $g(a){a.J.forEach(function(a){a=Sg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Sg(d).slice(-1)[0],f=d.child instanceof R?Dd(this.Ma,d.child):this.Ma;if(null!==f.Xa&&f.Xa.has(d.j()))break;f=bh(d.Jb,f,e);e=this.Ma;null===e.Xa&&(e.Xa=x());e.Xa.set(d.j(),f)}},a)}
function bh(a,b,c){var d=null;switch(a){case "MIN":d=ch(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=ch(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=dh(b,c);break;case "COUNT":d=eh(b,c);break;case "SUM":d=fh(b,c);break;case "AVG":a=eh(b,c);0<a&&(d=fh(b,c)/a);break;case "GEOMEAN":d=gh(b,c);break;default:d=hh(b,c)}return d}function ch(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function eh(a,b){return b instanceof Tg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function fh(a,b){return ch(a,b,function(a,b){return b+a})}function hh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:ub.apply(null,c)}function gh(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function dh(a,b){var c=x();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(y(c),a.s())};function ih(a,b){this.Ga=a;this.aa=b}ih.prototype.Za=g("Ga");ih.prototype.da=g("aa");function jh(){I.call(this)}r(jh,I);function kh(a,b){I.call(this);this.table=a;this.values=b}r(kh,jh);function lh(a,b){kh.call(this,a,b)}r(lh,kh);function mh(a){I.call(this);this.table=a}r(mh,jh);mh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function nh(a){I.call(this);this.table=a}r(nh,jh);nh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function oh(a){I.call(this);this.N=a}r(oh,jh);oh.prototype.toString=function(){return"select("+this.N.toString()+")"};function ph(a){I.call(this);this.table=a}r(ph,jh);ph.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function qh(){I.call(this)}r(qh,jh);qh.prototype.toString=k("cross_product");function rh(a,b){I.call(this);this.f=a;this.Nb=b}r(rh,jh);
rh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb){var b=this.Nb.map(function(a){return a.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function sh(a){I.call(this);this.M=a}r(sh,jh);sh.prototype.toString=function(){return"order_by("+se(this.M)+")"};function th(a){I.call(this);this.f=a}r(th,jh);th.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function uh(a){I.call(this);this.f=a}r(uh,jh);
uh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function vh(a){I.call(this);this.W=a}r(vh,jh);vh.prototype.toString=function(){return"limit("+this.W+")"};function wh(a){I.call(this);this.K=a}r(wh,jh);wh.prototype.toString=function(){return"skip("+this.K+")"};function xh(a,b){I.call(this);this.N=a;this.Pb=b}r(xh,jh);xh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.N.toString()+")"};function yh(){};function zh(){}r(zh,yh);zh.prototype.cb=function(a){this.G=a;this.sb(this.G);return this.G};zh.prototype.sb=function(a){if(a instanceof oh){var b=Ah(this,a.N);b=Bh(this,b);Eg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.sb(a)},this)};function Ah(a,b){if(0==J(b).length||"and"!=b.nb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return Ah(this,a)},a);return Fa(a)}
function Bh(a,b){var c=null,d=null;b.map(function(a,b){a=new oh(a);0==b?c=a:K(d,a);d=a},a);return[c,d]};function Ch(){}r(Ch,yh);Ch.prototype.cb=function(a,b){if(3>b.from.length)return a;this.G=a;this.sb(this.G);return this.G};Ch.prototype.sb=function(a){if(a instanceof qh)for(;2<J(a).length;){for(var b=new qh,c=0;2>c;c++){var d=ce(a,0);K(b,d)}be(a,b,0)}J(a).forEach(function(a){this.sb(a)},this)};function Dh(){S.call(this,0,0)}r(Dh,S);Dh.prototype.toString=k("cross_product");Dh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.s(),e=c.s(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var l=Nd(b.entries[f],d,c.entries[h],e);a.push(l)}b=b.s().concat(c.s());return[new G(a,b)]};function Eh(a,b){ve.call(this,a,b);this.Ha=a.b(xc);this.Gb=a.b(yc)}r(Eh,ve);Eh.prototype.getPriority=k(2);Eh.prototype.ae=function(a){0==this.F()?Fh(this,a):this.Ic()};function Fh(a,b){a.od.forEach(function(a,d){a instanceof re&&ye(this.Gb,a,b[d])},a)}Eh.prototype.Ic=function(){var a=Ae(this.Gb,this.da());0!=a.length&&(a=new xe(this.global,a),Be(this.Ha,a))};function Gh(a){me.call(this,a)}r(Gh,me);Gh.prototype.da=function(){var a=B();a.add(this.from);Hh(this,this.from.getName(),a);return a};function Hh(a,b,c){var d=Ih(a.ba.info(),b,1);Ih(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Hh(this,a.getName(),c)},a)}Gh.prototype.clone=function(){var a=new Gh(this.ba);pe(a,this);a.from=this.from;return a};Gh.prototype.bind=function(a){Gh.eb.bind.call(this,a);qe(this,a);return this};function Jh(a){me.call(this,a)}r(Jh,me);Jh.prototype.da=function(){var a=B();a.add(this.Ka);var b=this.ba.info();Kh(this.Ka.getName(),b.bf).forEach(a.add.bind(a));this.Zb&&Ih(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Jh.prototype.clone=function(){var a=new Jh(this.ba);pe(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Od?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
Jh.prototype.bind=function(a){Jh.eb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof Od?a[this.$b.Ba()]:this.$b.map(function(b){return b instanceof Od?a[b.Ba()]:b}));return this};function Lh(a){me.call(this,a)}r(Lh,me);Lh.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.ba.info();Mh(c,b).forEach(a.add.bind(a));Nh(c,b).forEach(a.add.bind(a));return a};Lh.prototype.clone=function(){var a=new Lh(this.ba);pe(a,this);a.table=this.table;a.set=this.set?Oh(this.set):this.set;return a};Lh.prototype.bind=function(a){Lh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Pc&&(b.value=a[b.Pc])});qe(this,a);return this};
function Oh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Ph(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+jc(b)+"'";default:return"'"+b.toString()+"'"}}function Qh(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Ka.jb();c+=" INTO "+a.Ka.getName()+"(";c+=d.map(function(a){return a.getName()}).join(", ");c+=") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Ph(c.F(),d)});return c+e.join(", ")+");"}).join("\n")}
function Rh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Sh(a,b,c,d){return a instanceof Od?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ph(c,a)}).join(", ")+")":"between"==b?Ph(c,a[0])+" AND "+Ph(c,a[1]):Ph(c,a).toString()}
function Th(a,b){return J(a).map(function(a){return"("+Uh(a,b)+")"}).join("and"==a.nb?" AND ":" OR ")}function Vh(a){return[a.ga.j(),Rh(a.D),a.ma.j()].join(" ")}function Uh(a,b){if(a instanceof ie){var c=a.I.j(),d=Rh(a.D);a=Sh(a.value,a.D,a.I.F(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Gg)return Th(a,b);if(a instanceof Jg)return Vh(a);throw new D(357,typeof a);}
function Wh(a,b){return(a=Uh(a,b))?" WHERE "+a:""}function Xh(a,b){var c="UPDATE "+a.table.getName()+" SET ";c+=a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Pc?b+"?"+a.Pc.toString():b+Ph(a.I.F(),a.value).toString()}).join(", ");a.u&&(c+=Wh(a.u,b));return c+";"}
function Yh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ja?a.j()+" AS "+a.Ja:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.ab&&0!=a.ab.size?c+=Zh(a,b):(c+=a.from.map($h).join(", "),a.u&&(c+=Wh(a.u,b)));a.M&&(b=a.M.map(function(a){return a.I.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function $h(a){return Ld(a)!=a.getName()?a.getName()+" AS "+Ld(a):a.getName()}function Zh(a,b){for(var c=zg(a.u,function(a){return a instanceof Jg}),d=c.map(Vh),e=$h(a.from[0]),f=1;f<a.from.length;f++){var h=$h(a.from[f]);e=a.ab.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h);e+=" ON ("+d[d.length-f]+")"}a=a.u;a=0<J(a).length?ae(a,0):a;a instanceof Jg||(e+=" WHERE "+Uh(a,b));return e}
function ai(a,b){b=b||!1;a=a.query.clone();if(a instanceof Jh)return Qh(a,b);if(a instanceof Gh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Wh(a.u,b));return c+";"}if(a instanceof Lh)return Xh(a,b);if(a instanceof re)return Yh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Dg=a.b(wc);this.Ha=a.b(xc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Ya()}catch(a){return cb(a)}return new u(function(a,b){var c=new Eh(this.global,[this.xc()]);Be(this.Ha,c).then(function(b){a(Bd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Sf=function(){var a=function(a){return a.Lc(this.query)+"\n"}.bind(this);return Fg(bi(this).Za(),a)};T.prototype.explain=T.prototype.Sf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Lg=function(a){return ai(this,a)};T.prototype.toSql=T.prototype.Lg;T.prototype.Ya=aa();function bi(a){if(null==a.cf){var b=a.Dg;var c=a.query,d=b.og.create(c);b=b.Ag.create(d,c);a.cf=b}return a.cf}T.prototype.xc=function(){return{context:this.query.clone(),de:bi(this)}};function ci(a){T.call(this,a,new Gh(a.b(A)))}r(ci,T);q("lf.query.DeleteBuilder",ci);ci.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};ci.prototype.from=ci.prototype.from;ci.prototype.u=function(a){this.Ad();this.query.u=a;return this};ci.prototype.where=ci.prototype.u;ci.prototype.Ad=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
ci.prototype.Ya=function(){ci.eb.Ya.call(this);if(null==this.query.from)throw new D(517);};function di(a,b){T.call(this,a,new Jh(a.b(A)));this.query.Zb=b||!1}r(di,T);q("lf.query.InsertBuilder",di);di.prototype.Ya=function(){di.eb.Ya.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new D(518);if(a.Zb&&null===a.Ka.Kb.nd)throw new D(519);};di.prototype.Ka=function(a){if(null!=this.query.Ka)throw new D(520);this.query.Ka=a;return this};di.prototype.into=di.prototype.Ka;
di.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Od||a.some(function(a){return a instanceof Od})?this.query.$b=a:this.query.values=a;return this};di.prototype.values=di.prototype.values;function ei(a){return fi("and",Array.prototype.slice.call(arguments))}q("lf.op.and",ei);q("lf.op.or",function(a){return fi("or",Array.prototype.slice.call(arguments))});function fi(a,b){var c=new Gg(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new re(a.b(A)));this.He=this.vd=!1;this.query.f=b;gi(this);hi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.Ya=function(){U.eb.Ya.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Qb)&&!n(a.W)||n(a.Wb)&&!n(a.K))throw new D(523);null!=this.query.qa?ii(this):ji(this)};function gi(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function ii(a){if(a.query.qa.some(function(a){a=a.F();return 6==a||0==a}))throw new D(525);}function ji(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function hi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ki(a.Jb,a.F()))throw new D(527,a.j());},a)}function li(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.He)throw new D(515);this.He=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){li(this,548);if(this.vd)throw new D(516);this.vd=!0;mi(this,a);return this};U.prototype.where=U.prototype.u;function mi(a,b){null!=a.query.u&&(b=ei(b,a.query.u));a.query.u=b}
U.prototype.dg=function(a,b){li(this,542);if(this.vd)throw new D(547);this.query.from.push(a);mi(this,b);return this};U.prototype.innerJoin=U.prototype.dg;U.prototype.lg=function(a,b){li(this,542);if(!(b instanceof Jg))throw new D(541);if(this.vd)throw new D(547);this.query.from.push(a);null==this.query.ab&&(this.query.ab=B());var c=b;Ld(a)!=Ld(b.ma.H())&&(c=b.reverse());this.query.ab.add(c.V());mi(this,c);return this};U.prototype.leftOuterJoin=U.prototype.lg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Qb))throw new D(528);if(a instanceof Od)this.query.Qb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Wb))throw new D(529);if(a instanceof Od)this.query.Wb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){li(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){li(this,549);if(null!=this.query.qa)throw new D(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function ki(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Sc=null;return a};U.prototype.clone=U.prototype.clone;function ni(a,b){T.call(this,a,new Lh(a.b(A)));this.query.table=b}r(ni,T);q("lf.query.UpdateBuilder",ni);ni.prototype.set=function(a,b){a={Pc:b instanceof Od?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};ni.prototype.set=ni.prototype.set;ni.prototype.u=function(a){this.Ad();this.query.u=a;return this};ni.prototype.where=ni.prototype.u;ni.prototype.Ad=function(){if(null!=this.query.u)throw new D(516);};
ni.prototype.Ya=function(){ni.eb.Ya.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Od}))throw new D(501);};function oi(a){this.query=a;this.Ga=null}oi.prototype.ec=function(){null===this.Ga&&(this.Ga=this.Xc());return this.Ga};function pi(a){oi.call(this,a)}r(pi,oi);pi.prototype.Xc=function(){return this.query.Zb?new lh(this.query.Ka,this.query.values):new kh(this.query.Ka,this.query.values)};function qi(a){oi.call(this,a)}r(qi,oi);qi.prototype.Xc=function(){var a=new nh(this.query.table),b=null!=this.query.u?new oh(this.query.u.Lb()):null,c=new ph(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function ri(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}ri.prototype.ec=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function si(a,b){oi.call(this,a);this.Tb=b}r(si,oi);si.prototype.Xc=function(){var a=new mh(this.query.from),b=null!=this.query.u?new oh(this.query.u.Lb()):null,c=new ph(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new ri(a,this.query,this.Tb)).ec()};function ti(){}r(ti,yh);ti.prototype.cb=function(a,b){if(2>b.from.length)return a;this.G=a;this.sb(this.G,b);return this.G};ti.prototype.sb=function(a,b){if(a instanceof oh&&a.N instanceof Jg){var c=a.N.V(),d=ae(a,0);d instanceof qh&&(c=null!=b.ab&&b.ab.has(c),c=new xh(a.N,c),Eg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.sb(a,b)},this)};function ui(){this.Oc=B()}r(ui,yh);ui.prototype.cb=function(a,b){if(!n(b.u))return a;this.Oc.clear();this.G=a;this.sb(this.G,b);this.Oc.clear();return this.G};ui.prototype.sb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Oc.has(a)){if(a instanceof oh){var e=a.N.s(),h=function(a){return vi(this,a,e)}.bind(this);h=wi(this,b,a,h);this.Oc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function wi(a,b,c,d){var e=c;if(xi(b,c))e=Cg(c),wi(a,b,c,d);else if(yi(c)){var f=[];e=Dg(c,d,function(a){a=new oh(a.N);f.push(a);return a});f.forEach(function(a){wi(this,b,a,d)},a)}return e}function vi(a,b,c){var d=B();yg(b).forEach(function(a){d.add(a.table)},a);b instanceof ph&&d.add(b.table);return zc(d,c)}function yi(a){a=ae(a,0);return a instanceof qh||a instanceof xh}
function xi(a,b){var c=ae(b,0);if(!(c instanceof oh))return!1;if(null==a.ab)return!0;b=b.N instanceof Jg;a=a.ab.has(c.N.V());return b||!a};function zi(a,b){oi.call(this,a);this.Tb=b;this.ef=this.Ye=this.nf=this.af=this.ye=this.Ne=this.mf=this.Ee=this.qf=null}r(zi,oi);
zi.prototype.Xc=function(){Ai(this);2<=this.query.from.length&&(this.Ee=new qh);this.mf=null!=this.query.u?new oh(this.query.u.Lb()):null;this.query.M&&(this.af=new sh(this.query.M));null!=this.query.K&&0<this.query.K&&(this.nf=new wh(this.query.K));null!=this.query.W&&(this.Ye=new vh(this.query.W));null!=this.query.qa&&(this.Ne=new uh(this.query.qa));Bi(this);this.ef=new rh(this.query.f||[],this.query.qa||null);var a=Ci(this);return(new ri(a,this.query,this.Tb)).ec()};
function Ci(a){for(var b=[a.Ye,a.nf,a.ef,a.af,a.ye,a.Ne,a.mf,a.Ee],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.qf.forEach(function(a){K(b[c],a)});return d}function Ai(a){a.qf=a.query.from.map(function(a){return new ph(a)},a)}function Bi(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.ye=new th(b))};function Di(){this.le=[new zh,new Ch,new ui,new ti];this.Kd=[new zh]}Di.prototype.create=function(a){if(a instanceof Jh)var b=new pi(a);else if(a instanceof Gh)b=new si(a,this.Kd);else if(a instanceof re)b=new zi(a,this.le);else if(a instanceof Lh)b=new qi(a);else throw new D(513);b=b.ec();return new ih(b,a.da())};function Ei(a){S.call(this,0,1);this.S=a}r(Ei,S);Ei.prototype.toString=function(){return"delete("+this.S.getName()+")"};Ei.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.ua});b.remove(this.S,a);return[Fd()]};function Fi(a,b){S.call(this,0,-1);this.table=b;this.B=a.b(vc)}r(Fi,S);Fi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Fi.prototype.ca=function(){var a=this.B.get(df(this.table)),b=new G([],[this.table.getName()]),c=Ug();a=a.X().ia;null===b.Xa&&(b.Xa=x());b.Xa.set(c.j(),a);return[b]};function Gi(a,b){S.call(this,0,-1);this.U=a.b(uc);this.B=a.b(vc);this.table=b}r(Gi,S);Gi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};Gi.prototype.ca=function(){var a=this.B.get(df(this.table)).Sa();return[Id(wf(this.U,a),[Ld(this.table)])]};function Hi(a){this.c=a}r(Hi,yh);Hi.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;a=zg(a,function(a){return a instanceof Gi})[0];b=new Fi(this.c,a.table);Eg(a,a,b,b);return this.G};Hi.prototype.Cd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Jb&&a.child instanceof Tg):!1};function Ii(a){S.call(this,0,1);this.Me=a}r(Ii,S);Ii.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.j()}).toString()+")"};Ii.prototype.ca=function(a){return Ji(this,a[0])};function Ji(a,b){var c=new Vc,d=function(a){return this.Me.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.s())},a)};function Ki(a,b,c){S.call(this,0,0);this.B=a.b(vc);this.U=a.b(uc);this.N=b;this.Pb=c;this.yd="eq"==this.N.D?0:2;this.Pe=null}r(Ki,S);var Li=["hash","index_nested_loop","nested_loop"];Ki.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+Li[this.yd]+", "+this.N.toString()+")"};
Ki.prototype.ca=function(a){switch(this.yd){case 0:return[Ng(this.N,a[0],a[1],this.Pb)];case 1:return[Og(this.N,a[0],a[1],this.Pe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=Kg(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.s(),h=a.s(),l=c.entries.length,p=a.entries.length,L=p+256-1>>8,ra=0;ra<L;){for(var ba=0;ba<l;ba++){var yb=!1,Xf=H(c.entries[ba],b.ga);if(null!==Xf)for(var Ni=Math.min(ra+1<<8,p),zb=ra<<8;zb<Ni;zb++)if(b.sc(Xf,H(a.entries[zb],b.ma))){yb=!0;var Pc=Nd(c.entries[ba],
f,a.entries[zb],h);e.push(Pc)}d&&!yb&&e.push(Mg(b,c.entries[ba],f))}ra++}b=c.s().concat(a.s());return[new G(e,b)]}};function Mi(a,b){a.yd=1;var c=a.B.get(b.Ba().j());a.Pe={$f:b,sg:b==a.N.ga?a.N.ma:a.N.ga,index:c}};function Oi(a){S.call(this,0,-1);this.ff=a}r(Oi,S);Oi.prototype.toString=function(){return"no_op_step("+this.ff[0].s().join(",")+")"};Oi.prototype.ca=g("ff");function Pi(){}r(Pi,yh);Pi.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;zg(a,function(a){return a instanceof Ki}).forEach(this.Cg,this);return this.G};Pi.prototype.Cd=function(a){return 1<a.from.length};
Pi.prototype.Cg=function(a){if("eq"==a.N.D&&!a.Pb){var b=function(b){if(!(b instanceof Gi))return null;b=Ld(b.table)==Ld(a.N.ma.H())?a.N.ma:a.N.ga;return null===b.Ba()?null:b},c=b(ae(a,0));b=b(ae(a,1));if(null!==c||null!==b){b=null===b?c:b;Mi(a,b);var d=new G([],[Ld(b.H())]);de(a,new Oi([d]),b==c?0:1)}}};function Qi(a){a=a.map(function(a){return a.yb()});a=Bb.apply(null,a);var b=[];Ab(a,function(a){b.push(a)});return b}function Ri(a){this.Ob=a}Ri.prototype.Yc=function(){return 1==this.Ob.f.length?[vd()]:[this.Ob.f.map(function(){return vd()})]};function Si(a,b){this.Ob=a;this.Fa=b;this.Gd=this.We=null}
function Ti(a,b){var c=x();a.Fa.keys().forEach(function(a){var d=this.Fa.get(a).map(function(a){return ne(b,a)},this),f=new zd([vd()]);d.forEach(function(a){f=Ad(f,a.qe())});c.set(a,f)},a);return c}Si.prototype.Yc=function(a){if(this.We==a)return this.Gd;for(var b=Ti(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new zd([vd()]))}this.Gd=1==this.Ob.f.length?y(b)[0].yb():Qi(Ui(this,b));this.We=a;return this.Gd};
function Ui(a,b){var c=x(),d=0;a.Ob.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return ec(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Vi(a,b){this.sd=b;this.B=a.b(vc)}function Wi(a){a=a.B.get(df(a.sd));return Math.floor(.02*a.X().ia)}function Xi(a,b,c){c=c.filter(a.gg,a);if(0==c.length)return null;a=Yi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Zi(c,b);return e<d?(d=e,c):a},null)}
function Yi(a,b){return a.sd.Ca().map(function(a){a=new $i(this.B,a);aj(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,c=!0,f=0;f<a.$a.f.length;f++){var h=a.Fa.has(a.$a.f[f].ba.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Vi.prototype.gg=function(a){return a instanceof ie?!a.fd()||a.I.H()!=this.sd||"in"==a.D&&a.value.length>Wi(this)?!1:!0:a instanceof Gg?a.fd()&&ae(a,0).I.H()==this.sd?J(a).length<=Wi(this):!1:!1};
function $i(a,b){this.B=a;this.$a=b;this.ag=B(this.$a.f.map(function(a){return a.ba.getName()}));this.Vd=this.Fa=null}function bj(a){null===a.Vd&&(a.Vd=new Si(a.$a,a.Fa));return a.Vd}function aj(a,b){b.forEach(function(a){var b=a.jb()[0].getName();this.ag.has(b)&&(null===this.Fa&&(this.Fa=new Vc),this.Fa.set(b,a.V()))},a)}function Zi(a,b){b=bj(a).Yc(b);var c=a.B.get(a.$a.j());return b.reduce(function(a,b){return a+c.Vc(b)},0)};function cj(a,b,c,d){S.call(this,0,-1);this.B=a.b(vc);this.index=b;this.Ve=c;this.je=d;this.Nc=this.Mc=!1}r(cj,S);cj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Mc?", limit:?":"")+(this.Nc?", skip:?":"")+")"};cj.prototype.Lc=function(a){var b=this.toString(),c=this.Ve.Yc(a);b=b.replace("?",c.toString());this.Mc&&(b=b.replace("?",a.W.toString()));this.Nc&&(b=b.replace("?",a.K.toString()));return b};
cj.prototype.ca=function(a,b,c){a=this.Ve.Yc(c);b=this.B.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&wd(a[0])?Af(b.get(a[0].from),!1,this.Mc?c.W:void 0,this.Nc?c.K:void 0):b.Sa(a,this.je,this.Mc?c.W:void 0,this.Nc?c.K:void 0)).map(function(a){return new fc(a,{})},this);return[Id(c,[this.index.kc])]};function dj(){S.call(this,0,0)}r(dj,S);dj.prototype.toString=k("multi_index_range_scan()");
dj.prototype.ca=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=y(b);return[new G(c,a[0].s())]};function ej(a){S.call(this,0,1);this.hc=a}r(ej,S);ej.prototype.toString=k("select(?)");ej.prototype.Lc=function(a){a=ne(a,this.hc);return this.toString().replace("?",a.toString())};ej.prototype.ca=function(a,b,c){return[ne(c,this.hc).eval(a[0])]};function fj(a,b){S.call(this,0,1);this.U=a.b(uc);this.S=b}r(fj,S);fj.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};fj.prototype.ca=function(a){return[Id(wf(this.U,Cd(a[0])),[Ld(this.S)])]};function gj(a){this.c=a}r(gj,yh);gj.prototype.cb=function(a,b){this.G=a;zg(a,function(a){return a instanceof Gi}).forEach(function(a){var c=hj(a);if(0!=c.length){var e=Xi(new Vi(this.c,a.table),b,c.map(function(a){return ne(b,a.hc)}));if(null!==e){var f=x();c.forEach(function(a){f.set(a.hc,a)},this);this.G=ij(this,e,f,a)}}},this);return this.G};function hj(a){var b=[];for(a=a.getParent();a;){if(a instanceof ej)b.push(a);else if(a instanceof Ki)break;a=a.getParent()}return b}
function ij(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(Ag);b=new cj(a.c,b.$a,bj(b),!1);a=new fj(a.c,d.table);K(a,b);Eg(d,d,a,b);return b.Za()};function jj(a,b){S.call(this,0,-1);this.B=a.b(vc);this.S=b}r(jj,S);jj.prototype.toString=function(){return"insert("+this.S.getName()+")"};jj.prototype.ca=function(a,b,c){kj(this.S,c.values,this.B);b.zb(this.S,c.values);return[Id(c.values,[this.S.getName()])]};function kj(a,b,c){a=a.Kb.nd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).X().Bc;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function lj(a,b){S.call(this,0,-1);this.B=a.b(vc);this.S=b}r(lj,S);lj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};lj.prototype.ca=function(a,b,c){kj(this.S,c.values,this.B);b.Rd(this.S,c.values);return[Id(c.values,[this.S.getName()])]};function mj(){S.call(this,0,1)}r(mj,S);mj.prototype.toString=k("limit(?)");mj.prototype.Lc=function(a){return this.toString().replace("?",a.W.toString())};mj.prototype.ca=function(a,b,c){a[0].entries.splice(c.W);return a};function nj(a){S.call(this,0,1);this.M=a}r(nj,S);m=nj.prototype;m.toString=function(){return"order_by("+se(this.M)+")"};m.ca=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Vg(this.M[d].I);if(null!==b.Xa&&b.Xa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Dd(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Fg.bind(this));return a};
m.Z=function(a,b){var c=-1;do{c++;var d=this.M[c].I;var e=this.M[c].order;var f=a(d);d=b(d)}while(f==d&&c+1<this.M.length);a=f<d?-1:f>d?1:0;return 1==e?a:-a};m.Fg=function(a,b){return this.Z(function(b){return b instanceof R?Dd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Dd(b,a):H(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function oj(a,b){this.Ma=a;this.J=b}function pj(a){return a.J.some(function(a){return a instanceof R},a)?qj(a):rj(a)}function qj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Jb)return a=Dd(a.Ma,a.J[0]).entries.map(function(a){var b=new Jd(new fc(-1,{}),1<this.Ma.L.size);Md(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new Jd(new fc(-1,{}),1<a.Ma.L.size);a.J.forEach(function(a){var c=a instanceof R?Dd(this.Ma,a):H(this.Ma.entries[0],a);Md(b,a,c)},a);return new G([b],a.Ma.s())}
function rj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(a,e){b[e]=new Jd(new fc(a.ua.id(),{}),c);this.J.forEach(function(c){Md(b[e],c,H(a,c))},this)},a);return new G(b,a.Ma.s())}function sj(a,b){var c=a.map(function(a){return pj(new oj(a,b)).entries[0]});return new G(c,a[0].s())};function tj(a,b){S.call(this,0,1);this.f=a;this.Nb=b}r(tj,S);tj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb){var b=this.Nb.map(function(a){return a.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};tj.prototype.ca=function(a){0==a.length?a=[Fd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:pj(new oj(a,this.f))]):a=[sj(a,this.f)];return a};function uj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function vj(){S.call(this,0,1)}r(vj,S);vj.prototype.toString=k("skip(?)");vj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};vj.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].s())]};function wj(){}r(wj,yh);wj.prototype.cb=function(a,b){if(!n(b.W)&&!n(b.K))return a;var c=xj(a);if(null===c)return a;zg(a,function(a){return a instanceof mj||a instanceof vj}).forEach(function(a){a instanceof mj?c.Mc=!0:c.Nc=!0;Ag(a)},this);return c.Za()};function xj(a){a=zg(a,function(a){return a instanceof cj},function(a){return a instanceof tj&&uj(a)||a instanceof nj||1!=J(a).length||a instanceof ej});return 0<a.length?a[0]:null};function yj(a){this.c=a}r(yj,yh);yj.prototype.cb=function(a,b){this.G=a;var c=zj(this,b);if(0==c.length)return this.G;var d=0;do{var e=c[d++];a=Aj(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.G;b=Bj(this,a[0].$a.kc);return null===b?this.G:this.G=Cj(this,e,b,a)};function zj(a,b){return zg(a.G,function(a){if(!(a instanceof ej))return!1;a=ne(b,a.hc);return a instanceof Gg&&"or"==a.nb})}
function Bj(a,b){return zg(a.G,function(a){return a instanceof Gi&&a.table.getName()==b})[0]||null}function Aj(a,b,c){b=ne(c,b.hc);var d=b.s();if(1!=d.size)return null;d=C(d)[0];var e=new Vi(a.c,d),f=null;return J(b).every(function(a){a=Xi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Cj(a,b,c,d){var e=new fj(a.c,c.table),f=new dj;K(e,f);d.forEach(function(a){a=new cj(this.c,a.$a,bj(a),!1);K(f,a)},a);Ag(b);Eg(c,c,e,f);return f.Za()};function Dj(a){this.c=a}r(Dj,yh);Dj.prototype.cb=function(a,b){b=Ej(a,b);if(null===b)return a;a:{var c=b;a=Fj(ae(b,0));if(null!==a){var d=b.M;for(var e=null,f=a.table.Ca(),h=0;h<f.length&&null===e;h++)e=Gj(f[h],d);d=e;if(null===d){a=c;break a}c=new cj(this.c,d.$a,new Ri(d.$a),d.Se);d=new fj(this.c,a.table);K(d,c);Ag(b);c=Eg(a,a,d,c)}a=c}a==b&&(a=b,c=Hj(ae(b,0)),null!==c&&(d=Gj(c.index,b.M),null!==d&&(c.je=d.Se,a=Ag(b).parent)));return a.Za()};
function Hj(a){a=zg(a,function(a){return a instanceof cj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Fj(a){a=zg(a,function(a){return a instanceof Gi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Ej(a,b){return n(b.M)?zg(a,function(a){return a instanceof nj})[0]:null}function Gj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.I.getName()==a.f[d].ba.getName()}))return null;b=Ij(b,a);return b[0]||b[1]?{$a:a,Se:b[1]}:null}
function Ij(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Jj(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}Jj.prototype.ec=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function Kj(a){S.call(this,0,1);this.S=a}r(Kj,S);Kj.prototype.toString=function(){return"update("+this.S.getName()+")"};Kj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.ib(a.ua.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[Fd()]};function Lj(a){this.c=a;this.le=[new Pi,new gj(this.c),new yj(this.c),new Dj(this.c),new wj,new Hi(this.c)];this.Kd=[new gj(this.c)]}Lj.prototype.create=function(a,b){var c=a.Za();if(c instanceof lh||c instanceof kh)return Mj(this,a,b);if(c instanceof rh||c instanceof vh||c instanceof wh)return Mj(this,a,b,this.le);if(c instanceof mh||c instanceof nh)return Mj(this,a,b,this.Kd);throw new D(8);};
function Mj(a,b,c,d){a=xg(b.Za(),a.rg.bind(a));null!=d&&(a=(new Jj(a,c,d)).ec());return new te(a,b.da())}
Lj.prototype.rg=function(a){if(a instanceof rh)return new tj(a.f,a.Nb);if(a instanceof uh)return new Ii(a.f);if(a instanceof th)return new Zg(a.f);if(a instanceof sh)return new nj(a.M);if(a instanceof wh)return new vj;if(a instanceof vh)return new mj;if(a instanceof oh)return new ej(a.N.V());if(a instanceof qh)return new Dh;if(a instanceof xh)return new Ki(this.c,a.N,a.Pb);if(a instanceof ph)return new Gi(this.c,a.table);if(a instanceof mh)return new Ei(a.table);if(a instanceof nh)return new Kj(a.table);
if(a instanceof lh)return new lj(this.c,a.table);if(a instanceof kh)return new jj(this.c,a.table);throw new D(514);};function Nj(a){this.og=new Di;this.Ag=new Lj(a)};function Oj(){this.Ze=x()}function Pj(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new Qj,a.Ze.set(b.getName(),c));return c}function Rj(a,b,c,d){c.forEach(function(a){a=Pj(this,a);0==d?(a.bb=null,a.tc=b):3==d?(null===a.Vb&&(a.Vb=B()),a.Vb.add(b),null===a.Va&&(a.Va=B()),a.Va.delete(b)):1==d?(null===a.Va&&(a.Va=B()),a.Va.add(b)):2==d&&(a.bb=b)},a)}
function Sj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Pj(this,a);var c=null===a.Va||0==a.Va.size;e=0==d?(null===a.Vb||0==a.Vb.size)&&c&&null===a.tc&&null!==a.bb&&a.bb==b:3==d?null===a.tc&&null===a.bb&&null!==a.Va&&a.Va.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Tj(a,b,c,d){var e=Sj(a,b,c,d);e&&Rj(a,b,c,d);return e}Oj.prototype.releaseLock=function(a,b){b.forEach(function(b){Pj(this,b).releaseLock(a)},this)};
function Uj(a,b){b.forEach(function(a){Pj(this,a).bb=null},a)}function Qj(){this.Vb=this.Va=this.bb=this.tc=null}Qj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.bb==a&&(this.bb=null);null===this.Va||this.Va.delete(a);null===this.Vb||this.Vb.delete(a)};function Vj(){this.Sb=new Wj;this.Ac=new Oj}function Be(a,b){(2>b.getPriority()||2>b.getPriority())&&Uj(a.Ac,b.da());a.Sb.zb(b);Xj(a);return b.Cb.ha}function Xj(a){for(var b=a.Sb.yb(),c=0;c<b.length;c++){var d=b[c];if(0==d.F()?Yj(a,d,1,3):Yj(a,d,2,0)){a.Sb.remove(d);var e=a;d.exec().then(e.xg.bind(e,d),e.wg.bind(e,d))}}}function Yj(a,b,c,d){var e=!1;Tj(a.Ac,b.V(),b.da(),c)&&(e=Tj(a.Ac,b.V(),b.da(),d));return e}Vj.prototype.xg=function(a,b){this.Ac.releaseLock(a.V(),a.da());a.Cb.resolve(b);Xj(this)};
Vj.prototype.wg=function(a,b){this.Ac.releaseLock(a.V(),a.da());a.Cb.reject(b);Xj(this)};function Wj(){this.Sb=[]}Wj.prototype.zb=function(a){zf(this.Sb,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.V()-c.V():b})};Wj.prototype.yb=function(){return this.Sb.slice()};Wj.prototype.remove=function(a){var b=this.Sb;a=ya(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Zj(){this.Jc=x()}var ak;function bk(){ak||(ak=new Zj);return ak}Zj.prototype.clear=function(){this.Jc.clear()};Zj.prototype.clear=Zj.prototype.clear;Zj.prototype.pb=function(a,b){this.Jc.set(a.toString(),b);return b};Zj.prototype.registerService=Zj.prototype.pb;Zj.prototype.b=function(a){var b=this.Jc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Zj.prototype.getService=Zj.prototype.b;Zj.prototype.gd=function(a){return this.Jc.has(a.toString())};
Zj.prototype.isRegistered=Zj.prototype.gd;function ck(){var a=bk();return ec(a.Jc)};function dk(a,b,c,d){return null!=a?null!=b?ek(a,b,c,d):fk(a):gk()}function hk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function ik(a){var b=bk();a=new sc("ns_"+a);return b.gd(a)?b.b(a):null}function gk(){var a={};ck().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=ik(b).b(A).version())});return hk(a)}function fk(a){a=ik(a);var b={};if(null!=a){var c=a.b(vc);a.b(A).oa().forEach(function(a){b[a.getName()]=c.get(df(a)).X().ia})}return hk(b)}
function ek(a,b,c,d){var e=ik(a);a=[];if(null!=e){var f=null;try{f=e.b(A).table(b)}catch(h){}null!=f&&(b=e.b(vc),e=e.b(uc),c=b.get(df(f)).Sa(void 0,!1,c,d),c.length&&(a=wf(e,c).map(function(a){return a.l})))}return hk(a)};function jk(a,b){this.Ld=Xd();this.ge=a;this.jd=b;this.J=kk(this)}function kk(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(a){a.jb().forEach(function(a){b.push(a)})});return b}jk.prototype.Z=function(a,b){return this.J.every(function(c){return 6==c.F()||0==c.F()?H(a,c)===H(b,c):Yd(this.Ld,c.F(),"eq")(H(a,c),H(b,c))},this)};
function lk(a,b,c){var d=null===b?[]:b.entries,e=qb(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var l=d[h];e[f]==l?f++:(l=a.jd.splice(f,1),l=mk(h,l,0,a.jd),b.push(l))}e=qb(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)l=c.entries[h],e[f]==l?f++:(a.jd.splice(h,0,l.ua.l),l=mk(h,[],1,a.jd),b.push(l));return b}function mk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function nk(){this.dc=x()}nk.prototype.xd=function(a,b){var c=la(a.query).toString(),d=this.dc.get(c)||null;null===d&&(d=new ok(a),this.dc.set(c,d));d.xd(b)};nk.prototype.he=function(a,b){a=la(a.query).toString();var c=this.dc.get(a)||null;c.he(b);0<c.Dc.size||this.dc.delete(a)};function Ae(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.dc.forEach(function(a){a=a.xc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ye(a,b,c){b=la(null!=b.Sc?b.Sc:b).toString();a=a.dc.get(b)||null;null!==a&&pk(a,c)}function ok(a){this.Cf=a;this.Dc=B();this.ug=[];this.Xe=null;this.Nf=new jk(a.query,this.ug)}ok.prototype.xd=function(a){this.Dc.has(a)||this.Dc.add(a)};ok.prototype.he=function(a){return this.Dc.delete(a)};ok.prototype.xc=function(){var a=this.Cf;return{context:a.query,de:bi(a)}};function pk(a,b){var c=lk(a.Nf,a.Xe,b);a.Xe=b;0<c.length&&a.Dc.forEach(function(a){a(c)})};function qk(a,b){var c=a.b(A),d=b||{};b=new vf(c);a.pb(uc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(n(dc)||(dc=new cc),b=dc,b=b.bg?0:b.Qg?4:1);switch(b){case 0:b=new $e(a,c);break;case 1:b=new gf(c);break;case 5:b=new jf(c);break;case 4:b=new sf(a,c,d.webSqlDbSize);break;case 3:b=new Ne(c,d.firebase);e=!0;break;default:throw new D(300);}a.pb(tc,b);var f=new wg;a.pb(vc,f);return b.Da(d.onUpgrade).then(function(){var b=new Nj(a);a.pb(wc,b);b=new Vj;a.pb(xc,b);b=new nk;a.pb(yc,b);return f.Da(c)}).then(function(){if(e){var b=
new Ce(a);b.Na.subscribe(b.Zd.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=dk);return(new pg(a)).Da(c)})};function rk(a){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w()}function sk(a){var b=a.c.b(vc),c=a.c.b(uc),d={};a.g.oa().forEach(function(a){var e=b.get(df(a)).Sa();e=wf(c,e).map(function(a){return a.l});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=rk.prototype;m.exec=function(){var a=sk(this);a=new Jd(new fc(-1,a),!0);return v([new G([a],[])])};m.F=k(0);m.da=g("aa");m.V=function(){return la(this)};m.getPriority=k(0);function tk(a,b){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w();this.Aa=b;this.Na=a.b(tc);this.U=a.b(uc);this.B=a.b(vc)}m=tk.prototype;
m.exec=function(){if(!(this.Na instanceof $e||this.Na instanceof gf||this.Na instanceof sf))throw new D(300);a:{var a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.B.get(df(a[b])).X().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return uk(this)};m.F=k(1);m.da=g("aa");m.V=function(){return la(this)};m.getPriority=k(0);
function uk(a){var b=new md(a.c,a.aa);b=a.Na.Db(a.F(),C(a.aa),b);for(var c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.ib,0);a.U.Ub(c,e);var h=a.B.jc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function vk(a,b){this.c=a;this.Na=a.b(tc);this.Ha=a.b(xc);this.Gb=a.b(yc);this.aa=B(b);this.Pa=new md(this.c,this.aa);this.Cb=w();this.uc=w();this.ue=w()}m=vk.prototype;m.exec=function(){this.ue.resolve();return this.uc.ha};m.F=k(1);m.da=g("aa");m.V=function(){return la(this)};m.getPriority=k(2);function wk(a){Be(a.Ha,a);return a.ue.ha}
function xk(a,b){b=b.xc();return b.de.Za().exec(a.Pa,b.context).then(function(a){return Bd(a[0])},function(a){this.Pa.Hb();var b=new kb(a.name);this.uc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Na.Db(this.F(),C(this.aa),this.Pa);this.ja.ka().then(function(){this.Ic();this.uc.resolve()}.bind(this),function(a){this.Pa.Hb();this.uc.reject(a)}.bind(this));return this.Cb.ha};m.Hb=function(){this.Pa.Hb();this.uc.resolve();return this.Cb.ha};
m.Ic=function(){var a=Ae(this.Gb,this.aa);0!=a.length&&(a=new xe(this.c,a),Be(this.Ha,a))};m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(xc);this.Ib=null;this.Ra=0;0==yk.size&&(yk.set(0,B([1,4])),yk.set(1,B([2])),yk.set(2,B([3,5,6])),yk.set(3,B([2,7])),yk.set(4,B([7])),yk.set(5,B([7])),yk.set(6,B([7])))}q("lf.proc.Transaction",V);var yk=x();function zk(a,b){var c=yk.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
V.prototype.exec=function(a){zk(this,4);var b=[];try{a.forEach(function(a){a.Ya();b.push(a.xc())},this)}catch(c){return zk(this,7),cb(c)}this.Ib=new Eh(this.c,b);return Be(this.Ha,this.Ib).then(function(a){zk(this,7);return a.map(function(a){return Bd(a)})}.bind(this),function(a){zk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Af=function(a){zk(this,1);this.Ib=new vk(this.c,a);return wk(this.Ib).then(function(){zk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Af;
V.prototype.zf=function(a){zk(this,3);try{a.Ya()}catch(b){return zk(this,7),cb(b)}return xk(this.Ib,a).then(function(a){zk(this,2);return a}.bind(this),function(a){zk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.zf;V.prototype.ka=function(){zk(this,5);return this.Ib.ka().then(function(){zk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Hb=function(){zk(this,6);return this.Ib.Hb().then(function(){zk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Hb;
V.prototype.X=function(){if(7!=this.Ra)throw new D(105);return this.Ib.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(A);this.dd=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.pb(A,this.g);return qk(this.c,a).then(function(){this.dd=!0;this.Ha=this.c.b(xc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function Ak(a){if(!a.dd)throw new D(2);}W.prototype.select=function(a){Ak(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){Ak(this);return new di(this.c)};W.prototype.insert=W.prototype.zb;W.prototype.Rd=function(){Ak(this);return new di(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){Ak(this);return new ni(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Ak(this);return new ci(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Ak(this);this.c.b(yc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Ak(this);this.c.b(yc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Jf=function(){Ak(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Jf;W.prototype.close=function(){try{this.c.b(tc).close()}catch(a){}this.c.clear();this.dd=!1};W.prototype.close=W.prototype.close;
W.prototype.Tf=function(){Ak(this);var a=new rk(this.c);return Be(this.Ha,a).then(function(a){return Bd(a[0])[0]})};W.prototype["export"]=W.prototype.Tf;W.prototype.import=function(a){Ak(this);a=new tk(this.c,a);return Be(this.Ha,a).then(k(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.sf=e;this.Ja=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Ld(this.S)+"."+this.w};m.toString=function(){return this.j()};m.H=g("S");m.F=g("sf");X.prototype.getType=X.prototype.F;X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.H().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!n(this.fa)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.fc=g("Re");X.prototype.isNullable=X.prototype.fc;X.prototype.zc=g("Te");X.prototype.Oa=function(a){return Pg(this,a,"eq")};X.prototype.eq=X.prototype.Oa;X.prototype.$e=function(a){return Pg(this,a,"neq")};X.prototype.neq=X.prototype.$e;X.prototype.pg=function(a){return Pg(this,a,"lt")};
X.prototype.lt=X.prototype.pg;X.prototype.qg=function(a){return Pg(this,a,"lte")};X.prototype.lte=X.prototype.qg;X.prototype.Xf=function(a){return Pg(this,a,"gt")};X.prototype.gt=X.prototype.Xf;X.prototype.Yf=function(a){return Pg(this,a,"gte")};X.prototype.gte=X.prototype.Yf;X.prototype.match=function(a){return Pg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Bf=function(a,b){return Pg(this,[a,b],"between")};X.prototype.between=X.prototype.Bf;
X.prototype.Zf=function(a){return Pg(this,a,"in")};X.prototype["in"]=X.prototype.Zf;X.prototype.jg=function(){return this.Oa(null)};X.prototype.isNull=X.prototype.jg;X.prototype.ig=function(){return this.$e(null)};X.prototype.isNotNull=X.prototype.ig;X.prototype.oc=function(a){return new X(this.S,this.w,this.Te,this.Re,this.sf,a)};X.prototype.as=X.prototype.oc;function Bk(a){this.g=a;this.Dd=new Vc;this.ie=new Vc;this.bf=new Vc;this.De=x();this.h=new Vc;this.ze=new Vc;this.gf=new Vc;this.Ce=new Vc;Ck(this)}function Ck(a){a.g.oa().forEach(function(a){var b=a.getName();a.Kb.Pd.forEach(function(c){this.bf.set(b,this.g.table(c.Ua));this.h.set(c.Ua,a);0==c.action?(this.ie.set(c.Ua,c),this.gf.set(c.Ua,a)):(this.Dd.set(c.Ua,c),this.ze.set(c.Ua,a));this.De.set(a.getName()+"."+c.tb,c.Ua);this.Ce.set(c.Ua+"."+c.Fc,a.getName())},this)},a)}
function cd(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Kh(a,b){a=b.get(a);return null===a?[]:a}function Mh(a,b){var c=B();b.forEach(function(a){(a=this.De.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Ih(a,b,c){return null!=c?0==c?Kh(b,a.gf):Kh(b,a.ze):Kh(b,a.h)}
function Nh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Dk(a,b,c){this.nd=a;this.tg=b;this.Pd=c}q("lf.schema.Constraint",Dk);Dk.prototype.Wf=g("nd");Dk.prototype.getPrimaryKey=Dk.prototype.Wf;Dk.prototype.Vf=g("Pd");Dk.prototype.getForeignKeys=Dk.prototype.Vf;function Ek(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Be=b;this.tb=a.local;this.Ua=d[0];this.Fc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Fk(a);this.Ld=Xd();this.w=a;this.J=x();this.ud=B();this.lc=B();this.hd=B();this.Ea=null;this.sa=x();this.md=!1;this.wb=[]}q("lf.schema.TableBuilder",Y);function Gk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Hk=B([0,6]);function Fk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Ik(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.lc.has(b))throw new D(503,a.w+"."+b);}
function Jk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Kk(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function Lk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.w+"."+e);},a)}}function Mk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.hd.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.uf=function(a,b){Fk(a);Ik(this,a);this.J.set(a,b);Hk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.uf;
Y.prototype.wf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));Fk(this.Ea);Ik(this,this.Ea);a=Nk(this,a,!0,void 0,b);Jk(this,a);1==a.length&&this.ud.add(a[0].name);this.lc.add(this.Ea);this.sa.set(this.Ea,a);return this};Y.prototype.addPrimaryKey=Y.prototype.wf;
Y.prototype.vf=function(a,b){Fk(a);Ik(this,a);b=new Ek(b,this.w,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.J.has(b.tb))throw new D(540,a);this.wb.push(b);this.ve(a,[b.tb],this.ud.has(b.tb));return this};Y.prototype.addForeignKey=Y.prototype.vf;Y.prototype.xf=function(a,b){Fk(a);Ik(this,a);b=Nk(this,b,!0);1==b.length&&(this.ud.add(b[0].name),Ok(this,b[0].name));this.sa.set(a,b);this.lc.add(a);return this};Y.prototype.addUnique=Y.prototype.xf;
function Ok(a,b){a.wb.forEach(function(a){a.tb==b&&this.lc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){Nk(this,a,!1).forEach(function(a){this.hd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;Y.prototype.ve=function(a,b,c,d){Fk(a);Ik(this,a);b=Nk(this,b,!0,d);c&&this.lc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;Y.prototype.Bb=ca("md");Y.prototype.persistentIndex=Y.prototype.Bb;
Y.prototype.xb=function(){Kk(this);Lk(this);Mk(this);return new (Pk(this))};Y.prototype.getSchema=Y.prototype.xb;function Nk(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(a){return new Gk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Gk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Pk(a){function b(){function b(b){return a.sa.get(b).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=ec(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.hd.has(b),a.J.get(b));return this[b]},this),e=ec(a.sa).map(function(c){return new Rg(a.w,c,a.lc.has(c),b.call(this,c))},this);Q.call(this,a.w,d,e,a.md);var f=null===a.Ea?null:new Rg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.hd.has(b.getName())});this.Kb=new Dk(f,
h,a.wb);this.kf=Qk(a,d,e)}r(b,Q);b.prototype.vb=function(a){return new this.kf(gc++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.ib=function(a){var b={};this.jb().forEach(function(c){var d=c.getName();c=c.F();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);e=new ArrayBuffer(c.length/2);for(var l=new Uint8Array(e),p=0,L=0;p<c.length;p+=2)l[L++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.kf(a.id,b)};
b.prototype.deserializeRow=b.prototype.ib;b.prototype.Ie=g("Kb");b.prototype.getConstraint=b.prototype.Ie;return b}
function Qk(a,b,c){function d(a,d){this.J=b;this.sa=c;fc.call(this,a,d)}r(d,fc);d.prototype.Fe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.fc()?null:Uc[b.F()]});return a};d.prototype.rf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.F();var d=this.l[c];a[c]=0==b?null!=d?jc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Ld.Ue.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Rk(a,b){this.g=new Z(a,b);this.rb=x();this.vc=!1;this.i=null;this.Uc=!1}q("lf.schema.Builder",Rk);function Sk(a,b){b.wb.forEach(function(a){var c=a.Ua;if(!this.rb.has(c))throw new D(536,a.name);c=this.rb.get(c).xb();var e=a.Fc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].F()!=c[e].F())throw new D(538,a.name);if(!c[e].zc())throw new D(539,a.name);},a)}
Rk.prototype.Ff=function(a){a.wb.forEach(function(a){this.rb.get(a.Ua).wb.forEach(function(b){if(b.tb==a.Fc)throw new D(534,a.name);},this)},this)};function Tk(a){a.vc||(a.rb.forEach(function(a){Sk(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),y(a.rb).forEach(a.Ff,a),Uk(a),a.rb.clear(),a.vc=!0)}function Vk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.se)Vk(this,a,c);else if(a.$d&&b!=a)throw new D(533);},a));b.$d=!1}
function Uk(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Wk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Ua).Ge.add(d)})});y(b).forEach(function(a){Vk(this,a,b)},a)}function Wk(a){this.$d=this.se=!1;this.Ge=B();this.kc=a}Rk.prototype.xb=function(){this.vc||Tk(this);return this.g};Rk.prototype.getSchema=Rk.prototype.xb;Rk.prototype.Le=function(){var a=new sc("ns_"+this.g.name()),b=bk();if(b.gd(a))var c=b.b(a);else c=new Zj,b.pb(a,c);return c};Rk.prototype.getGlobal=Rk.prototype.Le;
Rk.prototype.connect=function(a){if(this.Uc||null!==this.i&&this.i.dd)throw new D(113);this.Uc=!0;if(null===this.i){var b=this.Le();b.gd(A)||b.pb(A,this.xb());this.i=new W(b)}return this.i.Da(a).then(function(a){this.Uc=!1;return a}.bind(this),function(a){this.Uc=!1;throw a;}.bind(this))};Rk.prototype.connect=Rk.prototype.connect;Rk.prototype.If=function(a){if(this.rb.has(a))throw new D(503,a);if(this.vc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};Rk.prototype.createTable=Rk.prototype.If;
Rk.prototype.me=function(a){if(this.vc)throw new D(535);this.g.me(a);return this};Rk.prototype.setPragma=Rk.prototype.me;function Z(a,b){this.w=a;this.Yb=b;this.L=x();this.ee={Of:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Yb");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Qe||(this.Qe=new Bk(this));return this.Qe};Z.prototype.Bg=g("ee");Z.prototype.pragma=Z.prototype.Bg;Z.prototype.me=ca("ee");q("lf.schema.create",function(a,b){return new Rk(a,b)});u.prototype.catch=u.prototype.pe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
