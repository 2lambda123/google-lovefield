if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function h(a){return function(){return this[a]}}function m(a){return function(){return a}}var n,ca=this;function q(a){return void 0!==a}function da(a){return"string"==typeof a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return null!=a}function ia(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){a=a.split(".");var c=ca;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&q(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function u(a,b){function c(){}c.prototype=b.prototype;a.hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Vg=function(d,e,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[e].apply(d,g)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}u(sa,Error);sa.prototype.name="CustomError";var ta=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(da(a))return da(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ua=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=da(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},va=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=Array(c),e=da(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},wa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,b,c)}:function(a,b,c){var d=c;ua(a,function(e,f){d=b.call(void 0,d,e,f,a)});return d},xa=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=da(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};
function ya(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function za(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Aa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Aa.apply(null,ya(d,e,e+8192)),g=0;g<f.length;g++)b.push(f[g]);else b.push(d)}return b};function Ba(a,b){this.pg=100;this.Of=a;this.Kg=b;this.qd=0;this.fd=null}Ba.prototype.get=function(){if(0<this.qd){this.qd--;var a=this.fd;this.fd=a.next;a.next=null}else a=this.Of();return a};Ba.prototype.put=function(a){this.Kg(a);this.qd<this.pg&&(this.qd++,a.next=this.fd,this.fd=a)};var Ca=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Da(a,b){return-1!=a.indexOf(b)}
function Ea(a){var b=0;a=Ca(String(a)).split(".");for(var c=Ca("10").split("."),d=Math.max(a.length,c.length),e=0;0==b&&e<d;e++){var f=a[e]||"",g=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;b=Fa(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||Fa(0==f[2].length,0==g[2].length)||Fa(f[2],g[2]);f=f[3];g=g[3]}while(0==b)}return b}function Fa(a,b){return a<b?-1:a>b?1:0};var Ga;a:{var Ha=ca.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function v(a){return Da(Ga,a)};function Ja(){return v("Safari")&&!(Ka()||v("Coast")||v("Opera")||v("Edge")||v("Firefox")||v("FxiOS")||v("Silk")||v("Android"))}function Ka(){return(v("Chrome")||v("CriOS"))&&!v("Edge")};function La(a){ca.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=ca.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!v("Presto")&&(a=function(){var e=document.createElement("IFRAME");e.style.display="none";e.src="";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write("");e.close();var g="callImmediate"+Math.random(),k="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=qa(function(l){if(("*"==k||l.origin==k)&&l.data==
g)this.port1.onmessage()},this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,k)}}});if("undefined"!==typeof a&&!v("Trident")&&!v("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var e=c.Fe;c.Fe=null;e()}};return function(e){d.next={Fe:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var f=document.createElement("SCRIPT");
f.onreadystatechange=function(){f.onreadystatechange=null;f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){ca.setTimeout(e,0)}};function Oa(){this.Bd=this.oc=null}var Qa=new Ba(function(){return new Pa},function(a){a.reset()});Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.Bd?this.Bd.next=c:this.oc=c;this.Bd=c};Oa.prototype.remove=function(){var a=null;this.oc&&(a=this.oc,this.oc=this.oc.next,this.oc||(this.Bd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Td=null}Pa.prototype.set=function(a,b){this.Td=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Td=null};function Ra(a,b){Sa||Ua();Va||(Sa(),Va=!0);Wa.add(a,b)}var Sa;function Ua(){if(ca.Promise&&ca.Promise.resolve){var a=ca.Promise.resolve(void 0);Sa=function(){a.then(Xa)}}else Sa=function(){var b=Xa;!ja(ca.setImmediate)||ca.Window&&ca.Window.prototype&&!v("Edge")&&ca.Window.prototype.setImmediate==ca.setImmediate?(Ma||(Ma=Na()),Ma(b)):ca.setImmediate(b)}}var Va=!1,Wa=new Oa;function Xa(){for(var a;a=Wa.remove();){try{a.Td.call(a.scope)}catch(b){La(b)}Qa.put(a)}Va=!1};function w(a,b){this.Sa=0;this.nf=void 0;this.Vc=this.cc=this.C=null;this.ed=this.Rd=!1;if(a!=ea)try{var c=this;a.call(b,function(d){Ya(c,2,d)},function(d){Ya(c,3,d)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.hc=this.Hc=this.child=null;this.Ed=!1}Za.prototype.reset=function(){this.context=this.hc=this.Hc=this.child=null;this.Ed=!1};var $a=new Ba(function(){return new Za},function(a){a.reset()});function ab(a,b,c){var d=$a.get();d.Hc=a;d.hc=b;d.context=c;return d}
function x(a){if(a instanceof w)return a;var b=new w(ea);Ya(b,2,a);return b}function bb(a){return new w(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Ra(ra(b,a))}function eb(a){return new w(function(b,c){var d=a.length,e=[];if(d)for(var f=function(p,r){d--;e[p]=r;0==d&&b(e)},g=function(p){c(p)},k=0,l;k<a.length;k++)l=a[k],cb(l,ra(f,k),g);else b(e)})}function fb(){var a,b,c=new w(function(d,e){a=d;b=e});return new gb(c,a,b)}
w.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};w.prototype.$goog_Thenable=!0;w.prototype.ve=function(a,b){return hb(this,null,a,b)};function jb(a,b){a.cc||2!=a.Sa&&3!=a.Sa||kb(a);a.Vc?a.Vc.next=b:a.cc=b;a.Vc=b}
function hb(a,b,c,d){var e=ab(null,null,null);e.child=new w(function(f,g){e.Hc=b?function(k){try{var l=b.call(d,k);f(l)}catch(p){g(p)}}:f;e.hc=c?function(k){try{var l=c.call(d,k);!q(l)&&k instanceof lb?g(k):f(l)}catch(p){g(p)}}:g});e.child.C=a;jb(a,e);return e.child}w.prototype.Qg=function(a){this.Sa=0;Ya(this,2,a)};w.prototype.Rg=function(a){this.Sa=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Sa&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Sa=1,db(c,a.Qg,a.Rg,a)||(a.nf=c,a.Sa=b,a.C=null,kb(a),3!=b||c instanceof lb||mb(a,c)))}function db(a,b,c,d){if(a instanceof w)return jb(a,ab(b||ea,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return nb(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}
function nb(a,b,c,d,e){function f(l){k||(k=!0,d.call(e,l))}function g(l){k||(k=!0,c.call(e,l))}var k=!1;try{b.call(a,g,f)}catch(l){f(l)}}function kb(a){a.Rd||(a.Rd=!0,Ra(a.Vf,a))}function ob(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.Vc=null);return b}
w.prototype.Vf=function(){for(var a;a=ob(this);){var b=this.Sa,c=this.nf;if(3==b&&a.hc&&!a.Ed){var d;for(d=this;d&&d.ed;d=d.C)d.ed=!1}if(a.child)a.child.C=null,pb(a,b,c);else try{a.Ed?a.Hc.call(a.context):pb(a,b,c)}catch(e){qb.call(null,e)}$a.put(a)}this.Rd=!1};function pb(a,b,c){2==b?a.Hc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function mb(a,b){a.ed=!0;Ra(function(){a.ed&&qb.call(null,b)})}var qb=La;function lb(a){sa.call(this,a)}u(lb,sa);lb.prototype.name="cancel";
function gb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function rb(a,b,c,d){c=c||function(r,W){return r==W};d=d||function(r){return a[r]};for(var e=a.length,f=b.length,g=[],k=0;k<e+1;k++)g[k]=[],g[k][0]=0;for(var l=0;l<f+1;l++)g[0][l]=0;for(k=1;k<=e;k++)for(l=1;l<=f;l++)c(a[k-1],b[l-1])?g[k][l]=g[k-1][l-1]+1:g[k][l]=Math.max(g[k-1][l],g[k][l-1]);var p=[];k=e;for(l=f;0<k&&0<l;)c(a[k-1],b[l-1])?(p.unshift(d(k-1,l-1)),k--,l--):g[k-1][l]>g[k][l-1]?k--:l--;return p}function sb(a){return wa(arguments,function(b,c){return b+c},0)}
function tb(a){return sb.apply(null,arguments)/arguments.length}function ub(a){var b=arguments.length;if(2>b)return 0;var c=tb.apply(null,arguments);return sb.apply(null,va(arguments,function(d){return Math.pow(d-c,2)}))/(b-1)}function vb(a){return Math.sqrt(ub.apply(null,arguments))};var wb="StopIteration"in ca?ca.StopIteration:{message:"StopIteration",stack:""};function xb(){}xb.prototype.next=function(){throw wb;};xb.prototype.pc=function(){return this};function yb(a){if(a instanceof xb)return a;if("function"==typeof a.pc)return a.pc(!1);if(ia(a)){var b=0,c=new xb;c.next=function(){for(;;){if(b>=a.length)throw wb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function zb(a,b){if(ia(a))try{ua(a,b,void 0)}catch(c){if(c!==wb)throw c;}else{a=yb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==wb)throw c;}}}function Ab(a){if(xa(arguments,function(e){return!e.length})||!arguments.length)return new xb;var b=new xb,c=arguments,d=za(c.length);b.next=function(){if(d){for(var e=va(d,function(g,k){return c[k][g]}),f=d.length-1;0<=f;f--){if(d[f]<c[f].length-1){d[f]++;break}if(0==f){d=null;break}d[f]=0}return e}throw wb;};return b};function Bb(a,b){this.l={};this.a=[];this.Ta=this.Eb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}n=Bb.prototype;n.yc=h("Eb");n.wa=function(){Cb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.l[this.a[b]]);return a};function Db(a){Cb(a);return a.a.concat()}n.Oa=function(a){return Eb(this.l,a)};n.jd=function(){return 0==this.Eb};
n.clear=function(){this.l={};this.Ta=this.Eb=this.a.length=0};n.remove=function(a){return Eb(this.l,a)?(delete this.l[a],this.Eb--,this.Ta++,this.a.length>2*this.Eb&&Cb(this),!0):!1};function Cb(a){if(a.Eb!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Eb(a.l,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Eb!=a.a.length){var e={};for(c=b=0;b<a.a.length;)d=a.a[b],Eb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}n.get=function(a,b){return Eb(this.l,a)?this.l[a]:b};
n.set=function(a,b){Eb(this.l,a)||(this.Eb++,this.a.push(a),this.Ta++);this.l[a]=b};n.addAll=function(a){if(a instanceof Bb)for(var b=Db(a),c=0;c<b.length;c++)this.set(b[c],a.get(b[c]));else for(b in a)this.set(b,a[b])};n.forEach=function(a,b){for(var c=Db(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};n.clone=function(){return new Bb(this)};
n.pc=function(a){Cb(this);var b=0,c=this.Ta,d=this,e=new xb;e.next=function(){if(c!=d.Ta)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw wb;var f=d.a[b++];return a?f:d.l[f]};return e};function Eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(){return v("iPhone")&&!v("iPod")&&!v("iPad")};function Gb(a){var b=Hb;return Object.prototype.hasOwnProperty.call(b,10)?b[10]:b[10]=a(10)};var Ib=v("Opera"),Jb=v("Trident")||v("MSIE"),Kb=v("Edge"),Lb=v("Gecko")&&!(Da(Ga.toLowerCase(),"webkit")&&!v("Edge"))&&!(v("Trident")||v("MSIE"))&&!v("Edge"),Mb=Da(Ga.toLowerCase(),"webkit")&&!v("Edge"),Nb=v("Macintosh"),Ob=v("Windows"),Pb=v("Android"),Qb=Fb(),Rb=v("iPad"),Sb=v("iPod"),Tb;
a:{var Ub="",Vb=function(){var a=Ga;if(Lb)return/rv:([^\);]+)(\)|;)/.exec(a);if(Kb)return/Edge\/([\d\.]+)/.exec(a);if(Jb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Mb)return/WebKit\/(\S+)/.exec(a);if(Ib)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Vb&&(Ub=Vb?Vb[1]:"");if(Jb){var Wb,Xb=ca.document;Wb=Xb?Xb.documentMode:void 0;if(null!=Wb&&Wb>parseFloat(Ub)){Tb=String(Wb);break a}}Tb=Ub}var Yb=Tb,Hb={};function Zb(){return Gb(function(){return 0<=Ea(Yb)})};var $b=function(){if(Ob){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Ga))?a[1]:"0"}return Nb?(a=/10[_.][0-9_.]+/,(a=a.exec(Ga))?a[0].replace(/_/g,"."):"10"):Pb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Ga))?a[1]:""):Qb||Rb||Sb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Ga))?a[1].replace(/_/g,"."):""):""}();var ac=Fb()||v("iPod"),bc=v("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function cc(){var a;!(a=Ja()&&!Zb())&&(a=bc||ac)&&(a=!(0<=Ea($b)));this.ae=a;this.fg=!(this.ae||Jb&&!Zb());this.Ug=Ka()||Ja();this.ug=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.ae;this.vg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.ae}var dc;function ec(){q(dc)||(dc=new cc);return dc};function z(){this.l=new Bb;Object.defineProperty(this,"size",{get:function(){return this.l.yc()}})}z.prototype.clear=function(){this.l.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.l.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.l.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.l.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.l.Oa(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.l.set(a,b)};z.prototype.set=z.prototype.set;var fc=ec().ug;function A(){return fc?new window.Map:new z}function gc(a){return a instanceof z?Db(a.l):Array.from(a.keys())}function B(a){return a instanceof z?a.l.wa():Array.from(a.values())};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function hc(a,b){this.ra=a;this.m=b||this.Ke()}var ic=0;n=hc.prototype;n.id=h("ra");n.Ke=function(){return{}};n.wf=h("m");n.Ja=function(){return{id:this.ra,value:this.wf()}};n.nb=function(a){return"#"==a.substr(-1)?this.ra:null};function jc(a){return new hc(a.id,a.value)}function kc(a){return new hc(ic++,a||{})}function lc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};var mc={};t("lf.TransactionType",mc);mc.READ_ONLY=0;mc.READ_WRITE=1;function C(a,b,c,d,e){this.wd=a;this.jg=b;this.Tg=c;this.Qf=d;this.Jf=e}t("lf.TransactionStats",C);C.prototype.Og=h("wd");C.prototype.success=C.prototype.Og;C.prototype.ig=h("jg");C.prototype.insertedRowCount=C.prototype.ig;C.prototype.Sg=h("Tg");C.prototype.updatedRowCount=C.prototype.Sg;C.prototype.Pf=h("Qf");C.prototype.deletedRowCount=C.prototype.Pf;C.prototype.If=h("Jf");C.prototype.changedTableCount=C.prototype.If;function nc(a,b){this.yd=a;this.Qa=b||null;this.S=fb();this.wd=!1;this.za=null}nc.prototype.ka=function(){return(0==this.yd?this.rc():oc(this)).then(function(a){this.wd=!0;return a}.bind(this))};function oc(a){try{pc(a.Qa)}catch(b){return bb(b)}return qc(a).then(function(b){this.Qa.ka();return b}.bind(a))}function qc(a){rc(a);sc(a);return a.rc()}
function rc(a){a.Qa.ib.forEach(function(b,c){c=this.Qa.da().get(c);c=this.I(c.getName(),c.kb.bind(c),0);var d=B(b.va).map(function(f){return f.id()});b=B(b.la).map(function(f){return f[1]}).concat(B(b.ua));var e=0<b.length;0<d.length&&c.remove(d,e).ve(this.Te,this);c.put(b).ve(this.Te,this)},a)}function sc(a){tc(a.Qa).forEach(function(b){var c=this.I(b.getName(),jc,1);c.remove([]);c.put(b.Ja())},a)}nc.prototype.Te=function(a){this.S.reject(a)};
nc.prototype.Y=function(){if(null===this.za)if(this.wd)if(0==this.yd)this.za=new C(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Qa.ib.forEach(function(e){d++;a+=e.ua.size;c+=e.la.size;b+=e.va.size});this.za=new C(!0,a,c,b,d)}else this.za=new C(!1,0,0,0,0);return this.za};function uc(a){this.Lg=a}uc.prototype.toString=h("Lg");var vc=new uc("backstore"),wc=new uc("cache"),xc=new uc("indexstore"),yc=new uc("engine"),zc=new uc("runner"),Ac=new uc("observerregistry"),Bc=new uc("schema");function Cc(a){if(a.wa&&"function"==typeof a.wa)return a.wa();if(da(a))return a.split("");if(ia(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}b=[];c=0;for(d in a)b[c++]=a[d];return b};function Dc(a){this.l=new Bb;a&&this.addAll(a)}function Ec(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}n=Dc.prototype;n.yc=function(){return this.l.yc()};n.add=function(a){this.l.set(Ec(a),a)};n.addAll=function(a){a=Cc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};n.remove=function(a){return this.l.remove(Ec(a))};n.clear=function(){this.l.clear()};n.jd=function(){return this.l.jd()};n.contains=function(a){return this.l.Oa(Ec(a))};n.wa=function(){return this.l.wa()};
n.clone=function(){return new Dc(this)};n.pc=function(){return this.l.pc(!1)};function Fc(a){this.Yb=new Dc(a);Object.defineProperty(this,"size",{get:function(){return this.Yb.yc()}})}Fc.prototype.add=function(a){this.Yb.add(a)};Fc.prototype.add=Fc.prototype.add;Fc.prototype.clear=function(){this.Yb.clear()};Fc.prototype.clear=Fc.prototype.clear;Fc.prototype.delete=function(a){return this.Yb.remove(a)};Fc.prototype["delete"]=Fc.prototype.delete;Fc.prototype.forEach=function(a,b){this.Yb.wa().forEach(a,b)};Fc.prototype.has=function(a){return this.Yb.contains(a)};
Fc.prototype.has=Fc.prototype.has;var Gc=ec().vg;function D(a){return Gc?q(a)?new window.Set(a):new window.Set:new Fc(a)}function E(a){return a instanceof Fc?a.Yb.wa():Array.from(a)}function Hc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(d){c=c&&a.has(d)});return c};function Ic(a,b){this.ra=a;this.m=b||{}}function Jc(a){var b=D();a.forEach(function(c){b.add(c>>9)});return E(b)}Ic.prototype.W=h("ra");function Kc(a,b){b.forEach(function(c){this.m[c.id()]=c.Ja()},a)}function Lc(a,b){b.forEach(function(c){delete this.m[c]},a)}Ic.prototype.Ja=function(){return{id:this.ra,value:JSON.stringify(this.m)}};function Mc(a){return new Ic(a.id,JSON.parse(a.value))};function Nc(a,b,c){this.ba=a;this.Ob=b;this.pf=c}n=Nc.prototype;n.get=function(a){if(0==a.length)return this.Vd();var b=this.Ob;return Oc(this,a).then(function(c){return a.map(function(d){var e=c.get(d>>9);return b(e.m[d])})})};function Oc(a,b){var c=A(),d=fb();a=Jc(b).map(function(e){return new w(function(f,g){try{var k=this.ba.get(e)}catch(l){g(l);return}k.onerror=g;k.onsuccess=function(l){l=Mc(l.target.result);c.set(l.W(),l);f()}},this)},a);eb(a).then(function(){d.resolve(c)});return d.ha}
n.Vd=function(){return new w(function(a,b){var c=[];try{var d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var e=d.result;if(e){var f=Mc(e.value).m,g;for(g in f)c.push(this.Ob(f[g]));e.continue()}else a(c)}.bind(this)},this)};n.Ub=function(a){return new w(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
n.put=function(a){if(0==a.length)return x();var b=A();a.forEach(function(c){var d=c.id()>>9,e=b.get(d)||null;null===e&&(e=this.pf(this.ba.name,d));Kc(e,[c]);b.set(d,e)},this);a=B(b).map(function(c){return this.Ub(function(){return this.ba.put(c.Ja())}.bind(this))},this);return eb(a)};
n.remove=function(a){if(0==a.length)return this.Ub(function(){return this.ba.clear()}.bind(this));var b=A();a.forEach(function(c){var d=c>>9,e=b.get(d)||null;null===e&&(e=this.pf(this.ba.name,d));Lc(e,[c]);b.set(d,e)},this);a=B(b).map(function(c){return this.Ub(function(){return 0==Object.keys(c.m).length?this.ba.delete(c.W()):this.ba.put(c.Ja())}.bind(this))},this);return eb(a)};function Pc(a,b,c){a=a.b(wc);var d=[c<<9,(c+1<<9)-1];b=a.Ua(b,d[0],d[1]);c=new Ic(c);Kc(c,b);return c}
function Qc(a,b){return new Ic(b)};function Rc(a){this.V=a.b(wc);this.B=a.b(xc);this.g=a.b(Bc)}Rc.prototype.update=function(a){a.forEach(function(b){Sc(this,b);Tc(this,b)},this)};function Tc(a,b){var c=b.getName();b.va.forEach(function(d,e){this.V.remove(c,e)},a);b.ua.forEach(function(d){this.V.set(c,d)},a);b.la.forEach(function(d){this.V.set(c,d[1])},a)}function Sc(a,b){var c=a.g.table(b.getName());Uc(b).forEach(function(d){Vc(this,c,d)},a)}
function Vc(a,b,c){var d=a.B.kc.get(b.getName())||[],e=0;d.forEach(function(f){try{Wc(f,c),e++}catch(g){throw d.slice(0,e).forEach(function(k){Wc(k,[c[1],c[0]])},this),g;}},a)}function Wc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.jb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Xc={};t("lf.ConstraintAction",Xc);Xc.RESTRICT=0;Xc.CASCADE=1;var Yc={};t("lf.ConstraintTiming",Yc);Yc.IMMEDIATE=0;Yc.DEFERRABLE=1;var Zc={};t("lf.Order",Zc);Zc.DESC=0;Zc.ASC=1;var $c={};t("lf.Type",$c);$c.ARRAY_BUFFER=0;$c.BOOLEAN=1;$c.DATE_TIME=2;$c.INTEGER=3;$c.NUMBER=4;$c.STRING=5;$c.OBJECT=6;var ad={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};t("lf.type.DEFAULT_VALUES",ad);function F(a,b){this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}u(F,Error);function bd(){this.l=A();this.size=0}n=bd.prototype;n.has=function(a){return this.l.has(a)};n.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=D(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};n.Xb=function(a,b){var c=this.l.get(a)||null;null===c&&(c=D(),this.l.set(a,c));b.forEach(function(d){c.has(d)||(c.add(d),this.size++)},this)};n.be=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Xb(b,c)},this)};
n.delete=function(a,b){var c=this.l.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.l.delete(a);return b};n.get=function(a){a=this.l.get(a)||null;return null===a?null:E(a)};n.clear=function(){this.l.clear();this.size=0};n.keys=function(){return gc(this.l)};n.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,E(b))});return a};function cd(a){this.B=a.b(xc);this.g=a.b(Bc);this.V=a.b(wc);this.$c=null}function dd(a,b,c){var d=b.Mb.xg;c.forEach(function(e){d.forEach(function(f){if(null==e.m[f.getName()])throw new F(202,f.j());},this)},a)}function ed(a,b,c,d){b.Mb.Ud.forEach(function(e){e.timing==d&&fd(this,e,c)},a)}function fd(a,b,c){var d=gd(a,b);c.forEach(function(e){if(hd(e[0],e[1],b.name)&&(e=e[1].nb(b.name),null!==e&&!d.Oa(e)))throw new F(203,b.name);},a)}
function gd(a,b){null===a.$c&&(a.$c=A());var c=a.$c.get(b.name)||null;null===c&&(c=a.g.table(b.Wa)[b.Ic].Ca(),c=a.B.get(c.j()),a.$c.set(b.name,c));return c}function hd(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function id(a,b,c,d){b=jd(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(e){return e.timing==d}),0!=b.length&&kd(a,b,c,function(e,f,g){if(f.Oa(g))throw new F(203,e.name);}))}
function ld(a,b,c){b=jd(a.g.info(),b.getName(),1);if(null===b)return null;var d=new bd;kd(a,b,c,function(e,f,g){f=f.get(g);0<f.length&&d.Xb(e.Ge,f)});return d}function md(a,b,c){var d=new bd;kd(a,c,b,function(e,f,g,k){f.get(g).forEach(function(l){d.set(l,{Sd:e,Cg:k[1]})})});return d}function kd(a,b,c,d){b.forEach(function(e){var f=this.B.get(e.name),g=gd(this,e);c.forEach(function(k){if(hd(k[0],k[1],g.getName())){var l=k[0].nb(g.getName());d(e,f,l,k)}},this)},a)}
function nd(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[null,e]}),ed(a,b,c,d))}function od(a,b,c,d){0!=c.length&&(ed(a,b,c,d),id(a,b,c,d))}function pd(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[e,null]}),id(a,b,c,d))}
function qd(a,b,c){var d={ue:[],rf:new bd},e=new bd;e.Xb(b.getName(),c.map(function(g){return g.id()}));do{var f=new bd;e.keys().forEach(function(g){var k=this.g.table(g);g=e.get(g).map(function(l){return[this.V.get(l),null]},this);k=ld(this,k,g);null!==k&&(d.ue.unshift.apply(d.ue,k.keys()),f.be(k))},a);e=f;d.rf.be(e)}while(0<e.size);return d};function rd(a){this.ua=A();this.la=A();this.va=A();this.A=a}n=rd.prototype;n.getName=h("A");n.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.la.set(a.id(),b);this.va.delete(a.id())}else this.ua.set(a.id(),a)};n.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):this.la.has(c)?(a=[this.la.get(a[0].id())[0],b],this.la.set(c,a)):this.la.set(c,a)};
n.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};n.be=function(a){a.ua.forEach(function(b){this.add(b)},this);a.la.forEach(function(b){this.modify(b)},this);a.va.forEach(function(b){this.delete(b)},this)};
function Uc(a){var b=[];a.ua.forEach(function(c){b.push([null,c])});a.la.forEach(function(c){b.push(c)});a.va.forEach(function(c){b.push([c,null])});return b}n.toString=function(){return"["+gc(this.ua).toString()+"], ["+gc(this.la).toString()+"], ["+gc(this.va).toString()+"]"};function sd(a){var b=new rd(a.A);a.ua.forEach(function(c){b.delete(c)});a.va.forEach(function(c){b.add(c)});a.la.forEach(function(c){b.modify([c[1],c[0]])});return b}
n.jd=function(){return 0==this.ua.size&&0==this.va.size&&0==this.la.size};function td(a,b){this.$=A();b.forEach(function(c){this.$.set(c.getName(),c)},this);this.g=a.b(Bc);this.V=a.b(wc);this.B=a.b(xc);this.Aa=new cd(a);this.gd=new Rc(a);this.ib=A()}function tc(a){var b=[];gc(a.ib).map(function(c){return this.$.get(c)},a).forEach(function(c){c.Cb()&&(c.Da().forEach(function(d){b.push(this.B.get(d.j()))},this),b.push(this.B.get(c.getName()+".#")))},a);return b}n=td.prototype;n.da=h("$");
n.Ab=function(a,b){ud(this,a);dd(this.Aa,a,b);nd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)vd(this,a,[null,b[c]])};function vd(a,b,c){var d=b.getName(),e=a.ib.get(d)||new rd(d);a.ib.set(d,e);try{Vc(a.gd,b,c)}catch(g){throw g;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
n.update=function(a,b){ud(this,a);dd(this.Aa,a,b);b=b.map(function(c){return[this.V.get(c.id()),c]},this);wd(this,a,b);od(this.Aa,a,b,0);b.forEach(function(c){vd(this,a,c)},this)};n.Wd=function(a,b){ud(this,a);dd(this.Aa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.Mb.sd;if(null===f)var g=null;else{g=this.Aa;f=f.j();var k=d.nb(f);g=g.B.get(f).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.V.get(g),d.ra=g,od(this.Aa,a,[[e,d]],0)):nd(this.Aa,a,[d],0);vd(this,a,[e,d])}};
n.remove=function(a,b){ud(this,a);xd(this,a,b);pd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)vd(this,a,[b[c],null])};function wd(a,b,c){b=jd(a.g.info(),b.getName(),1);if(null!==b){var d=md(a.Aa,c,b);d.keys().forEach(function(e){d.get(e).forEach(function(f){var g=this.g.table(f.Sd.Ge),k=this.V.get(e),l=g.kb(k.Ja());l.m[f.Sd.vb]=f.Cg.m[f.Sd.Ic];vd(this,g,[k,l])},this)},a)}}
function xd(a,b,c){if(null!==jd(a.g.info(),b.getName(),1)){b=qd(a.Aa,b,c);var d=b.rf;b.ue.forEach(function(e){var f=this.g.table(e);e=d.get(e).map(function(g){return this.V.get(g)},this);pd(this.Aa,f,e,0);e.forEach(function(g){vd(this,f,[g,null])},this)},a)}}function pc(a){a.ib.forEach(function(b){var c=this.$.get(b.getName());nd(this.Aa,c,B(b.ua),1);pd(this.Aa,c,B(b.va),1);od(this.Aa,c,B(b.la),1)},a)}n.ka=aa();n.Ib=function(){var a=B(this.ib).map(function(b){return sd(b)});this.gd.update(a)};
function ud(a,b){if(!a.$.has(b.getName()))throw new F(106,b.getName());};function yd(a,b,c,d){this.from=a;this.o=b;this.ea=this.from==G?!1:c;this.na=this.o==G?!1:d}var G=new (aa());yd.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==G?"unbound":this.from)+", "+(this.o==G?"unbound":this.o)+(this.na?")":"]")};function zd(a){if(Ad(a))return[];var b=null,c=null;a.from==G||(b=new yd(G,a.from,!1,!a.ea));a.o==G||(c=new yd(a.o,G,!a.na,!1));return[b,c].filter(function(d){return null!==d})}yd.prototype.reverse=function(){return new yd(this.o,this.from,this.na,this.ea)};
function Bd(a,b){var c=Cd(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.o==G||d.o>a.from||d.o==a.from&&!d.na&&!a.ea}function Dd(){return new yd(G,G,!1,!1)}function Ad(a){return a.from==G&&a.o==G}function Ed(a){return a.from==a.o&&a.from!=G&&!a.ea&&!a.na}yd.prototype.contains=function(a){var b=this.o==G||a<this.o||a==this.o&&!this.na;return(this.from==G||a>this.from||a==this.from&&!this.ea)&&b};
function Cd(a,b,c,d,e){function f(g){return c?g:1==g?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Fd(a,b){var c=Cd(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=Cd(a.o,b.o,!1,a.na,b.na));return c}function Gd(a){if(0==a.length)return[];a.sort(Fd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new yd(G,a[c].from,!1,!0):c==b.length-1?new yd(a[c-1].o,G,!0,!1):new yd(a[c-1].o,a[c].from,!0,!0);return b};function Hd(a){this.jc=[];q(a)&&this.add(a)}Hd.prototype.toString=function(){return this.jc.map(function(a){return a.toString()}).join(",")};Hd.prototype.Oa=function(a){return this.jc.some(function(b){return b.contains(a)})};Hd.prototype.wa=h("jc");
Hd.prototype.add=function(a){if(0!=a.length)if(a=this.jc.concat(a),1==a.length)this.jc=a;else{a.sort(Fd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Bd(c,a[d])){var e=a[d],f=Dd();if(c.from!=G&&e.from!=G){var g=Cd(c.from,e.from,!0);1!=g?(f.from=c.from,f.ea=0!=g?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.o!=G&&e.o!=G&&(g=Cd(c.o,e.o,!1),-1!=g?(f.o=c.o,f.na=0!=g?c.na:c.na&&e.na):(f.o=e.o,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.jc=b}};
function Id(a,b){var c=[];a.wa().map(function(d){return b.wa().map(function(e){if(Bd(d,e)){var f=Dd();var g=Cd(d.from,e.from,!0);g=0==g?d.ea?d:e:-1!=g?d:e;f.from=g.from;f.ea=g.ea;d.o==G||e.o==G?e=d.o==G?e:d:(g=Cd(d.o,e.o,!1),e=0==g?d.na?d:e:-1==g?d:e);f.o=e.o;f.na=e.na}else f=null;return f})}).forEach(function(d){c=c.concat(d)});return new Hd(c.filter(function(d){return null!==d}))};function H(a,b){this.entries=a;this.M=D(b);this.Za=null}H.prototype.s=function(){return E(this.M)};function Jd(a){return a.entries.map(function(b){return b.ta.m})}function Kd(a){return a.entries.map(function(b){return b.ta.id()})}function Ld(a,b){return a.Za.get(b.j())}var Md=null;function Nd(){null===Md&&(Md=new H([],[]));return Md}
function Od(a){if(0==a.length)return Nd();var b=a.reduce(function(g,k){return g+k.entries.length},0),c=Array(b),d=0;b=a.map(function(g){var k=A();g.entries.forEach(function(l){c[d++]=l;k.set(l.id,l)});return k});for(var e=A(),f=0;f<c.length;f++)b.every(function(g){return g.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(B(e),E(a[0].M))}function Pd(a){if(0==a.length)return Nd();var b=A();a.forEach(function(c){c.entries.forEach(function(d){b.set(d.id,d)})});return new H(B(b),E(a[0].M))}
function Qd(a,b){var c=1<b.length;a=a.map(function(d){return new Rd(d,c)});return new H(a,b)}function Rd(a,b){this.ta=a;this.id=Sd++;this.Yd=b}var Sd=0;function I(a,b){var c=b.Ka;return null!==c&&a.ta.m.hasOwnProperty(c)?a.ta.m[c]:a.Yd?a.ta.m[Td(b.I())][b.getName()]:a.ta.m[b.getName()]}function Ud(a,b,c){var d=b.Ka;if(null!=d)a.ta.m[d]=c;else if(a.Yd){d=Td(b.I());var e=a.ta.m[d];null==e&&(e={},a.ta.m[d]=e);e[b.getName()]=c}else a.ta.m[b.getName()]=c}
function Vd(a,b,c,d){function e(g,k){if(g.Yd){g=g.ta.m;for(var l in g)f[l]=g[l]}else f[k[0]]=g.ta.m}var f={};e(a,b);e(c,d);a=new hc(-1,f);return new Rd(a,!0)};t("lf.bind",function(a){return new Wd(a)});function Wd(a){this.fa=a}t("lf.Binder",Wd);Wd.prototype.Ca=h("fa");function Xd(){this.Ze=Yd();var a=Zd();this.Pb=A();this.Pb.set(1,$d());this.Pb.set(2,ae());this.Pb.set(4,a);this.Pb.set(3,a);this.Pb.set(5,be());this.Pb.set(6,ce())}var de;function ee(){null!=de||(de=new Xd);return de}function fe(a,b,c){a=a.Pb.get(b)||null;if(null===a)throw new F(550);c=a.get(c)||null;if(null===c)throw new F(550);return c}
function Yd(){function a(c){return c}var b=A();b.set(1,function(c){return null===c?null:c?1:0});b.set(2,function(c){return null===c?null:c.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function $d(){var a=A();a.set("eq",function(b,c){return b==c});a.set("neq",function(b,c){return b!=c});return a}
function Zd(){var a=$d();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b>=c[0]&&b<=c[1]});a.set("gte",function(b,c){return null===b||null===c?!1:b>=c});a.set("gt",function(b,c){return null===b||null===c?!1:b>c});a.set("in",function(b,c){return-1!=c.indexOf(b)});a.set("lte",function(b,c){return null===b||null===c?!1:b<=c});a.set("lt",function(b,c){return null===b||null===c?!1:b<c});return a}
function be(){var a=Zd();a.set("match",function(b,c){return null===b||null===c?!1:(new RegExp(c)).test(b)});return a}function ce(){var a=A();a.set("eq",function(b,c){if(null!==c)throw new F(550);return null===b});a.set("neq",function(b,c){if(null!==c)throw new F(550);return null!==b});return a}
function ae(){var a=A();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b.getTime()>=c[0].getTime()&&b.getTime()<=c[1].getTime()});a.set("eq",function(b,c){return(null===b?-1:b.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(b,c){return null===b||null===c?!1:b.getTime()>=c.getTime()});a.set("gt",function(b,c){return null===b||null===c?!1:b.getTime()>c.getTime()});a.set("in",function(b,c){return c.some(function(d){return d.getTime()==b.getTime()})});a.set("lte",
function(b,c){return null===b||null===c?!1:b.getTime()<=c.getTime()});a.set("lt",function(b,c){return null===b||null===c?!1:b.getTime()<c.getTime()});a.set("neq",function(b,c){return(null===b?-1:b.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.C=null}var ge=[];J.prototype.getParent=h("C");J.prototype.bb=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function he(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function M(a){return a.h||ge}function ie(a,b){return M(a)[b]||null}function je(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function ke(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function le(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return le(this,M(this).indexOf(a))};function me(a,b,c){ie(a,c).C=null;b.C=a;a.h[c]=b}function ne(a,b,c){!1!==b.call(c,a)&&M(a).forEach(function(d){ne(d,b,c)})};function oe(){J.call(this);this.ra=pe++}u(oe,J);var pe=0;oe.prototype.W=h("ra");function qe(a,b,c){oe.call(this);this.J=a;this.value=b;this.F=c;this.uc=fe(ee(),this.J.G(),this.F);this.Va=!1;this.bc=b}u(qe,oe);n=qe.prototype;n.Nb=function(){var a=new qe(this.J,this.value,this.F);a.bc=this.bc;a.vd(this.Va);var b=this.W();a.ra=b;return a};n.lb=function(a){return null!=a?(a.push(this.J),a):[this.J]};n.s=function(a){a=null!=a?a:D();a.add(this.J.I());return a};n.vd=ba("Va");
function re(a){var b=!1;a.value instanceof Wd||(b="array"==fa(a.value)?!a.value.some(function(c){return c instanceof Wd}):!0);if(!b)throw new F(501);}n.eval=function(a){re(this);if("in"==this.F)return se(this,a);var b=a.entries.filter(function(c){return this.uc(I(c,this.J),this.value)!=this.Va},this);return new H(b,a.s())};
n.bind=function(a){if(this.bc instanceof Wd){var b=this.bc.Ca();if(a.length<=b)throw new F(510);this.value=a[b]}else"array"==fa(this.bc)&&(this.value=this.bc.map(function(c){if(c instanceof Wd){var d=c.Ca();if(a.length<=d)throw new F(510);return a[c.Ca()]}return c}))};function se(a,b){var c=D(a.value),d=function(e){return null===e?!1:c.has(e)!=this.Va}.bind(a);a=b.entries.filter(function(e){return d(I(e,this.J))},a);return new H(a,b.s())}
n.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Va?"(complement)":"")+" "+this.value+")"};n.ld=function(){re(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
n.we=function(){var a=null;if("between"==this.F)a=new yd(te(this,this.value[0]),te(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(b){return new yd(b,b,!1,!1)}),new Hd(this.Va?Gd(a):a);a=te(this,this.value);a="eq"==this.F?new yd(a,a,!1,!1):"gte"==this.F?new yd(a,G,!1,!1):"gt"==this.F?new yd(a,G,!0,!1):"lte"==this.F?new yd(G,a,!1,!1):new yd(G,a,!1,!0)}return new Hd(this.Va?zd(a):[a])};function te(a,b){return 2==a.J.G()?b.getTime():b};function ue(a){this.aa=a;this.Wc=this.Ga=null}function ve(a,b){null===a.Ga&&null!=a.w&&(a.Ga=we(a.w));return a.Ga.get(b)||null}function we(a){var b=A();ne(a,function(c){b.set(c.W(),c)});return b}function xe(a,b){b.w&&(a.w=b.w.Nb());a.Wc=b}ue.prototype.bind=function(){return this};function ye(a,b){a=a.w;null!=a&&ne(a,function(c){c instanceof qe&&c.bind(b)})};function ze(a){ue.call(this,a)}u(ze,ue);function Ae(a){var b="";a.forEach(function(c,d){b+=c.J.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ze.prototype.da=function(){return D(this.from)};ze.prototype.clone=function(){var a=new ze(this.aa);xe(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.qa&&(a.qa=this.qa.slice());this.Tb&&(a.Tb=this.Tb);this.Jb&&(a.Jb=this.Jb);a.eb=this.eb;return a};
ze.prototype.bind=function(a){ze.hb.bind.call(this,a);null!=this.Tb&&(this.X=a[this.Tb.Ca()]);null!=this.Jb&&(this.L=a[this.Jb.Ca()]);ye(this,a);return this};function Be(a,b){this.Ha=a;this.$=b}Be.prototype.bb=h("Ha");Be.prototype.da=h("$");function Ce(a){var b=D();a.forEach(function(c){c.da().forEach(b.add.bind(b))});return b};function De(a,b){this.global=a;this.ab=a.b(vc);this.td=b.map(function(c){return c.context});this.jf=b.map(function(c){return c.je});this.Md=Ce(this.jf);this.xe=Ee(this);this.Db=fb()}function Ee(a){return a.td.some(function(b){return!(b instanceof ze)})?1:0}n=De.prototype;
n.exec=function(){function a(){var f=d.shift();if(f){var g=e[c.length];return f.bb().exec(b,g).then(function(k){c.push(k[0]);return a()})}return x()}var b=0==this.xe?void 0:new td(this.global,this.Md),c=[],d=this.jf.slice(),e=this.td;return a().then(function(){this.ja=this.ab.Fb(this.xe,E(this.Md),b);return this.ja.ka()}.bind(this)).then(function(){this.ge(c);return c}.bind(this),function(f){null!=b&&b.Ib();throw f;})};n.G=h("xe");n.da=h("Md");n.W=function(){return ka(this)};n.ge=aa();
n.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new C(!1,0,0,0,0):a};function Fe(a,b){De.call(this,a,b);this.Hb=a.b(Ac)}u(Fe,De);Fe.prototype.getPriority=m(0);Fe.prototype.ge=function(a){this.td.forEach(function(b,c){Ge(this.Hb,b,a[c])},this)};function He(a,b){this.c=a;this.Hb=a.b(Ac);this.Ia=a.b(zc);this.gd=new Rc(a);this.ib=b;var c=a.b(Bc);a=this.ib.map(function(d){return c.table(d.getName())});this.$=D(a);this.Db=fb()}n=He.prototype;n.exec=function(){this.gd.update(this.ib);this.Lc();return x()};n.G=m(1);n.da=h("$");n.W=function(){return ka(this)};n.getPriority=m(1);n.Lc=function(){var a=Ie(this.Hb,this.$);0!=a.length&&(a=new Fe(this.c,a),Je(this.Ia,a))};function Ke(a){this.c=a;this.ab=a.b(vc);this.Ia=a.b(zc)}Ke.prototype.ee=function(a){a=new He(this.c,a);Je(this.Ia,a)};function N(a,b){this.Ta=a;this.i=b;this.Ya=A()}t("lf.backstore.FirebaseRawBackStore",N);N.prototype.cd=h("i");N.prototype.dd=function(){throw new F(351);};function Le(a,b){var c=fb(),d=a;b.length&&(d=a.child(b));d.once("value",function(e){c.resolve(e.val())},function(e){c.reject(e)});return c.ha}function Me(a,b,c){function d(f){f?e.reject(f):e.resolve()}c=c||!1;var e=fb();c?a.set(b,d):a.update(b,d);return e.ha}
N.prototype.Ea=function(a){return Le(this.i,"@rev/R").then(function(b){this.Ra=b;return Le(this.i,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.Ya.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(e){this.Ya.has(e.getName())||(b[e.getName()]=++c)},this);var d=this.i.child("@table");return Me(d,b)}.bind(this))};
function Ne(a,b,c){var d=a.Ya.get(b);return null!=d?function(){var e={},f=fb();this.i.orderByChild("T").equalTo(d).once("value",function(g){g.forEach(function(k){var l=c(k.val());e[parseInt(k.key(),10)]=l});f.resolve(e)});return f.ha}.call(a).then(function(e){e["@rev"]={R:++this.Ra};return Me(this.i,e)}.bind(a)):x()}N.prototype.sc=function(a){return Ne(this,a,m(null)).then(function(){this.Ya.delete(a);return Me(this.i.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.sc;
N.prototype.qc=function(a,b,c){return Ne(this,a,function(d){var e=d.P;e[b]=c;return{R:this.Ra+1,T:d.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.qc;N.prototype.tc=function(a,b){return Ne(this,a,function(c){var d=c.P;delete d[b];return{R:this.Ra+1,T:c.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.tc;N.prototype.Kc=function(a,b,c){return Ne(this,a,function(d){var e=d.P;e[c]=e[b];delete e[b];return{R:this.Ra+1,T:d.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Kc;
N.prototype.xb=function(){throw new F(351);};N.prototype.createRow=N.prototype.xb;N.prototype.Bc=h("Ta");N.prototype.getVersion=N.prototype.Bc;N.prototype.dc=function(a){var b=fb();a=this.Ya.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(c){var d=[];c.forEach(function(e){d.push(e.val().P)});b.resolve(d)});return b.ha};N.prototype.dump=function(){var a={},b=gc(this.Ya).map(function(c){return this.dc(c).then(function(d){a[c]=d})}.bind(this));return eb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function Oe(a,b,c){nc.call(this,b,c);this.i=a}u(Oe,nc);Oe.prototype.I=function(a){return this.i.zc(a)};
Oe.prototype.rc=function(){if(0==this.yd)return this.S.resolve(),this.S.ha;var a=this.Qa.ib;if(0==a.size)this.S.resolve();else{var b=this.i.Ra+1;this.i.Ra=b;var c={"@rev":{R:b}};a.forEach(function(d,e){var f=this.i.Ya.get(e);d.ua.forEach(function(g,k){c[k]={R:b,T:f,P:g.m}});d.la.forEach(function(g,k){c[k]={R:b,T:f,P:g[1].m}});d.va.forEach(function(g,k){c[k]=null})},this);this.i.i.update(c,function(d){null===d?this.S.resolve():(this.i.Ra=b-1,d=B(a).map(function(e){return Pe(this.i,e.getName())},this),
eb(d).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha};function Qe(){this.Ba=A()}function Re(a,b){if(0==b.length)return B(a.Ba);var c=[];b.forEach(function(d){d=this.Ba.get(d)||null;null===d||c.push(d)},a);return c}Qe.prototype.getData=h("Ba");Qe.prototype.get=function(a){return x(Re(this,a))};function Se(a,b){b.forEach(function(c){this.Ba.set(c.id(),c)},a)}Qe.prototype.put=function(a){Se(this,a);return x()};function Te(a,b){0==b.length||b.length==a.Ba.size?a.Ba.clear():b.forEach(function(c){this.Ba.delete(c)},a)}
Qe.prototype.remove=function(a){Te(this,a);return x()};function Ue(a){return 0==a.Ba.size?0:gc(a.Ba).reduce(function(b,c){return b>c?b:c},0)};function Ve(a,b){this.g=a;this.Df=b;this.Jc=A();this.Ra=-1;this.M=A();this.Ya=A();this.Jd=null}n=Ve.prototype;
n.Ea=function(a){this.i=this.Df.child(this.g.name());var b=a||function(){return x()};return Le(this.i,"@db/version").then(function(c){return null===c?Me(this.i,We(this),!0).then(function(){var d=new N(0,this.i);return b(d)}.bind(this)).then(function(){return this.Ea()}.bind(this)):c==this.g.version()?Le(this.i,"@rev/R").then(function(d){this.Ra=d;return Le(this.i,"@table")}.bind(this)).then(function(d){for(var e in d)this.Ya.set(e,d[e]);d=this.g.oa().map(function(f){return Pe(this,f.getName())},this);
return eb(d)}.bind(this)).then(function(){Xe(this);Ye(this);return x()}.bind(this)):this.he(c,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};n.he=function(a,b){var c=new N(a,this.i);return c.Ea(this.g).then(function(){return x()}.bind(this)).then(function(){return b(c)}).then(function(){var d=this.i.child("@db");return Me(d,{version:this.g.version()},!0)}.bind(this))};
function Ye(a){a.i.off();a.i.on("child_removed",a.zg.bind(a));a.Kd&&(a.Kd.off(),a.Jc.clear());a.Kd=a.i.orderByChild("R").startAt(a.Ra+1);a.Kd.on("value",a.ee.bind(a))}function Xe(a){ic=B(a.M).map(function(b){return Ue(b)}).reduce(function(b,c){return b>c?b:c},0)+1}n.zg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=D(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
n.ee=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ra&&(this.Ra=b,a=Ze(this,a),a.forEach(function(c){var d=this.M.get(c.getName()),e=gc(c.va);0<e.length&&Te(d,e);var f=B(c.ua);c.la.forEach(function(g){f.push(g[1])});Se(d,f)},this),0<a.length&&this.Fc(a),Ye(this))};
function Ze(a,b){var c=D(),d=A();a.Ya.forEach(function(e,f){var g=this.M.get(f),k=new rd(f);this.Jc.has(e)&&(f=E(this.Jc.get(e)),f.forEach(function(l){c.add(l)}),Re(g,f).forEach(function(l){k.delete(l)}));d.set(e,k)}.bind(a));b.forEach(function(e){if("@rev"!=e.key()){var f=parseInt(e.key(),10);if(!c.has(f)){var g=e.val();e=d.get(g.T);var k=this.M.get(e.getName());g=this.g.table(e.getName()).kb({id:f,value:g.P});k.getData().has(f)?e.modify([Re(k,[f])[0],g]):e.add(g)}}}.bind(a));return B(d).filter(function(e){return!e.jd()})}
function Pe(a,b){var c=fb(),d=a.Ya.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(f){var g=new Qe,k=[];f.forEach(function(l){k.push(e.kb({id:parseInt(l.key(),10),value:l.val().P}))});Se(g,k);this.M.set(b,g);c.resolve()}.bind(a));return c.ha}function We(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Ra=1;b["@table"]={};a.g.oa().forEach(function(c,d){c=c.getName();b["@table"][c]=d;this.M.set(c,new Qe);this.Ya.set(c,d)},a);return b}
n.Fb=function(a,b,c){return new Oe(this,a,c)};n.zc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new F(101,a);};n.close=aa();n.subscribe=ba("Jd");n.Fc=function(a){null!=this.Jd&&this.Jd(a)};n.Oc=m(!1);function O(a,b,c,d){this.i=b;this.ja=c;this.Ta=a;this.Uc=d}t("lf.backstore.IndexedDBRawBackStore",O);O.prototype.cd=h("i");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=h("ja");O.prototype.getRawTransaction=O.prototype.dd;O.prototype.sc=function(a){return new w(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};O.prototype.dropTable=O.prototype.sc;
function $e(a,b,c,d){return new w(function(e,f){try{var g=this.ja.objectStore(b);var k=g.openCursor()}catch(l){f(l);return}k.onsuccess=function(){var l=k.result;l?(c(l),l.continue()):(d(g),e())};k.onerror=f},a)}function af(a){return a instanceof ArrayBuffer?lc(a):a instanceof Date?a.getTime():a}function bf(a,b,c){function d(f){var g=Mc(f.value),k=g.m,l;for(l in k){var p=jc(k[l]);c(p);k[l]=p.Ja()}f.update(g.Ja())}function e(f){var g=jc(f.value);c(g);f.update(g.Ja())}return $e(a,b,a.Uc?d:e,aa())}
O.prototype.qc=function(a,b,c){var d=af(c);return bf(this,a,function(e){e.m[b]=d})};O.prototype.addTableColumn=O.prototype.qc;O.prototype.tc=function(a,b){return bf(this,a,function(c){delete c.m[b]})};O.prototype.dropTableColumn=O.prototype.tc;O.prototype.Kc=function(a,b,c){return bf(this,a,function(d){d.m[c]=d.m[b];delete d.m[b]})};O.prototype.renameTableColumn=O.prototype.Kc;
function cf(a,b){var c=[];return new w(function(d,e){try{var f=this.ja.objectStore(b).openCursor()}catch(g){e(g);return}f.onsuccess=function(){var g=f.result;if(g){if(this.Uc){var k=Mc(g.value).m,l;for(l in k)c.push(k[l])}else c.push(g.value);g.continue()}else d(c)}.bind(this);f.onerror=e},a)}O.prototype.xb=function(a){var b={},c;for(c in a)b[c]=af(a[c]);return kc(b)};O.prototype.createRow=O.prototype.xb;O.prototype.Bc=h("Ta");O.prototype.getVersion=O.prototype.Bc;
O.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return eb(b).then(function(e){var f={};e.forEach(function(g,k){f[a.item(k)]=g});return f})};O.prototype.dump=O.prototype.dump;O.prototype.dc=function(a){return cf(this,a).then(function(b){return b.map(function(c){return c.value})})};function df(a,b){this.ba=a;this.Ob=b}df.prototype.get=function(a){if(0==a.length)return ef(this);a=a.map(function(b){return new w(function(c,d){try{var e=this.ba.get(b)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(f){c(this.Ob(f.target.result))}.bind(this)},this)},this);return eb(a)};
function ef(a){return new w(function(b,c){var d=[];try{var e=this.ba.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var f=e.result;f?(d.push(this.Ob(f.value)),f.continue()):b(d)}.bind(this)},a)}df.prototype.Ub=function(a){return new w(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};df.prototype.put=function(a){if(0==a.length)return x();a=a.map(function(b){return this.Ub(function(){return this.ba.put(b.Ja())}.bind(this))},this);return eb(a)};
df.prototype.remove=function(a,b){function c(){var e=a.map(function(f){return d.Ub(function(){return d.ba.delete(f)})});return eb(e)}var d=this;return b?c():new w(function(e,f){var g=d.ba.count();g.onsuccess=function(k){0==a.length||k.target.result==a.length?d.Ub(function(){return d.ba.clear()}).then(e,f):c().then(e,f)};g.onerror=f})};function ff(a,b,c,d,e){nc.call(this,c,e);this.c=a;this.ja=b;this.Uc=d;this.ja.oncomplete=this.S.resolve.bind(this.S);this.ja.onabort=this.S.reject.bind(this.S)}u(ff,nc);ff.prototype.I=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Nc(a,b,0==c?ra(Pc,this.c):Qc)):new df(this.ja.objectStore(a),b)};ff.prototype.rc=function(){return this.S.ha};function gf(a,b){this.c=a;this.g=b;this.Gd=b.ke.Sf||!1}n=gf.prototype;
n.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new F(352);var c=a||function(){return x()};return new w(function(d,e){try{var f=b.open(this.g.name(),this.g.version())}catch(g){e(g);return}f.onerror=function(g){g=g.target.error;e(new F(361,g.name,g.message))};f.onupgradeneeded=function(g){hf(this,c,g).then(aa(),e)}.bind(this);f.onsuccess=function(g){this.i=g.target.result;this.qe().then(function(k){ic=Math.max(ic,k+1);d(this.i)}.bind(this))}.bind(this)},
this)};function hf(a,b,c){var d=c.target.result;c=new O(c.oldVersion,d,c.target.transaction,a.Gd);jf(d);a.g.oa().forEach(ra(a.Lf,d),a);return b(c)}function jf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(e){try{a.deleteObjectStore(e)}catch(f){}})}
n.Lf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Da().forEach(function(c){kf(a,c.j())},this),kf(a,mf(b)))};function kf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}n.Fb=function(a,b,c){b=this.i.transaction(nf(b),0==a?"readonly":"readwrite");return new ff(this.c,b,a,this.Gd,c)};
function nf(a){var b=D();a.forEach(function(c){b.add(c.getName());c.Cb()&&(c.Da().forEach(function(d){b.add(d.j())}),b.add(mf(c)))});return E(b)}
n.qe=function(){function a(){if(0==c.length)return x();var g=c.shift();return b(g).then(a)}function b(g){return new w(function(k,l){try{var p=d.transaction([g]).objectStore(g).openCursor(null,"prev")}catch(r){l(r);return}p.onsuccess=function(r){(r=r.target.result)&&(e=Math.max(e,f(r)));k(e)};p.onerror=function(){k(e)}})}var c=this.g.oa().map(function(g){return g.getName()}),d=this.i,e=0,f=function(g){return this.Gd?(g=Mc(g.value),Object.keys(g.m).reduce(function(k,l){return Math.max(k,l)},0)):g.key}.bind(this);
return new w(function(g){a().then(function(){g(e)})})};n.close=function(){this.i.close()};n.zc=function(){throw new F(511);};n.subscribe=aa();n.Fc=aa();n.Oc=m(!0);function of(a,b,c){nc.call(this,b,c);this.ba=a;0==b&&this.S.resolve()}u(of,nc);of.prototype.I=function(a){return this.ba.zc(a)};of.prototype.rc=function(){this.S.resolve();return this.S.ha};function pf(a){this.g=a;this.M=A()}n=pf.prototype;n.Ea=function(){this.g.oa().forEach(this.gg,this);return x()};n.zc=function(a){var b=this.M.get(a)||null;if(null===b)throw new F(101,a);return b};n.Fb=function(a,b,c){return new of(this,a,c)};function qf(a,b){if(!a.M.has(b)){var c=new Qe;a.M.set(b,c)}}n.gg=function(a){qf(this,a.getName());a.Cb()&&(a.Da().forEach(function(b){qf(this,b.j())},this),qf(this,mf(a)))};n.close=aa();n.subscribe=aa();n.Fc=aa();n.Oc=m(!0);function rf(a){pf.call(this,a);this.pd=null}u(rf,pf);rf.prototype.subscribe=function(a){null===this.pd&&(this.pd=a)};rf.prototype.Fc=function(a){null===this.pd||this.pd(a)};rf.prototype.Oc=m(!1);function sf(a,b,c){this.ja=a;this.A='"'+b+'"';this.Ob=c}sf.prototype.get=function(a){var b=this.Ob;return tf(this.ja,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(c){for(var d=c.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:c.rows.item(f).id,value:JSON.parse(c.rows.item(f).value)});return e})};
sf.prototype.put=function(a){if(0==a.length)return x();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(c){tf(this.ja,b,[c.id(),JSON.stringify(c.m)])},this);return x()};sf.prototype.remove=function(a){tf(this.ja,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return x()};function uf(a,b,c){nc.call(this,b,c);this.i=a;this.M=A();this.Nd=[]}u(uf,nc);function vf(a){return a.replace(".","__d__").replace("#","__s__")}uf.prototype.I=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new sf(this,vf(a),b),this.M.set(a,c));return c};function tf(a,b,c,d){var e=fb();a.Nd.push({Ng:b,Dg:c,transform:d,S:e});return e.ha}
uf.prototype.rc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(f,g){this.S.reject(g)}.bind(this),d=[],e=function(f,g){if(null!==a){var k=g;null!=a.transform&&null!=g&&(k=a.transform(g));d.push(k);a.S.resolve(k)}0<this.Nd.length?(a=g=this.Nd.shift(),f.executeSql(g.Ng,g.Dg,e,c)):this.S.resolve(d)}.bind(this);0==this.yd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.S.ha};function P(a,b,c){this.i=c;this.c=a;this.Ta=b}t("lf.backstore.WebSqlRawBackStore",P);P.prototype.cd=h("i");P.prototype.getRawDBInstance=P.prototype.cd;P.prototype.dd=function(){throw new F(356);};P.prototype.getRawTransaction=P.prototype.dd;function wf(a){return new uf(a.i,1,new td(a.c,D()))}P.prototype.sc=function(a){var b=wf(this);tf(b,"DROP TABLE "+a,[]);return b.ka()};P.prototype.dropTable=P.prototype.sc;
P.prototype.dc=function(a){var b=wf(this);tf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(c){for(var d=c[0].rows.length,e=Array(d),f=0;f<d;++f)e[f]={id:c[0].rows.item(f).id,value:JSON.parse(c[0].rows.item(f).value)};return x(e)})};function xf(a,b,c){var d=wf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(f){f.forEach(function(g){g=c(g);tf(d,e,[JSON.stringify(g.value),g.id])});return d.ka()})}
P.prototype.qc=function(a,b,c){var d=af(c);return xf(this,a,function(e){e.value[b]=d;return e})};P.prototype.addTableColumn=P.prototype.qc;P.prototype.tc=function(a,b){return xf(this,a,function(c){delete c.value[b];return c})};P.prototype.dropTableColumn=P.prototype.tc;P.prototype.Kc=function(a,b,c){return xf(this,a,function(d){d.value[c]=d.value[b];delete d.value[b];return d})};P.prototype.renameTableColumn=P.prototype.Kc;P.prototype.xb=function(a){var b={},c;for(c in a)b[c]=af(a[c]);return kc(b)};
P.prototype.createRow=P.prototype.xb;P.prototype.Bc=h("Ta");P.prototype.getVersion=P.prototype.Bc;function yf(a){tf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(b){for(var c=Array(b.rows.length),d=0;d<c.length;++d)c[d]=b.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=fb(),b=wf(this);yf(b);var c={};b.ka().then(function(d){d=d[0].filter(function(e){return"__lf_ver"!=e&&"__WebKitDatabaseInfoTable__"!=e}).map(function(e){return this.dc(e).then(function(f){c[e]=f})},this);eb(d).then(function(){a.resolve(c)})}.bind(this));return a.ha};P.prototype.dump=P.prototype.dump;function zf(a,b,c){this.c=a;this.g=b;this.Mg=c||1}n=zf.prototype;n.Ea=function(a){if(null==window.openDatabase)throw new F(353);var b=a||function(){return x()};return new w(function(c,d){var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Mg);if(null!=e)this.i=e,Af(this,b).then(function(){this.qe().then(c,d)}.bind(this),function(f){if(f instanceof F)throw f;throw new F(354,f.message);});else throw new F(354);},this)};
function Af(a,b){var c=fb(),d=new uf(a.i,1,new td(a.c,D()));tf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);tf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(e){var f=0;e[1].rows.length&&(f=e[1].rows.item(0).v);f<this.g.version()?this.he(b,f).then(c.resolve.bind(c)):f>this.g.version()?c.reject(new F(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}n.Fb=function(a,b,c){if(null!=this.i)return new uf(this.i,a,c);throw new F(2);};n.close=aa();
n.zc=function(){throw new F(512);};n.subscribe=function(){throw new F(355);};n.Fc=function(){throw new F(355);};n.he=function(a,b){return Bf(this).then(function(){return a(new P(this.c,b,this.i))}.bind(this))};
function Bf(a){var b=a.g.oa(),c=new uf(a.i,1,new td(a.c,D())),d=new uf(a.i,1,new td(a.c,D()));tf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);yf(c);return c.ka().then(function(e){var f=e[1];f.filter(function(p){return-1!=p.indexOf("__d__")}).forEach(function(p){tf(d,"DROP TABLE "+('"'+p+'"'),[])});var g=[],k=[],l=[];b.map(function(p){-1==f.indexOf(p.getName())&&g.push(p.getName());p.Cb&&(p.Da().forEach(function(r){r=vf(r.j());g.push(r);k.push(r)}),p=vf(mf(p)),g.push(p),l.push(p))});
g.forEach(function(p){tf(d,"CREATE TABLE "+('"'+p+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}n.qe=function(){var a=0,b=fb(),c=function(e){var f=new uf(this.i,0);tf(f,"SELECT MAX(id) FROM "+('"'+e+'"'),[]);return f.ka().then(function(g){g=g[0].rows.item(0)["MAX(id)"];a=Math.max(g,a)})}.bind(this),d=this.g.oa().map(function(e){return c(e.getName())});eb(d).then(function(){ic=Math.max(ic,a+1);b.resolve()},function(e){b.reject(e)});return b.ha};n.Oc=m(!0);function Cf(a){this.l=A();this.mc=A();a.oa().forEach(function(b){this.mc.set(b.getName(),D())},this)}n=Cf.prototype;n.set=function(a,b){this.l.set(b.id(),b);this.mc.get(a).add(b.id())};n.Xb=function(a,b){var c=this.mc.get(a);b.forEach(function(d){this.l.set(d.id(),d);c.add(d.id())},this)};n.get=function(a){return this.l.get(a)||null};function Df(a,b){return b.map(function(c){return this.get(c)},a)}
n.Ua=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.mc.get(a);if(a.size<f-e)a.forEach(function(g){g>=e&&g<=f&&(g=this.l.get(g),d.push(g))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};n.remove=function(a,b){this.l.delete(b);this.mc.get(a).delete(b)};n.yc=function(){return this.l.size};n.clear=function(){this.l.clear();this.mc.clear()};function Ef(a,b,c){var d=0,e=a.length;for(c=c||Ff;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Ff(a,b){return a-b}function Gf(a,b,c){c=Ef(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Hf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function If(){this.ia=0;this.Ec=null}If.prototype.add=function(a,b){this.ia+=b;this.Ec=null===this.Ec?a:a>this.Ec?a:this.Ec};If.prototype.remove=function(a,b){this.ia-=b};If.prototype.clear=function(){this.ia=0};function Jf(a,b){a.clear();b.forEach(function(c){this.ia+=c.ia},a)};function Kf(a,b,c){this.A=a;this.Z=b;this.yf=c;this.za=new If;this.clear()}var Lf=[];n=Kf.prototype;n.getName=h("A");n.toString=function(){return this.ya.toString()};n.add=function(a,b){this.ya=this.ya.Ab(a,b)};n.set=function(a,b){this.ya=this.ya.Ab(a,b,!0)};n.remove=function(a,b){this.ya=this.ya.remove(a,b)};n.get=function(a){return this.ya.get(a)};n.Zc=function(a){if(null==a)return this.Y().ia;if(a instanceof yd){if(Ad(a))return this.Y().ia;if(Ed(a))return this.get(a.from).length}return this.Ua([a]).length};
n.Y=h("za");n.Vd=function(a,b,c){var d=Array(a);this.ya.fill({offset:b?this.za.ia-a-c:c,count:a,te:0},d);return b?d.reverse():d};
n.Ua=function(a,b,c,d){var e=Mf(this.ya).a[0];if(!q(e)||0==c)return Lf;b=b||!1;c=null!=c?Math.min(c,this.za.ia):this.za.ia;d=d||0;var f=Math.min(Math.max(this.za.ia-d,0),c);if(0==f)return Lf;if(!q(a)||1==a.length&&a[0]instanceof yd&&Ad(a[0]))return this.Vd(f,b,d);a=this.Z.uf(a);var g=Array(b?this.za.ia:f),k={count:0,X:g.length,reverse:b,L:d},l=1<this.jb().Zd();a.forEach(function(p){var r=this.Z.ud(p);r=this.Z.Xd(p)?e:r[0];r=this.ya.Yf(r);for(var W=0;null!=r&&k.count<k.X;){if(l){for(var K=r,y=p,L=
k,V=g,na=K.u.jb(),ib=-1,Ta=0;Ta<K.a.length;++Ta)if(na.Bb(K.a[Ta],y)){ib=Ta;break}if(-1!=ib)for(Ta=ib;Ta<K.a.length&&L.count<L.X;++Ta)na.Bb(K.a[Ta],y)&&Nf(K,L,V,Ta)}else r.Ua(p,k,g);0!=k.L||r.kd(p)?W=0:W++;r=2==W?null:r.next()}},this);g.length>k.count&&g.splice(k.count,g.length-k.count);return b?Hf(g,b,c,d):g};n.clear=function(){this.ya=Of(this);this.za.clear()};n.Oa=function(a){return this.ya.Oa(a)};n.min=function(){return this.Gb(this.Z.min.bind(this.Z))};n.max=function(){return this.Gb(this.Z.max.bind(this.Z))};
function Pf(a,b,c){if(!a.Z.Od(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.yf?[b.D[c]]:b.D[c]]}n.Gb=function(a){a:{var b=Mf(this.ya);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=Pf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Qf(this.ya);d=c.a.length-1;do if(0>d)c=c.qb,d=0;else{var e=Pf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};n.Ma=h("yf");n.jb=h("Z");
n.Pa=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};n.Ja=function(){for(var a=[],b=Mf(this.ya);b;)a.push(new hc(b.ra,[b.a,b.D])),b=b.xa;return a};function Rf(a,b,c,d){a=new Kf(b,a,c);d=Sf(d,a);a.ya=d;return a}function Tf(a,b){this.ra=a;this.u=b;this.mb=0;this.xa=this.qb=this.C=null;this.a=[];this.D=[];this.h=[];this.Yf=1==b.jb().Zd()?this.Pe:this.Oe}function Of(a){return new Tf(ic++,a)}function Uf(a){return 0==a.mb}n=Tf.prototype;n.next=h("xa");
function Vf(a){function b(g){return null!=g?g.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(g){return g.ra}).join("|"),e=a.D.join("/"),f=b(a.qb)+"{";f=Uf(a)?f+e:f+d;f=f+"}"+b(a.C);a.xa&&(a=Vf(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}n.toString=function(){var a="",b=Vf(this);a+=b[0]+"\n"+b[1]+"\n";this.h.length&&(a+=this.h[0].toString());return a};function Mf(a){return Uf(a)?a:Mf(a.h[0])}function Qf(a){return Uf(a)?a:Qf(a.h[a.h.length-1])}
function Wf(a,b){b&&(b.qb=a);a&&(a.xa=b)}function Xf(a){var b=a[0],c=Of(b.u);c.mb=b.mb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.a.push(a[b].a[0]);return c}function Yf(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Xf(c);else{var d=c.length,e=0;b=Of(a.u);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),g=Xf(f);g.C=b;b.h.length&&(b.a.push(f[0].a[0]),Wf(b.h[b.h.length-1],g));b.h.push(g);e+=a;d-=a}}return b}
n.get=function(a){var b=Zf(this,a);if(Uf(this)){var c=Lf;this.u.Pa(this.a[b],a)&&(c=c.concat(this.D[b]));return c}b=this.u.Pa(this.a[b],a)?b+1:b;return this.h[b].get(a)};n.Oa=function(a){var b=Zf(this,a);return this.u.Pa(this.a[b],a)?!0:Uf(this)?!1:this.h[b].Oa(a)};n.remove=function(a,b){$f(this,a,-1,b);return null===this.C?(a=this,1==this.h.length&&(a=this.h[0],a.C=null),a):this};function ag(a){return Uf(a)?a.a[0]:ag(a.h[0])}
function bg(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(ag(a.h[b]))}
function $f(a,b,c,d){var e=Zf(a,b),f=Uf(a);if(!f){var g=a.u.Pa(a.a[e],b)?e+1:e;if($f(a.h[g],b,g,d))bg(a);else return!1}else if(!a.u.Pa(a.a[e],b))return!1;if(a.a.length>e&&a.u.Pa(a.a[e],b)){if(q(d)&&!a.u.Ma()&&f&&(g=a.D[e],d=Ef(g,d,void 0),0>d?d=!1:(g.splice(d,1),d=!0),d&&a.u.Y().remove(b,1),a.D[e].length))return!1;a.a.splice(e,1);f&&(f=a.u.Ma()?1:a.D[e].length,a.D.splice(e,1),a.u.Y().remove(b,f))}if(256>a.a.length&&null!==a.C){a:{if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.qb&&
256<a.qb.a.length)b=a.qb,d=a.qb.a.length-1,e=Uf(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=Uf(a)?a.D:a.h;Uf(a)?g=b.D:(g=b.h,g[e].C=a);d.splice(f,0,g[e]);g.splice(e,1);Uf(b)||(bg(b),bg(a));b=!0}b||cg(a,c)}return!0}
function cg(a,b){var c;if(a.xa&&511>a.xa.a.length){var d=a.xa;var e=c=0}else a.qb&&(d=a.qb,c=d.a.length,e=Uf(d)?d.D.length:d.h.length);c=[c,0].concat(a.a);Array.prototype.splice.apply(d.a,c);c=null;Uf(a)?c=a.D:(c=a.h,c.forEach(function(f){f.C=d}));c=[e,0].concat(c);Array.prototype.splice.apply(Uf(d)?d.D:d.h,c);Wf(a.qb,a.xa);Uf(d)||bg(d);-1!=b&&(a.C.a.splice(b,1),a.C.h.splice(b,1))}
n.Ab=function(a,b,c){var d=Zf(this,a);if(Uf(this)){if(this.u.Pa(this.a[d],a)){if(c)this.u.Y().remove(a,this.u.Ma()?1:this.D[d].length),this.D[d]=this.u.Ma()?b:[b];else{if(this.u.Ma())throw new F(201,this.u.getName(),JSON.stringify(a));if(!Gf(this.D[d],b))throw new F(109);}this.u.Y().add(a,1);return this}this.a.splice(d,0,a);this.D.splice(d,0,this.u.Ma()?b:[b]);this.u.Y().add(a,1);512==this.a.length?(d=Of(this.u),a=Of(this.u),a.mb=1,a.a=[this.a[256]],a.h=[this,d],a.C=this.C,this.C=a,d.a=this.a.splice(256),
d.D=this.D.splice(256),d.C=a,Wf(d,this.xa),Wf(this,d),d=a):d=this;return d}d=this.u.Pa(this.a[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);Uf(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?dg(this):this};
function dg(a){var b=Of(a.u),c=Of(a.u);b.C=a.C;b.mb=a.mb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.C=b;c.mb=a.mb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(d){d.C=c});a.C=b;Wf(c,a.xa);Wf(a,c);return b}function Zf(a,b){for(var c=0,d=a.a.length,e=a.u.jb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}n.Pe=function(a){if(!Uf(this)){var b=Zf(this,a);this.u.Pa(this.a[b],a)&&b++;return this.h[b].Pe(a)}return this};
n.Oe=function(a){if(!Uf(this)){var b=Zf(this,a);this.u.Pa(this.a[b],a)&&(a.some(function(c){return c==G})||b++);return this.h[b].Oe(a)}return this};
n.Ua=function(a,b,c){function d(y){return y[0]?y[1]?0:1:-1}var e=this.u.jb(),f=0,g=this.a.length-1,k=this.a,l=d(e.wb(k[f],a)),p=d(e.wb(k[g],a));if(1!=l&&(-1!=l||-1!=p)){var r=function(y,L){L=y+L>>1;return L==y?L+1:L},W=function(y,L,V){if(y>=L)return 0==V?L:-1;var na=d(e.wb(k[y],a));if(0==na)return y;if(1==na)return-1;na=r(y,L);if(na==L)return 0==V?L:-1;var ib=d(e.wb(k[na],a));return 0==ib?W(y,na,ib):-1==ib?W(na+1,L,V):W(y+1,na,ib)},K=function(y,L){if(y>=L)return y;var V=d(e.wb(k[L],a));if(0==V)return L;
if(-1==V)return y;V=r(y,L);if(V==L)return y;var na=d(e.wb(k[V],a));return 0==na?K(V,L):1==na?K(y,V-1):-1};0!=l&&(f=W(f+1,g,p));-1!=f&&(g=K(f,g),-1!=g&&g>=f&&eg(this,b,c,f,g+1))}};function Nf(a,b,c,d){if(a.u.Ma())!b.reverse&&b.L?b.L--:c[b.count++]=a.D[d];else for(var e=0;e<a.D[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.D[d][e]}function eg(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Nf(a,b,c,d)}
n.fill=function(a,b){if(Uf(this))for(var c=0;c<this.D.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.u.Ma()?1:this.D[c].length,0>a.offset)for(var d=this.D[c].length+a.offset;d<this.D[c].length&&0<a.count;++d)b[a.te++]=this.D[c][d],a.count--}else if(this.u.Ma())b[a.te++]=this.D[c],a.count--;else for(d=0;d<this.D[c].length&&0<a.count;++d)b[a.te++]=this.D[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Sf(a,b){var c=b.Y();a=a.map(function(e){var f=new Tf(e.id(),b);f.a=e.m[0];f.D=e.m[1];f.a.forEach(function(g,k){c.add(g,b.Ma()?1:f.D[k].length)});return f});for(var d=0;d<a.length-1;++d)Wf(a[d],a[d+1]);return 1<a.length?Yf(a[0]):a[0]}n.kd=function(a){return this.u.jb().kd(this.a[0],a)};function fg(a){this.Xc=0==a?gg:hg;this.ce=0==a?function(b){return null!=b?b.reverse():null}:function(b){return b||null};this.ie=0==a?ig:jg}function hg(a,b){return a>b?1:a<b?-1:0}function gg(a,b){return hg(b,a)}function jg(a,b){return Fd(a,b)}function ig(a,b){return Fd(b,a)}n=fg.prototype;n.wb=function(a,b){b=this.ce(b);var c=[b.from==G,b.o==G];if(!c[0]){var d=this.Xc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Xc(a,b.o),c[1]=b.na?-1==d:1!=d);return c};n.compare=function(a,b){return this.Xc(a,b)};
n.min=function(a,b){return a<b?1:a==b?0:-1};n.max=function(a,b){return a>b?1:a==b?0:-1};n.Bb=function(a,b){a=this.wb(a,b);return a[0]&&a[1]};n.kd=function(a,b){return this.Bb(a,b)};n.uf=function(a){return a.filter(function(b){return null!==b}).sort(function(b,c){return this.ie(b,c)}.bind(this))};n.Xd=function(a){return this.ce(a).from==G};n.ud=function(a){a=this.ce(a);return[a.from,a.o]};n.Od=function(a){return null!==a};n.Zd=m(1);
n.toString=function(){return this.compare==gg?"SimpleComparator_DESC":"SimpleComparator_ASC"};function kg(a){fg.call(this,a);this.Xc=0==a?lg:mg}u(kg,fg);function mg(a,b){return null===a?null===b?0:-1:null===b?1:hg(a,b)}function lg(a,b){return mg(b,a)}kg.prototype.Bb=function(a,b){return null===a?Ad(b):kg.hb.Bb.call(this,a,b)};kg.prototype.Gb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};kg.prototype.min=function(a,b){var c=this.Gb(a,b);null===c&&(c=kg.hb.min.call(this,a,b));return c};
kg.prototype.max=function(a,b){var c=this.Gb(a,b);null===c&&(c=kg.hb.max.call(this,a,b));return c};function ng(a){this.pa=a.map(function(b){return new fg(b)})}function og(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}n=ng.prototype;n.compare=function(a,b){return og(this,a,b,function(c,d,e){return d==G||e==G?0:c.compare(d,e)})};n.min=function(a,b){return og(this,a,b,function(c,d,e){return c.min(d,e)})};n.max=function(a,b){return og(this,a,b,function(c,d,e){return c.max(d,e)})};
n.wb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].wb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};n.Bb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Bb(a[d],b[d]);return c};n.kd=function(a,b){return this.pa[0].Bb(a[0],b[0])};
n.uf=function(a){var b=a.filter(function(d){return d.every(ha)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(d){return d[c]});a.forEach(function(d,e){d.sort(function(f,g){return this.pa[e].ie(f,g)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(d){return d[c]});return b.sort(function(d,e){for(var f=0,g=0;g<this.pa.length&&0==f;++g)f=this.pa[g].ie(d[g],e[g]);return f}.bind(this))};n.Xd=function(a){return this.pa[0].Xd(a[0])};
n.ud=function(a){var b=a.map(function(c,d){return this.pa[d].ud(c)[0]},this);a=a.map(function(c,d){return this.pa[d].ud(c)[1]},this);return[b,a]};n.Od=function(a){return a.every(function(b,c){return this.pa[c].Od(b)},this)};n.Zd=function(){return this.pa.length};function pg(a){ng.call(this,a);this.pa=a.map(function(b){return new kg(b)})}u(pg,ng);function qg(a){if(1==a.f.length)return new fg(a.f[0].order);var b=a.f.map(function(c){return c.order});return a.f.some(function(c){return c.aa.gc()})?new pg(b):new ng(b)};function rg(a){this.fa=a;this.ob=D();this.Nc=new If;this.za=new If}n=rg.prototype;n.getName=function(){return this.fa.getName()};n.add=function(a,b){null===a?(this.ob.add(b),this.Nc.add(a,1)):this.fa.add(a,b)};n.set=function(a,b){null===a?(this.ob.clear(),this.Nc.clear(),this.add(a,b)):this.fa.set(a,b)};n.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Nc.remove(a,1)):(this.ob.clear(),this.Nc.clear()):this.fa.remove(a,b)};n.get=function(a){return null===a?E(this.ob):this.fa.get(a)};n.Zc=function(a){return this.fa.Zc(a)};
n.Y=function(){Jf(this.za,[this.fa.Y(),this.Nc]);return this.za};n.Ua=function(a,b,c,d){b=this.fa.Ua(a,b,c,d);return null!=a?b:b.concat(E(this.ob))};n.clear=function(){this.ob.clear();this.fa.clear()};n.Oa=function(a){return null===a?0!=this.ob.size:this.fa.Oa(a)};n.min=function(){return this.fa.min()};n.max=function(){return this.fa.max()};n.Ja=function(){return[new hc(-2,E(this.ob))].concat(this.fa.Ja())};n.jb=function(){return this.fa.jb()};
function sg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new F(102);d=b[c].m;b=b.slice(0);b.splice(c,1);a=a(b);var e=new rg(a);d.forEach(function(f){e.ob.add(f)});return e}n.Ma=function(){return this.fa.Ma()};function tg(a){this.A=a;this.sb=D();this.Z=new fg(1)}n=tg.prototype;n.getName=h("A");n.add=function(a){if("number"!=typeof a)throw new F(103);this.sb.add(a)};n.set=function(a,b){this.add(a,b)};n.remove=function(a){this.sb.delete(a)};n.get=function(a){return this.Oa(a)?[a]:[]};n.min=function(){return this.Gb(this.Z.min.bind(this.Z))};n.max=function(){return this.Gb(this.Z.max.bind(this.Z))};
n.Gb=function(a){if(0==this.sb.size)return null;var b=E(this.sb).reduce(function(c,d){return null===c||1==a(d,c)?d:c},null);return[b,[b]]};n.Zc=function(){return this.sb.size};n.Ua=function(a,b,c,d){var e=a||[Dd()];a=E(this.sb).filter(function(f){return e.some(function(g){return this.Z.Bb(f,g)},this)},this);return Hf(a,b,c,d)};n.clear=function(){this.sb.clear()};n.Oa=function(a){return this.sb.has(a)};n.Ja=function(){return[new hc(0,E(this.sb))]};n.jb=h("Z");
function ug(a,b){var c=new tg(a);b[0].m.forEach(function(d){c.add(d,d)});return c}n.Ma=m(!0);n.Y=function(){var a=new If;a.ia=this.sb.size;return a};function vg(a){this.ab=a.b(vc);this.B=a.b(xc);this.V=a.b(wc)}vg.prototype.Ea=function(a){var b=a.oa(),c=function(){if(0==b.length)return x();var d=b.shift();return(d.Cb()?wg(this,d):xg(this,d)).then(c)}.bind(this);return c()};function xg(a,b){var c=a.ab.Fb(0,[b]);a=c.I(b.getName(),b.kb.bind(b),0).get([]).then(function(d){this.V.Xb(b.getName(),d);yg(this,b,d)}.bind(a));c.ka();return a}
function yg(a,b,c){var d=a.B.kc.get(b.getName())||[];c.forEach(function(e){d.forEach(function(f){var g=e.nb(f.getName());f.add(g,e.id())})})}function wg(a,b){var c=a.ab.Fb(0,[b]),d=c.I(b.getName(),b.kb,0).get([]).then(function(e){this.V.Xb(b.getName(),e)}.bind(a));a=b.Da().map(function(e){return zg(this,e,c)},a).concat(Ag(a,b,c));c.ka();return eb(a.concat(d))}
function zg(a,b,c){c=c.I(b.j(),jc,1);var d=qg(b);return c.get([]).then(function(e){if(0<e.length)if(Bg(b)){var f=Rf.bind(void 0,d,b.j(),b.Cc);e=sg(f,e);this.B.set(b.lc,e)}else e=Rf(d,b.j(),b.Cc,e),this.B.set(b.lc,e)}.bind(a))}function Ag(a,b,c){return c.I(mf(b),jc,1).get([]).then(function(d){0<d.length&&(d=ug(mf(b),d),this.B.set(b.getName(),d))}.bind(a))};function Cg(){this.ba=A();this.kc=A()}Cg.prototype.Ea=function(a){a.oa().forEach(function(b){var c=[];this.kc.set(b.getName(),c);var d=mf(b);if(null===this.get(d)){var e=new tg(d);c.push(e);this.ba.set(d,e)}b.Da().forEach(function(f){var g=qg(f);g=new Kf(f.j(),g,f.Cc);g=Bg(f)&&1==f.f.length?new rg(g):g;c.push(g);this.ba.set(f.j(),g)},this)},this);return x()};Cg.prototype.get=function(a){return this.ba.get(a)||null};
Cg.prototype.set=function(a,b){var c=this.kc.get(a)||null;null===c&&(c=[],this.kc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.ba.set(b.getName(),b)};function Dg(a,b){var c=[],d=null,e=null;ne(a,function(f){var g=b(f);null==f.getParent()?e=g:ke(d,g);var k=f.getParent();null!==k&&M(k).length==M(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<M(f).length&&c.push(g);d=null===f.h?c[c.length-1]:g});return e}function Eg(a){return Fg(a,function(b){return null===b.h})}
function Gg(a){var b=a.getParent(),c=0;null!==b&&(c=M(b).indexOf(a),b.removeChild(a));var d=M(a).slice();d.forEach(function(e,f){a.removeChild(e);null===b||je(b,e,c+f)});return{parent:b,children:d}}function Hg(a,b){M(a).slice().forEach(function(c){a.removeChild(c);ke(b,c)});ke(a,b)}function Ig(a){var b=ie(a,0);Gg(a);Hg(b,a);return b}
function Jg(a,b,c){var d=ie(a,0),e=M(d).slice();if(!e.some(function(f){return b(f)}))return a;Gg(a);e.forEach(function(f,g){if(b(f)){var k=c(a);le(d,g);ke(k,f);je(d,k,g)}});return d}function Kg(a,b,c,d){var e=a.getParent();null!==e&&(a=M(e).indexOf(a),le(e,a),je(e,c,a));M(b).slice().forEach(function(f){b.removeChild(f);ke(d,f)});return c}function Fg(a,b,c){function d(f){b(f)&&e.push(f);null!=c&&c(f)||M(f).forEach(d)}var e=[];d(a);return e}
function Lg(a,b){var c=b||function(e){return e.toString()+"\n"},d="";ne(a,function(e){for(var f=0;f<he(e);f++)d+="-";d+=c(e)});return d};function Mg(a){oe.call(this);this.pb=a;this.Va=!1}u(Mg,oe);n=Mg.prototype;n.Nb=function(){return Dg(this,function(a){if(a instanceof Mg){var b=new Mg(a.pb);b.Va=a.Va;a=a.W();b.ra=a;return b}return a.Nb()})};n.lb=function(a){var b=a||[];ne(this,function(c){c!=this&&c.lb(b)}.bind(this));a=D(b);return E(a)};n.s=function(a){var b=null!=a?a:D();ne(this,function(c){c!=this&&c.s(b)}.bind(this));return b};n.vd=function(a){this.Va!=a&&(this.Va=a,this.pb="and"==this.pb?"or":"and",M(this).forEach(function(b){return b.vd(a)}))};
n.eval=function(a){var b=M(this).map(function(c){return c.eval(a)});return Ng(this,b)};function Ng(a,b){return"and"==a.pb?Od(b):Pd(b)}n.toString=function(){return"combined_pred_"+this.pb.toString()};n.we=function(){if("or"==this.pb){var a=new Hd;M(this).forEach(function(b){b=b.we().wa();a.add(b)});return a}return new Hd};n.ld=function(){return"or"==this.pb?Og(this):!1};
function Og(a){var b=null;return M(a).every(function(c){if(!(c instanceof qe&&c.ld()))return!1;null===b&&(b=c.J);return b.j()==c.J.j()})};function Pg(a,b,c){oe.call(this);this.ga=a;this.ma=b;this.F=c;this.de=null;a=ee();this.uc=fe(a,this.ga.G(),this.F);this.ng=a.Ze.get(this.ga.G())||null}u(Pg,oe);n=Pg.prototype;n.Nb=function(){var a=new Pg(this.ga,this.ma,this.F),b=this.W();a.ra=b;return a};n.lb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};n.s=function(a){a=null!=a?a:D();a.add(this.ga.I());a.add(this.ma.I());return a};
n.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Pg(this.ma,this.ga,a)};n.eval=function(a){var b=a.entries.filter(function(c){var d=I(c,this.ga);c=I(c,this.ma);return this.uc(d,c)},this);return new H(b,a.s())};n.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.ma.j()+")"};
function Qg(a,b,c){if(-1!=b.s().indexOf(Td(a.ga.I()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.F){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.F=c;a.uc=fe(ee(),a.ga.G(),a.F)}return[b,d]}return[d,b]}function Rg(a){var b={};a.lb().forEach(function(c){b[c.getName()]=null});return b}
function Sg(a,b,c){null===a.de&&(a.de=Rg(a.ma.I()));var d=new Rd(new hc(-1,a.de),!1);return Vd(b,c,d,[Td(a.ma.I())])}
function Tg(a,b,c,d){var e=[b,c];d||(e=Qg(a,b,c));b=e[0];c=e[1];e=b;var f=c,g=a.ga,k=a.ma;d&&(e=c,f=b,g=a.ma,k=a.ga);var l=new bd,p=[];e.entries.forEach(function(K){var y=String(I(K,g));l.set(y,K)});var r=e.s(),W=f.s();f.entries.forEach(function(K){var y=I(K,k),L=String(y);null!==y&&l.has(L)?l.get(L).forEach(function(V){V=Vd(K,W,V,r);p.push(V)}):d&&p.push(Sg(this,K,W))}.bind(a));a=b.s().concat(c.s());return new H(p,a)}
function Ug(a,b,c,d,e){function f(K,y){y=new Rd(y,1<r.length);K=Vd(K,W,y,r);p.push(K)}var g=d.dg.I(),k=b,l=c;-1!=b.s().indexOf(Td(g))&&(k=c,l=b);var p=[],r=l.s(),W=k.s();k.entries.forEach(function(K){var y=this.ng(I(K,d.wg));y=d.index.get(y);0!=y.length&&(d.index.Ma()?f(K,e.get(y[0])):Df(e,y).forEach(f.bind(null,K)))},a);a=k.s().concat(l.s());return new H(p,a)};function Vg(a,b,c){return null===b?new qe(a,b,c):q(b.j)?new Pg(a,b,c):new qe(a,b,c)};var Wg={};t("lf.schema.DataStoreType",Wg);Wg.INDEXED_DB=0;Wg.MEMORY=1;Wg.LOCAL_STORAGE=2;Wg.FIREBASE=3;Wg.WEB_SQL=4;Wg.OBSERVABLE_STORE=5;function Xg(a,b,c,d){this.lc=a;this.name=b;this.Cc=c;this.f=d}Xg.prototype.j=function(){return this.lc+"."+this.name};function Bg(a){return a.f.some(function(b){return b.aa.gc()})}function Q(a,b,c,d){this.A=a;this.sa=c;this.K=b;this.rd=d;this.Ka=null}t("lf.schema.Table",Q);Q.prototype.getName=h("A");Q.prototype.getName=Q.prototype.getName;
function Td(a){return a.Ka||a.A}Q.prototype.as=function(a){var b=new this.constructor(this.A);b.Ka=a;b.Ig=this.Ig;return b};Q.prototype.as=Q.prototype.as;Q.prototype.createRow=Q.prototype.xb;Q.prototype.deserializeRow=Q.prototype.kb;Q.prototype.Da=h("sa");Q.prototype.getIndices=Q.prototype.Da;Q.prototype.lb=h("K");Q.prototype.getColumns=Q.prototype.lb;Q.prototype.getConstraint=Q.prototype.Ne;Q.prototype.Cb=h("rd");Q.prototype.persistentIndex=Q.prototype.Cb;function mf(a){return a.A+".#"};function R(a,b){this.child=a;this.Lb=b;this.Ka=null}n=R.prototype;n.getName=function(){return this.Lb+"("+this.child.getName()+")"};n.j=function(){return this.Lb+"("+this.child.j()+")"};n.I=function(){return this.child.I()};n.toString=function(){return this.j()};n.G=function(){return this.child.G()};n.Da=function(){return[]};n.Ca=m(null);n.gc=m(!1);n.as=function(a){this.Ka=a;return this};R.prototype.as=R.prototype.as;
function Yg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Zg(){this.Ka=null;this.U=new Q("#UnknownTable",[],[],!1)}n=Zg.prototype;n.getName=m("*");n.j=function(){return this.getName()};n.toString=function(){return this.j()};n.I=h("U");n.G=m(4);n.Da=function(){return[]};n.Ca=m(null);n.gc=m(!1);t("lf.fn.avg",function(a){return new R(a,"AVG")});function $g(a){return new R(a||new Zg,"COUNT")}t("lf.fn.count",$g);function ah(a){return new R(a,"DISTINCT")}t("lf.fn.distinct",ah);t("lf.fn.max",function(a){return new R(a,"MAX")});t("lf.fn.min",function(a){return new R(a,"MIN")});t("lf.fn.stddev",function(a){return new R(a,"STDDEV")});t("lf.fn.sum",function(a){return new R(a,"SUM")});t("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Uf=b}u(S,J);S.prototype.exec=function(a,b){switch(this.Uf){case 1:return bh(this,a,b);case 0:return ch(this,a,b);default:return dh(this,a,b)}};S.prototype.toString=m("dummy_node");S.prototype.Pc=function(){return this.toString()};function dh(a,b,c){return new w(function(d){d(this.ca([],b,c))}.bind(a))}function bh(a,b,c){return ie(a,0).exec(b,c).then(function(d){return this.ca(d,b,c)}.bind(a))}
function ch(a,b,c){var d=M(a).map(function(e){return e.exec(b,c)});return eb(d).then(function(e){var f=[];e.forEach(function(g){for(var k=0;k<g.length;++k)f.push(g[k])});return this.ca(f,b,c)}.bind(a))};function eh(a){S.call(this,-1,1);this.Ce=a}u(eh,S);eh.prototype.toString=function(){return"aggregation("+this.Ce.map(function(a){return a.j()}).toString()+")"};eh.prototype.ca=function(a){a.forEach(function(b){fh(new gh(b,this.Ce))},this);return a};function gh(a,b){this.Na=a;this.K=b}
function fh(a){a.K.forEach(function(b){b=Yg(b).reverse();for(var c=1;c<b.length;c++){var d=b[c],e=Yg(d).slice(-1)[0],f=d.child instanceof R?Ld(this.Na,d.child):this.Na;if(null!==f.Za&&f.Za.has(d.j()))break;f=hh(d.Lb,f,e);e=this.Na;null===e.Za&&(e.Za=A());e.Za.set(d.j(),f)}},a)}
function hh(a,b,c){var d=null;switch(a){case "MIN":d=ih(b,c,function(e,f){return f<e?f:e});break;case "MAX":d=ih(b,c,function(e,f){return f>e?f:e});break;case "DISTINCT":d=jh(b,c);break;case "COUNT":d=kh(b,c);break;case "SUM":d=lh(b,c);break;case "AVG":a=kh(b,c);0<a&&(d=lh(b,c)/a);break;case "GEOMEAN":d=mh(b,c);break;default:d=nh(b,c)}return d}function ih(a,b,c){return a.entries.reduce(function(d,e){e=I(e,b);return null===e?d:null===d?e:c(d,e)},null)}
function kh(a,b){return b instanceof Zg?a.entries.length:a.entries.reduce(function(c,d){return c+(null===I(d,b)?0:1)},0)}function lh(a,b){return ih(a,b,function(c,d){return d+c})}function nh(a,b){var c=[];a.entries.forEach(function(d){d=I(d,b);null===d||c.push(d)});return 0==c.length?null:vb.apply(null,c)}function mh(a,b){var c=0;a=a.entries.reduce(function(d,e){e=I(e,b);if(0==e||null===e)return d;c++;return d+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function jh(a,b){var c=A();a.entries.forEach(function(d){var e=I(d,b);c.set(e,d)});return new H(B(c),a.s())};function oh(a,b){this.Ha=a;this.$=b}oh.prototype.bb=h("Ha");oh.prototype.da=h("$");function ph(){J.call(this)}u(ph,J);function qh(a,b){J.call(this);this.table=a;this.values=b}u(qh,ph);function rh(a,b){qh.call(this,a,b)}u(rh,qh);function sh(a){J.call(this);this.table=a}u(sh,ph);sh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function th(a){J.call(this);this.table=a}u(th,ph);th.prototype.toString=function(){return"update("+this.table.getName()+")"};
function uh(a){J.call(this);this.O=a}u(uh,ph);uh.prototype.toString=function(){return"select("+this.O.toString()+")"};function vh(a){J.call(this);this.table=a}u(vh,ph);vh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};function wh(){J.call(this)}u(wh,ph);wh.prototype.toString=m("cross_product");function xh(a,b){J.call(this);this.f=a;this.Qb=b}u(xh,ph);
xh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb){var b=this.Qb.map(function(c){return c.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function yh(a){J.call(this);this.N=a}u(yh,ph);yh.prototype.toString=function(){return"order_by("+Ae(this.N)+")"};function zh(a){J.call(this);this.f=a}u(zh,ph);zh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Ah(a){J.call(this);this.f=a}u(Ah,ph);
Ah.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Bh(a){J.call(this);this.X=a}u(Bh,ph);Bh.prototype.toString=function(){return"limit("+this.X+")"};function Ch(a){J.call(this);this.L=a}u(Ch,ph);Ch.prototype.toString=function(){return"skip("+this.L+")"};function Dh(a,b){J.call(this);this.O=a;this.Sb=b}u(Dh,ph);Dh.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", "+this.O.toString()+")"};function Eh(){};function Fh(){}u(Fh,Eh);Fh.prototype.gb=function(a){this.H=a;this.ub(this.H);return this.H};Fh.prototype.ub=function(a){if(a instanceof uh){var b=Gh(this,a.O);b=Hh(this,b);Kg(a,a,b[0],b[1]);a==this.H&&(this.H=b[0]);a=b[0]}M(a).forEach(function(c){this.ub(c)},this)};function Gh(a,b){if(0==M(b).length||"and"!=b.pb)return[b];a=M(b).slice().map(function(c){b.removeChild(c);return Gh(this,c)},a);return Aa(a)}
function Hh(a,b){var c=null,d=null;b.map(function(e,f){e=new uh(e);0==f?c=e:ke(d,e);d=e},a);return[c,d]};function Ih(){}u(Ih,Eh);Ih.prototype.gb=function(a,b){if(3>b.from.length)return a;this.H=a;this.ub(this.H);return this.H};Ih.prototype.ub=function(a){if(a instanceof wh)for(;2<M(a).length;){for(var b=new wh,c=0;2>c;c++){var d=le(a,0);ke(b,d)}je(a,b,0)}M(a).forEach(function(e){this.ub(e)},this)};function Jh(){S.call(this,2,0)}u(Jh,S);Jh.prototype.toString=m("cross_product");Jh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.s(),e=c.s(),f=0;f<b.entries.length;f++)for(var g=0;g<c.entries.length;g++){var k=Vd(b.entries[f],d,c.entries[g],e);a.push(k)}b=b.s().concat(c.s());return[new H(a,b)]};function Kh(a,b){De.call(this,a,b);this.Ia=a.b(zc);this.Hb=a.b(Ac)}u(Kh,De);Kh.prototype.getPriority=m(2);Kh.prototype.ge=function(a){0==this.G()?Lh(this,a):this.Lc()};function Lh(a,b){a.td.forEach(function(c,d){c instanceof ze&&Ge(this.Hb,c,b[d])},a)}Kh.prototype.Lc=function(){var a=Ie(this.Hb,this.da());0!=a.length&&(a=new Fe(this.global,a),Je(this.Ia,a))};function Mh(a){ue.call(this,a)}u(Mh,ue);Mh.prototype.da=function(){var a=D();a.add(this.from);Nh(this,this.from.getName(),a);return a};function Nh(a,b,c){var d=Oh(a.aa.info(),b,1);Oh(a.aa.info(),b).forEach(c.add.bind(c));d.forEach(function(e){Nh(this,e.getName(),c)},a)}Mh.prototype.clone=function(){var a=new Mh(this.aa);xe(a,this);a.from=this.from;return a};Mh.prototype.bind=function(a){Mh.hb.bind.call(this,a);ye(this,a);return this};function Ph(a){ue.call(this,a)}u(Ph,ue);Ph.prototype.da=function(){var a=D();a.add(this.La);var b=this.aa.info();Qh(this.La.getName(),b.gf).forEach(a.add.bind(a));this.$b&&Oh(b,this.La.getName()).forEach(a.add.bind(a));return a};Ph.prototype.clone=function(){var a=new Ph(this.aa);xe(a,this);a.La=this.La;this.values&&(a.values=this.values instanceof Wd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
Ph.prototype.bind=function(a){Ph.hb.bind.call(this,a);this.ac&&(this.values=this.ac instanceof Wd?a[this.ac.Ca()]:this.ac.map(function(b){return b instanceof Wd?a[b.Ca()]:b}));return this};function Rh(a){ue.call(this,a)}u(Rh,ue);Rh.prototype.da=function(){var a=D();a.add(this.table);var b=this.set.map(function(d){return d.J.j()}),c=this.aa.info();Sh(c,b).forEach(a.add.bind(a));Th(c,b).forEach(a.add.bind(a));return a};Rh.prototype.clone=function(){var a=new Rh(this.aa);xe(a,this);a.table=this.table;a.set=this.set?Uh(this.set):this.set;return a};Rh.prototype.bind=function(a){Rh.hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});ye(this,a);return this};
function Uh(a){return a.map(function(b){var c={},d;for(d in b)c[d]=b[d];return c})};function Vh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+lc(b)+"'";default:return"'"+b.toString()+"'"}}function Wh(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.La.lb();c+=" INTO "+a.La.getName()+"(";c+=d.map(function(e){return e.getName()}).join(", ");c+=") VALUES (";return a.values.map(function(e){var f=d.map(function(g){var k=e.m[g.getName()];return b?null!=k?"#":"NULL":Vh(g.G(),k)});return c+f.join(", ")+");"}).join("\n")}
function Xh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Yh(a,b,c,d){return a instanceof Wd?"?"+a.Ca().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(e){return Vh(c,e)}).join(", ")+")":"between"==b?Vh(c,a[0])+" AND "+Vh(c,a[1]):Vh(c,a).toString()}
function Zh(a,b){return M(a).map(function(c){return"("+$h(c,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function ai(a){return[a.ga.j(),Xh(a.F),a.ma.j()].join(" ")}function $h(a,b){if(a instanceof qe){var c=a.J.j(),d=Xh(a.F);a=Yh(a.value,a.F,a.J.G(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Mg)return Zh(a,b);if(a instanceof Pg)return ai(a);throw new F(357,typeof a);}
function bi(a,b){return(a=$h(a,b))?" WHERE "+a:""}function ci(a,b){var c="UPDATE "+a.table.getName()+" SET ";c+=a.set.map(function(d){var e=d.J.j()+" = ";return-1!=d.Tc?e+"?"+d.Tc.toString():e+Vh(d.J.G(),d.value).toString()}).join(", ");a.w&&(c+=bi(a.w,b));return c+";"}
function di(a,b){var c="*";a.f.length&&(c=a.f.map(function(d){return d.Ka?d.j()+" AS "+d.Ka:d.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.eb&&0!=a.eb.size?c+=ei(a,b):(c+=a.from.map(fi).join(", "),a.w&&(c+=bi(a.w,b)));a.N&&(b=a.N.map(function(d){return d.J.j()+(0==d.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(d){return d.j()}).join(", "),c+=" GROUP BY "+b);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function fi(a){return Td(a)!=a.getName()?a.getName()+" AS "+Td(a):a.getName()}function ei(a,b){for(var c=Fg(a.w,function(k){return k instanceof Pg}),d=c.map(ai),e=fi(a.from[0]),f=1;f<a.from.length;f++){var g=fi(a.from[f]);e=a.eb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+g):e+(" INNER JOIN "+g);e+=" ON ("+d[d.length-f]+")"}a=a.w;a=0<M(a).length?ie(a,0):a;a instanceof Pg||(e+=" WHERE "+$h(a,b));return e}
function gi(a,b){b=b||!1;a=a.getQuery();if(a instanceof Ph)return Wh(a,b);if(a instanceof Mh){var c="DELETE FROM "+a.from.getName();a.w&&(c+=bi(a.w,b));return c+";"}if(a instanceof Rh)return ci(a,b);if(a instanceof ze)return di(a,b);throw new F(358,typeof a);};function T(a,b){this.global=a;this.Hg=a.b(yc);this.Ia=a.b(zc);this.query=b}t("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.$a()}catch(a){return bb(a)}return new w(function(a,b){var c=new Kh(this.global,[this.Ac()]);Je(this.Ia,c).then(function(d){a(Jd(d[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Wf=function(){var a=function(b){return b.Pc(this.query)+"\n"}.bind(this);return Lg(hi(this).bb(),a)};T.prototype.explain=T.prototype.Wf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Pg=function(a){return gi(this,a)};T.prototype.toSql=T.prototype.Pg;T.prototype.$a=aa();T.prototype.getQuery=function(){return this.query.clone()};function hi(a){if(null==a.hf){var b=a.Hg;var c=a.query,d=b.qg.create(c);b=b.Eg.create(d,c);a.hf=b}return a.hf}T.prototype.Ac=function(){return{context:this.getQuery(),je:hi(this)}};function ii(a){T.call(this,a,new Mh(a.b(Bc)))}u(ii,T);t("lf.query.DeleteBuilder",ii);ii.prototype.from=function(a){if(null!=this.query.from)throw new F(515);this.query.from=a;return this};ii.prototype.from=ii.prototype.from;ii.prototype.w=function(a){this.Fd();this.query.w=a;return this};ii.prototype.where=ii.prototype.w;ii.prototype.Fd=function(){if(null==this.query.from)throw new F(548);if(null!=this.query.w)throw new F(516);};
ii.prototype.$a=function(){ii.hb.$a.call(this);if(null==this.query.from)throw new F(517);};function ji(a,b){T.call(this,a,new Ph(a.b(Bc)));this.query.$b=b||!1}u(ji,T);t("lf.query.InsertBuilder",ji);ji.prototype.$a=function(){ji.hb.$a.call(this);var a=this.query;if(null==a.La||null==a.values)throw new F(518);if(a.$b&&null===a.La.Mb.sd)throw new F(519);};ji.prototype.La=function(a){if(null!=this.query.La)throw new F(520);this.query.La=a;return this};ji.prototype.into=ji.prototype.La;
ji.prototype.values=function(a){if(null!=this.query.values)throw new F(521);a instanceof Wd||a.some(function(b){return b instanceof Wd})?this.query.ac=a:this.query.values=a;return this};ji.prototype.values=ji.prototype.values;function ki(a){return li("and",Array.prototype.slice.call(arguments))}t("lf.op.and",ki);t("lf.op.or",function(a){return li("or",Array.prototype.slice.call(arguments))});function li(a,b){var c=new Mg(a);b.forEach(function(d){ke(c,d)});return c}t("lf.op.not",function(a){a.vd(!0);return a});function U(a,b){T.call(this,a,new ze(a.b(Bc)));this.Me=this.Ad=!1;this.query.f=b;mi(this);ni(this)}u(U,T);t("lf.query.SelectBuilder",U);U.prototype.$a=function(){U.hb.$a.call(this);var a=this.query;if(null==a.from)throw new F(522);if(q(a.Tb)&&!q(a.X)||q(a.Jb)&&!q(a.L))throw new F(523);null!=this.query.qa?oi(this):pi(this)};function mi(a){var b=a.query.f.filter(function(c){return c instanceof R&&"DISTINCT"==c.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new F(524);}
function oi(a){if(a.query.qa.some(function(b){b=b.G();return 6==b||0==b}))throw new F(525);}function pi(a){var b=a.query.f.some(function(c){return c instanceof R},a);a=a.query.f.some(function(c){return!(c instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new F(526);}function ni(a){a.query.f.forEach(function(b){if(b instanceof R&&!qi(b.Lb,b.G()))throw new F(527,b.j());},a)}function ri(a,b){if(null==a.query.from)throw new F(b);}
U.prototype.from=function(a){if(this.Me)throw new F(515);this.Me=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.w=function(a){ri(this,548);if(this.Ad)throw new F(516);this.Ad=!0;si(this,a);return this};U.prototype.where=U.prototype.w;function si(a,b){null!=a.query.w?(b=ki(b,a.query.w),a.query.w=b):a.query.w=b}
U.prototype.hg=function(a,b){ri(this,542);if(this.Ad)throw new F(547);this.query.from.push(a);si(this,b);return this};U.prototype.innerJoin=U.prototype.hg;U.prototype.og=function(a,b){ri(this,542);if(!(b instanceof Pg))throw new F(541);if(this.Ad)throw new F(547);this.query.from.push(a);null==this.query.eb&&(this.query.eb=D());var c=b;Td(a)!=Td(b.ma.I())&&(c=b.reverse());this.query.eb.add(c.W());si(this,c);return this};U.prototype.leftOuterJoin=U.prototype.og;
U.prototype.X=function(a){if(null!=(this.query.X||this.query.Tb))throw new F(528);if(a instanceof Wd)this.query.Tb=a;else{if(0>a)throw new F(531);this.query.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.L=function(a){if(null!=(this.query.L||this.query.Jb))throw new F(529);if(a instanceof Wd)this.query.Jb=a;else{if(0>a)throw new F(531);this.query.L=a}return this};U.prototype.skip=U.prototype.L;
U.prototype.N=function(a,b){ri(this,549);null==this.query.N&&(this.query.N=[]);this.query.N.push({J:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.N;U.prototype.qa=function(a){ri(this,549);if(null!=this.query.qa)throw new F(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function qi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Wc=null;return a};U.prototype.clone=U.prototype.clone;function ti(a,b){T.call(this,a,new Rh(a.b(Bc)));this.query.table=b}u(ti,T);t("lf.query.UpdateBuilder",ti);ti.prototype.set=function(a,b){a={Tc:b instanceof Wd?b.Ca():-1,J:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};ti.prototype.set=ti.prototype.set;ti.prototype.w=function(a){this.Fd();this.query.w=a;return this};ti.prototype.where=ti.prototype.w;ti.prototype.Fd=function(){if(null!=this.query.w)throw new F(516);};
ti.prototype.$a=function(){ti.hb.$a.call(this);if(null==this.query.set)throw new F(532);if(this.query.set.some(function(a){return a.value instanceof Wd}))throw new F(501);};function ui(a){this.query=a;this.Ha=null}ui.prototype.fc=function(){null===this.Ha&&(this.Ha=this.ad());return this.Ha};function vi(a){ui.call(this,a)}u(vi,ui);vi.prototype.ad=function(){return this.query.$b?new rh(this.query.La,this.query.values):new qh(this.query.La,this.query.values)};function wi(a){ui.call(this,a)}u(wi,ui);
wi.prototype.ad=function(){var a=new th(this.query.table),b=null!=this.query.w?new uh(this.query.w.Nb()):null,c=new vh(this.query.table);null===b?ke(a,c):(ke(b,c),ke(a,b));return a};function xi(a,b,c){this.Ha=a;this.le=b;this.Wb=c}xi.prototype.fc=function(){this.Wb.forEach(function(a){this.Ha=a.gb(this.Ha,this.le)},this);return this.Ha};function yi(a,b){ui.call(this,a);this.Wb=b}u(yi,ui);yi.prototype.ad=function(){var a=new sh(this.query.from),b=null!=this.query.w?new uh(this.query.w.Nb()):null,c=new vh(this.query.from);null===b?ke(a,c):(ke(b,c),ke(a,b));return(new xi(a,this.query,this.Wb)).fc()};function zi(){}u(zi,Eh);zi.prototype.gb=function(a,b){if(2>b.from.length)return a;this.H=a;this.ub(this.H,b);return this.H};zi.prototype.ub=function(a,b){if(a instanceof uh&&a.O instanceof Pg){var c=a.O.W(),d=ie(a,0);d instanceof wh&&(c=null!=b.eb&&b.eb.has(c),c=new Dh(a.O,c),Kg(a,d,c,c),a==this.H&&(this.H=c),a=c)}M(a).forEach(function(e){this.ub(e,b)},this)};function Ai(){this.Sc=D()}u(Ai,Eh);Ai.prototype.gb=function(a,b){if(!q(b.w))return a;this.Sc.clear();this.H=a;this.ub(this.H,b);this.Sc.clear();return this.H};Ai.prototype.ub=function(a,b){var c=function(e){M(e).forEach(d)}.bind(this),d=function(e){if(!this.Sc.has(e)){if(e instanceof uh){var f=e.O.s(),g=function(k){return Bi(this,k,f)}.bind(this);g=Ci(this,b,e,g);this.Sc.add(e);g!=e&&(null===g.getParent()&&(this.H=g),d(g))}c(e)}}.bind(this);d(a)};
function Ci(a,b,c,d){var e=c;if(Di(b,c))e=Ig(c),Ci(a,b,c,d);else if(Ei(c)){var f=[];e=Jg(c,d,function(g){g=new uh(g.O);f.push(g);return g});f.forEach(function(g){Ci(this,b,g,d)},a)}return e}function Bi(a,b,c){var d=D();Eg(b).forEach(function(e){d.add(e.table)},a);b instanceof vh&&d.add(b.table);return Hc(d,c)}function Ei(a){a=ie(a,0);return a instanceof wh||a instanceof Dh}
function Di(a,b){var c=ie(b,0);if(!(c instanceof uh))return!1;if(null==a.eb)return!0;b=b.O instanceof Pg;a=a.eb.has(c.O.W());return b||!a};function Fi(a,b){ui.call(this,a);this.Wb=b;this.kf=this.cf=this.tf=this.ff=this.De=this.Se=this.sf=this.Je=this.vf=null}u(Fi,ui);
Fi.prototype.ad=function(){Gi(this);2<=this.query.from.length&&(this.Je=new wh);this.sf=null!=this.query.w?new uh(this.query.w.Nb()):null;this.query.N&&(this.ff=new yh(this.query.N));if(null!=this.query.L&&0<this.query.L||null!=this.query.Jb)this.tf=new Ch(this.query.L);null!=this.query.X&&(this.cf=new Bh(this.query.X));null!=this.query.qa&&(this.Se=new Ah(this.query.qa));Hi(this);this.kf=new xh(this.query.f||[],this.query.qa||null);var a=Ii(this);return(new xi(a,this.query,this.Wb)).fc()};
function Ii(a){for(var b=[a.cf,a.tf,a.kf,a.ff,a.De,a.Se,a.sf,a.Je],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:ke(b[c],f),c=e)}a.vf.forEach(function(g){ke(b[c],g)});return d}function Gi(a){a.vf=a.query.from.map(function(b){return new vh(b)},a)}function Hi(a){var b=a.query.f.filter(function(c){return c instanceof R});null!=a.query.N&&a.query.N.forEach(function(c){c.J instanceof R&&b.push(c.J)});0<b.length&&(a.De=new zh(b))};function Ji(){this.re=[new Fh,new Ih,new Ai,new zi];this.Pd=[new Fh]}Ji.prototype.create=function(a){if(a instanceof Ph)var b=new vi(a);else if(a instanceof Mh)b=new yi(a,this.Pd);else if(a instanceof ze)b=new Fi(a,this.re);else if(a instanceof Rh)b=new wi(a);else throw new F(513);b=b.fc();return new oh(b,a.da())};function Ki(a){S.call(this,1,1);this.U=a}u(Ki,S);Ki.prototype.toString=function(){return"delete("+this.U.getName()+")"};Ki.prototype.ca=function(a,b){a=a[0].entries.map(function(c){return c.ta});b.remove(this.U,a);return[Nd()]};function Li(a,b){S.call(this,0,-1);this.table=b;this.B=a.b(xc)}u(Li,S);Li.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Li.prototype.ca=function(){var a=this.B.get(mf(this.table)),b=new H([],[this.table.getName()]),c=$g();a=a.Y().ia;null===b.Za&&(b.Za=A());b.Za.set(c.j(),a);return[b]};function Mi(a,b){S.call(this,0,-1);this.V=a.b(wc);this.B=a.b(xc);this.table=b}u(Mi,S);Mi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};Mi.prototype.ca=function(){var a=this.B.get(mf(this.table)).Ua();return[Qd(Df(this.V,a),[Td(this.table)])]};function Ni(a){this.c=a}u(Ni,Eh);Ni.prototype.gb=function(a,b){this.H=a;if(!this.Hd(b))return a;a=Fg(a,function(c){return c instanceof Mi})[0];b=new Li(this.c,a.table);Kg(a,a,b,b);return this.H};Ni.prototype.Hd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.w&&null==a.X&&null==a.L&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Lb&&a.child instanceof Zg):!1};function Oi(a){S.call(this,1,1);this.Re=a}u(Oi,S);Oi.prototype.toString=function(){return"groupBy("+this.Re.map(function(a){return a.j()}).toString()+")"};Oi.prototype.ca=function(a){return Pi(this,a[0])};function Pi(a,b){var c=new bd,d=function(e){return this.Re.map(function(f){return I(e,f)},this).join(",")}.bind(a);b.entries.forEach(function(e){c.set(d(e),e)},a);return c.keys().map(function(e){return new H(c.get(e),b.s())},a)};function Qi(a,b,c){S.call(this,2,0);this.B=a.b(xc);this.V=a.b(wc);this.O=b;this.Sb=c;this.Dd="eq"==this.O.F?0:2;this.Ue=null}u(Qi,S);var Ri=["hash","index_nested_loop","nested_loop"];Qi.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", impl: "+Ri[this.Dd]+", "+this.O.toString()+")"};
Qi.prototype.ca=function(a){switch(this.Dd){case 0:return[Tg(this.O,a[0],a[1],this.Sb)];case 1:return[Ug(this.O,a[0],a[1],this.Ue,this.V)];default:var b=this.O,c=a[0];a=a[1];var d=this.Sb,e=[c,a];d||(e=Qg(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.s(),g=a.s(),k=c.entries.length,l=a.entries.length,p=l+256-1>>8,r=0;r<p;){for(var W=0;W<k;W++){var K=!1,y=I(c.entries[W],b.ga);if(null!==y)for(var L=Math.min(r+1<<8,l),V=r<<8;V<L;V++)if(b.uc(y,I(a.entries[V],b.ma))){K=!0;var na=Vd(c.entries[W],f,a.entries[V],
g);e.push(na)}d&&!K&&e.push(Sg(b,c.entries[W],f))}r++}b=c.s().concat(a.s());return[new H(e,b)]}};function Si(a,b){a.Dd=1;var c=a.B.get(b.Ca().j());a.Ue={dg:b,wg:b==a.O.ga?a.O.ma:a.O.ga,index:c}};function Ti(a){S.call(this,-1,-1);this.lf=a}u(Ti,S);Ti.prototype.toString=function(){return"no_op_step("+this.lf[0].s().join(",")+")"};Ti.prototype.ca=h("lf");function Ui(){}u(Ui,Eh);Ui.prototype.gb=function(a,b){this.H=a;if(!this.Hd(b))return a;Fg(a,function(c){return c instanceof Qi}).forEach(this.Gg,this);return this.H};Ui.prototype.Hd=function(a){return 1<a.from.length};
Ui.prototype.Gg=function(a){if("eq"==a.O.F&&!a.Sb){var b=function(e){if(!(e instanceof Mi))return null;e=Td(e.table)==Td(a.O.ma.I())?a.O.ma:a.O.ga;return null===e.Ca()?null:e},c=b(ie(a,0));b=b(ie(a,1));if(null!==c||null!==b){b=null===b?c:b;Si(a,b);var d=new H([],[Td(b.I())]);me(a,new Ti([d]),b==c?0:1)}}};function Vi(a){a=a.map(function(c){return c.wa()});a=Ab.apply(null,a);var b=[];zb(a,function(c){b.push(c)});return b}function Wi(a){this.Rb=a}Wi.prototype.bd=function(){return 1==this.Rb.f.length?[Dd()]:[this.Rb.f.map(function(){return Dd()})]};function Xi(a,b){this.Rb=a;this.Ga=b;this.Ld=this.af=null}
function Yi(a,b){var c=A();a.Ga.keys().forEach(function(d){var e=this.Ga.get(d).map(function(g){return ve(b,g)},this),f=new Hd([Dd()]);e.forEach(function(g){f=Id(f,g.we())});c.set(d,f)},a);return c}Xi.prototype.bd=function(a){if(this.af==a)return this.Ld;for(var b=Yi(this,a),c=this.Rb.f.length-1;0<=c;c--){var d=this.Rb.f[c];if(null!==(b.get(d.aa.getName())||null))break;b.set(d.aa.getName(),new Hd([Dd()]))}this.Ld=1==this.Rb.f.length?B(b)[0].wa():Vi(Zi(this,b));this.af=a;return this.Ld};
function Zi(a,b){var c=A(),d=0;a.Rb.f.forEach(function(e){c.set(e.aa.getName(),d);d++});return gc(b).sort(function(e,f){return c.get(e)-c.get(f)}).map(function(e){return b.get(e)})};function $i(a,b){this.xd=b;this.B=a.b(xc)}function aj(a){a=a.B.get(mf(a.xd));return Math.floor(.02*a.Y().ia)}function bj(a,b,c){c=c.filter(a.kg,a);if(0==c.length)return null;a=cj(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(e,f){var g=dj(f,b);return g<d?(d=g,f):e},null)}
function cj(a,b){return a.xd.Da().map(function(c){c=new ej(this.B,c);fj(c,b);return c},a).filter(function(c){if(null===c.Ga)c=!1;else{for(var d=!1,e=!0,f=0;f<c.cb.f.length;f++){var g=c.Ga.has(c.cb.f[f].aa.getName());if(d&&g){e=!1;break}g||(d=!0)}c=e}return c})}$i.prototype.kg=function(a){return a instanceof qe?!a.ld()||a.J.I()!=this.xd||"in"==a.F&&a.value.length>aj(this)?!1:!0:a instanceof Mg?a.ld()&&ie(a,0).J.I()==this.xd?M(a).length<=aj(this):!1:!1};
function ej(a,b){this.B=a;this.cb=b;this.eg=D(this.cb.f.map(function(c){return c.aa.getName()}));this.$d=this.Ga=null}function gj(a){null===a.$d&&(a.$d=new Xi(a.cb,a.Ga));return a.$d}function fj(a,b){b.forEach(function(c){var d=c.lb()[0].getName();this.eg.has(d)&&(null===this.Ga&&(this.Ga=new bd),this.Ga.set(d,c.W()))},a)}function dj(a,b){b=gj(a).bd(b);var c=a.B.get(a.cb.j());return b.reduce(function(d,e){return d+c.Zc(e)},0)};function hj(a,b,c,d){S.call(this,0,-1);this.B=a.b(xc);this.index=b;this.$e=c;this.pe=d;this.Rc=this.Qc=!1}u(hj,S);hj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.pe?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};hj.prototype.Pc=function(a){var b=this.toString(),c=this.$e.bd(a);b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.X.toString()));this.Rc&&(b=b.replace("?",a.L.toString()));return b};
hj.prototype.ca=function(a,b,c){a=this.$e.bd(c);b=this.B.get(this.index.j());c=(1==a.length&&a[0]instanceof yd&&Ed(a[0])?Hf(b.get(a[0].from),!1,this.Qc?c.X:void 0,this.Rc?c.L:void 0):b.Ua(a,this.pe,this.Qc?c.X:void 0,this.Rc?c.L:void 0)).map(function(d){return new hc(d,{})},this);return[Qd(c,[this.index.lc])]};function ij(){S.call(this,-1,0)}u(ij,S);ij.prototype.toString=m("multi_index_range_scan()");
ij.prototype.ca=function(a){var b=A();a.forEach(function(d){d.entries.forEach(function(e){b.set(e.ta.id(),e)})});var c=B(b);return[new H(c,a[0].s())]};function jj(a){S.call(this,1,1);this.ic=a}u(jj,S);jj.prototype.toString=m("select(?)");jj.prototype.Pc=function(a){a=ve(a,this.ic);return this.toString().replace("?",a.toString())};jj.prototype.ca=function(a,b,c){return[ve(c,this.ic).eval(a[0])]};function kj(a,b){S.call(this,1,1);this.V=a.b(wc);this.U=b}u(kj,S);kj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};kj.prototype.ca=function(a){return[Qd(Df(this.V,Kd(a[0])),[Td(this.U)])]};function lj(a){this.c=a}u(lj,Eh);lj.prototype.gb=function(a,b){this.H=a;Fg(a,function(c){return c instanceof Mi}).forEach(function(c){var d=mj(c);if(0!=d.length){var e=bj(new $i(this.c,c.table),b,d.map(function(g){return ve(b,g.ic)}));if(null!==e){var f=A();d.forEach(function(g){f.set(g.ic,g)},this);this.H=nj(this,e,f,c)}}},this);return this.H};function mj(a){var b=[];for(a=a.getParent();a;){if(a instanceof jj)b.push(a);else if(a instanceof Qi)break;a=a.getParent()}return b}
function nj(a,b,c,d){(null===b.Ga?[]:b.Ga.values()).map(function(e){return c.get(e)}).forEach(Gg);b=new hj(a.c,b.cb,gj(b),!1);a=new kj(a.c,d.table);ke(a,b);Kg(d,d,a,b);return b.bb()};function oj(a,b){S.call(this,0,-1);this.B=a.b(xc);this.U=b}u(oj,S);oj.prototype.toString=function(){return"insert("+this.U.getName()+")"};oj.prototype.ca=function(a,b,c){pj(this.U,c.values,this.B);b.Ab(this.U,c.values);return[Qd(c.values,[this.U.getName()])]};function pj(a,b,c){a=a.Mb.sd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].aa.getName();c=c.get(a.j()).Y().Ec;var e=null===c?0:c;b.forEach(function(f){if(0==f.m[d]||null==f.m[d])e++,f.m[d]=e})}}
function qj(a,b){S.call(this,0,-1);this.B=a.b(xc);this.U=b}u(qj,S);qj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};qj.prototype.ca=function(a,b,c){pj(this.U,c.values,this.B);b.Wd(this.U,c.values);return[Qd(c.values,[this.U.getName()])]};function rj(){S.call(this,1,1)}u(rj,S);rj.prototype.toString=m("limit(?)");rj.prototype.Pc=function(a){return this.toString().replace("?",a.X.toString())};rj.prototype.ca=function(a,b,c){a[0].entries.splice(c.X);return a};function sj(a){S.call(this,-1,1);this.N=a}u(sj,S);n=sj.prototype;n.toString=function(){return"order_by("+Ae(this.N)+")"};n.ca=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=ah(this.N[d].J);if(null!==b.Za&&b.Za.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Ld(a[0],b)).entries.sort(this.Tf.bind(this))}else a.sort(this.Jg.bind(this));return a};
n.Z=function(a,b){var c=-1;do{c++;var d=this.N[c].J;var e=this.N[c].order;var f=a(d);d=b(d)}while(f==d&&c+1<this.N.length);a=f<d?-1:f>d?1:0;return 1==e?a:-a};n.Jg=function(a,b){return this.Z(function(c){return c instanceof R?Ld(a,c):I(a.entries[a.entries.length-1],c)},function(c){return c instanceof R?Ld(b,c):I(b.entries[b.entries.length-1],c)})};n.Tf=function(a,b){return this.Z(function(c){return I(a,c)},function(c){return I(b,c)})};function tj(a,b){this.Na=a;this.K=b}function uj(a){return a.K.some(function(b){return b instanceof R},a)?vj(a):wj(a)}function vj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Lb)return a=Ld(a.Na,a.K[0]).entries.map(function(c){var d=new Rd(new hc(-1,{}),1<this.Na.M.size);Ud(d,this.K[0],I(c,this.K[0].child));return d},a),new H(a,[]);var b=new Rd(new hc(-1,{}),1<a.Na.M.size);a.K.forEach(function(c){var d=c instanceof R?Ld(this.Na,c):I(this.Na.entries[0],c);Ud(b,c,d)},a);return new H([b],a.Na.s())}
function wj(a){var b=Array(a.Na.entries.length),c=1<a.Na.M.size;a.Na.entries.forEach(function(d,e){b[e]=new Rd(new hc(d.ta.id(),{}),c);this.K.forEach(function(f){Ud(b[e],f,I(d,f))},this)},a);return new H(b,a.Na.s())}function xj(a,b){var c=a.map(function(d){return uj(new tj(d,b)).entries[0]});return new H(c,a[0].s())};function yj(a,b){S.call(this,-1,1);this.f=a;this.Qb=b}u(yj,S);yj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb){var b=this.Qb.map(function(c){return c.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};yj.prototype.ca=function(a){0==a.length?a=[Nd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:uj(new tj(a,this.f))]):a=[xj(a,this.f)];return a};function zj(a){return a.f.some(function(b){return b instanceof R})||null!==a.Qb};function Aj(){S.call(this,1,1)}u(Aj,S);Aj.prototype.toString=m("skip(?)");Aj.prototype.Pc=function(a){return this.toString().replace("?",a.L.toString())};Aj.prototype.ca=function(a,b,c){return[new H(a[0].entries.slice(c.L),a[0].s())]};function Bj(){}u(Bj,Eh);Bj.prototype.gb=function(a,b){if(!q(b.X)&&!q(b.L))return a;var c=Cj(a);if(null===c)return a;Fg(a,function(d){return d instanceof rj||d instanceof Aj}).forEach(function(d){d instanceof rj?c.Qc=!0:c.Rc=!0;Gg(d)},this);return c.bb()};function Cj(a){a=Fg(a,function(b){return b instanceof hj},function(b){return b instanceof yj&&zj(b)||b instanceof sj||1!=M(b).length||b instanceof jj});return 0<a.length?a[0]:null};function Dj(a){this.c=a}u(Dj,Eh);Dj.prototype.gb=function(a,b){this.H=a;var c=Ej(this,b);if(0==c.length)return this.H;var d=0;do{var e=c[d++];a=Fj(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.H;b=Gj(this,a[0].cb.lc);return null===b?this.H:this.H=Hj(this,e,b,a)};function Ej(a,b){return Fg(a.H,function(c){if(!(c instanceof jj))return!1;c=ve(b,c.ic);return c instanceof Mg&&"or"==c.pb})}
function Gj(a,b){return Fg(a.H,function(c){return c instanceof Mi&&c.table.getName()==b})[0]||null}function Fj(a,b,c){b=ve(c,b.ic);var d=b.s();if(1!=d.size)return null;d=E(d)[0];var e=new $i(a.c,d),f=null;return M(b).every(function(g){g=bj(e,c,[g]);null===g||(null===f?f=[g]:f.push(g));return null!==g})?f:null}function Hj(a,b,c,d){var e=new kj(a.c,c.table),f=new ij;ke(e,f);d.forEach(function(g){g=new hj(this.c,g.cb,gj(g),!1);ke(f,g)},a);Gg(b);Kg(c,c,e,f);return f.bb()};function Ij(a){this.c=a}u(Ij,Eh);Ij.prototype.gb=function(a,b){b=Jj(a,b);if(null===b)return a;a:{var c=b;a=Kj(ie(b,0));if(null!==a){var d=b.N;for(var e=null,f=a.table.Da(),g=0;g<f.length&&null===e;g++)e=Lj(f[g],d);d=e;if(null===d){a=c;break a}c=new hj(this.c,d.cb,new Wi(d.cb),d.Xe);d=new kj(this.c,a.table);ke(d,c);Gg(b);c=Kg(a,a,d,c)}a=c}a==b&&(a=b,c=Mj(ie(b,0)),null!==c&&(d=Lj(c.index,b.N),null!==d&&(c.pe=d.Xe,a=Gg(b).parent)));return a.bb()};
function Mj(a){a=Fg(a,function(b){return b instanceof hj},function(b){return 1!=M(b).length});return 0<a.length?a[0]:null}function Kj(a){a=Fg(a,function(b){return b instanceof Mi},function(b){return 1!=M(b).length});return 0<a.length?a[0]:null}function Jj(a,b){return q(b.N)?Fg(a,function(c){return c instanceof sj})[0]:null}function Lj(a,b){if(a.f.length!=b.length||!b.every(function(c,d){return c.J.getName()==a.f[d].aa.getName()}))return null;b=Nj(b,a);return b[0]||b[1]?{cb:a,Xe:b[1]}:null}
function Nj(a,b){var c=a.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0),d=b.f.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Oj(a,b,c){this.Ha=a;this.le=b;this.Wb=c}Oj.prototype.fc=function(){this.Wb.forEach(function(a){this.Ha=a.gb(this.Ha,this.le)},this);return this.Ha};function Pj(a){S.call(this,1,1);this.U=a}u(Pj,S);Pj.prototype.toString=function(){return"update("+this.U.getName()+")"};Pj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(d){var e=this.U.kb(d.ta.Ja());c.set.forEach(function(f){e.m[f.J.getName()]=f.value},this);return e},this);b.update(this.U,a);return[Nd()]};function Qj(a){this.c=a;this.re=[new Ui,new lj(this.c),new Dj(this.c),new Ij(this.c),new Bj,new Ni(this.c)];this.Pd=[new lj(this.c)]}Qj.prototype.create=function(a,b){var c=a.bb();if(c instanceof rh||c instanceof qh)return Rj(this,a,b);if(c instanceof xh||c instanceof Bh||c instanceof Ch)return Rj(this,a,b,this.re);if(c instanceof sh||c instanceof th)return Rj(this,a,b,this.Pd);throw new F(8);};
function Rj(a,b,c,d){a=Dg(b.bb(),a.tg.bind(a));null!=d&&(a=(new Oj(a,c,d)).fc());return new Be(a,b.da())}
Qj.prototype.tg=function(a){if(a instanceof xh)return new yj(a.f,a.Qb);if(a instanceof Ah)return new Oi(a.f);if(a instanceof zh)return new eh(a.f);if(a instanceof yh)return new sj(a.N);if(a instanceof Ch)return new Aj;if(a instanceof Bh)return new rj;if(a instanceof uh)return new jj(a.O.W());if(a instanceof wh)return new Jh;if(a instanceof Dh)return new Qi(this.c,a.O,a.Sb);if(a instanceof vh)return new Mi(this.c,a.table);if(a instanceof sh)return new Ki(a.table);if(a instanceof th)return new Pj(a.table);
if(a instanceof rh)return new qj(this.c,a.table);if(a instanceof qh)return new oj(this.c,a.table);throw new F(514);};function Sj(a){this.qg=new Ji;this.Eg=new Qj(a)};function Tj(){this.df=A()}function Uj(a,b){var c=a.df.get(b.getName())||null;null===c&&(c=new Vj,a.df.set(b.getName(),c));return c}function Wj(a,b,c,d){c.forEach(function(e){e=Uj(this,e);0==d?(e.fb=null,e.vc=b):3==d?(null===e.Zb&&(e.Zb=D()),e.Zb.add(b),null===e.Xa&&(e.Xa=D()),e.Xa.delete(b)):1==d?(null===e.Xa&&(e.Xa=D()),e.Xa.add(b)):2==d&&(e.fb=b)},a)}
function Xj(a,b,c,d){var e=!0;c.forEach(function(f){if(e){f=Uj(this,f);var g=null===f.Xa||0==f.Xa.size;e=0==d?(null===f.Zb||0==f.Zb.size)&&g&&null===f.vc&&null!==f.fb&&f.fb==b:3==d?null===f.vc&&null===f.fb&&null!==f.Xa&&f.Xa.has(b):1==d?null===f.fb:g&&(null===f.fb||f.fb==b)}},a);return e}function Yj(a,b,c,d){var e=Xj(a,b,c,d);e&&Wj(a,b,c,d);return e}Tj.prototype.releaseLock=function(a,b){b.forEach(function(c){Uj(this,c).releaseLock(a)},this)};
function Zj(a,b){b.forEach(function(c){Uj(this,c).fb=null},a)}function Vj(){this.Zb=this.Xa=this.fb=this.vc=null}Vj.prototype.releaseLock=function(a){this.vc==a&&(this.vc=null);this.fb==a&&(this.fb=null);null===this.Xa||this.Xa.delete(a);null===this.Zb||this.Zb.delete(a)};function ak(){this.Vb=new bk;this.Dc=new Tj}function Je(a,b){(2>b.getPriority()||2>b.getPriority())&&Zj(a.Dc,b.da());a.Vb.Ab(b);ck(a);return b.Db.ha}function ck(a){for(var b=a.Vb.wa(),c=0;c<b.length;c++){var d=b[c];if(0==d.G()?dk(a,d,1,3):dk(a,d,2,0)){a.Vb.remove(d);var e=a;d.exec().then(e.Bg.bind(e,d),e.Ag.bind(e,d))}}}function dk(a,b,c,d){var e=!1;Yj(a.Dc,b.W(),b.da(),c)&&(e=Yj(a.Dc,b.W(),b.da(),d));return e}ak.prototype.Bg=function(a,b){this.Dc.releaseLock(a.W(),a.da());a.Db.resolve(b);ck(this)};
ak.prototype.Ag=function(a,b){this.Dc.releaseLock(a.W(),a.da());a.Db.reject(b);ck(this)};function bk(){this.Vb=[]}bk.prototype.Ab=function(a){Gf(this.Vb,a,function(b,c){var d=b.getPriority()-c.getPriority();return 0==d?b.W()-c.W():d})};bk.prototype.wa=function(){return this.Vb.slice()};bk.prototype.remove=function(a){var b=this.Vb;a=ta(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function ek(){this.Mc=A()}var fk;function gk(){fk||(fk=new ek);return fk}ek.prototype.clear=function(){this.Mc.clear()};ek.prototype.clear=ek.prototype.clear;ek.prototype.rb=function(a,b){this.Mc.set(a.toString(),b);return b};ek.prototype.registerService=ek.prototype.rb;ek.prototype.b=function(a){var b=this.Mc.get(a.toString())||null;if(null===b)throw new F(7,a.toString());return b};ek.prototype.getService=ek.prototype.b;ek.prototype.md=function(a){return this.Mc.has(a.toString())};
ek.prototype.isRegistered=ek.prototype.md;function hk(){var a=gk();return gc(a.Mc)};function ik(a,b,c,d){return null!=a?null!=b?jk(a,b,c,d):kk(a):lk()}function mk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function nk(a){var b=gk();a=new uc("ns_"+a);return b.md(a)?b.b(a):null}function lk(){var a={};hk().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=nk(b).b(Bc).version())});return mk(a)}function kk(a){a=nk(a);var b={};if(null!=a){var c=a.b(xc);a.b(Bc).oa().forEach(function(d){b[d.getName()]=c.get(mf(d)).Y().ia})}return mk(b)}
function jk(a,b,c,d){var e=nk(a);a=[];if(null!=e){var f=null;try{f=e.b(Bc).table(b)}catch(g){}null!=f&&(b=e.b(xc),e=e.b(wc),c=b.get(mf(f)).Ua(void 0,!1,c,d),c.length&&(a=Df(e,c).map(function(g){return g.m})))}return mk(a)};function ok(a,b){this.Qd=ee();this.me=a;this.od=b;this.K=pk(this)}function pk(a){if(0<a.me.f.length)return a.me.f;var b=[];a.me.from.forEach(function(c){c.lb().forEach(function(d){b.push(d)})});return b}ok.prototype.Z=function(a,b){return this.K.every(function(c){return 6==c.G()||0==c.G()?I(a,c)===I(b,c):fe(this.Qd,c.G(),"eq")(I(a,c),I(b,c))},this)};
function qk(a,b,c){var d=null===b?[]:b.entries,e=rb(d,c.entries,a.Z.bind(a),function(l){return d[l]});b=[];for(var f=0,g=0;g<d.length;g++){var k=d[g];e[f]==k?f++:(k=a.od.splice(f,1),k=rk(g,k,0,a.od),b.push(k))}e=rb(d,c.entries,a.Z.bind(a),function(l,p){return c.entries[p]});for(g=f=0;g<c.entries.length;g++)k=c.entries[g],e[f]==k?f++:(a.od.splice(g,0,k.ta.m),k=rk(g,[],1,a.od),b.push(k));return b}function rk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function sk(){this.ec=A()}sk.prototype.Cd=function(a,b){var c=ka(a.query).toString(),d=this.ec.get(c)||null;null===d&&(d=new tk(a),this.ec.set(c,d));d.Cd(b)};sk.prototype.ne=function(a,b){a=ka(a.query).toString();var c=this.ec.get(a)||null;c.ne(b);0<c.Gc.size||this.ec.delete(a)};function Ie(a,b){var c=D();b.forEach(function(e){c.add(e.getName())});var d=[];a.ec.forEach(function(e){e=e.Ac();e.context.from.some(function(f){return c.has(f.getName())})&&d.push(e)});return d}
function Ge(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.ec.get(b)||null;null!==a&&uk(a,c)}function tk(a){this.Hf=a;this.Gc=D();this.yg=[];this.bf=null;this.Rf=new ok(a.query,this.yg)}tk.prototype.Cd=function(a){this.Gc.has(a)||this.Gc.add(a)};tk.prototype.ne=function(a){this.Gc.delete(a)};tk.prototype.Ac=function(){var a=this.Hf;return{context:a.query,je:hi(a)}};function uk(a,b){var c=qk(a.Rf,a.bf,b);a.bf=b;0<c.length&&a.Gc.forEach(function(d){d(c)})};function vk(a,b){var c=a.b(Bc),d=b||{};b=new Cf(c);a.rb(wc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(b=ec(),b=b.fg?0:b.Ug?4:1);switch(b){case 0:b=new gf(a,c);break;case 1:b=new pf(c);break;case 5:b=new rf(c);break;case 4:b=new zf(a,c,d.webSqlDbSize);break;case 3:b=new Ve(c,d.firebase);e=!0;break;default:throw new F(300);}a.rb(vc,b);var f=new Cg;a.rb(xc,f);return b.Ea(d.onUpgrade).then(function(){var g=new Sj(a);a.rb(yc,g);g=new ak;a.rb(zc,g);g=new sk;a.rb(Ac,g);return f.Ea(c)}).then(function(){if(e){var g=
new Ke(a);g.ab.subscribe(g.ee.bind(g))}d.enableInspector&&(window.top["#lfInspect"]=ik);return(new vg(a)).Ea(c)})};function wk(a){this.c=a;this.g=a.b(Bc);this.$=D(this.g.oa());this.Db=fb()}function xk(a){var b=a.c.b(xc),c=a.c.b(wc),d={};a.g.oa().forEach(function(e){var f=b.get(mf(e)).Ua();f=Df(c,f).map(function(g){return g.m});d[e.getName()]=f});return{name:a.g.name(),version:a.g.version(),tables:d}}n=wk.prototype;n.exec=function(){var a=xk(this);a=new Rd(new hc(-1,a),!0);return x([new H([a],[])])};n.G=m(0);n.da=h("$");n.W=function(){return ka(this)};n.getPriority=m(0);function yk(a,b){this.c=a;this.g=a.b(Bc);this.$=D(this.g.oa());this.Db=fb();this.Ba=b;this.ab=a.b(vc);this.V=a.b(wc);this.B=a.b(xc)}n=yk.prototype;n.exec=function(){if(!this.ab.Oc())throw new F(300);a:{var a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.B.get(mf(a[b])).Y().ia){a=!1;break a}a=!0}if(!a)throw new F(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new F(111);if(null==this.Ba.tables)throw new F(112);return zk(this)};n.G=m(1);n.da=h("$");n.W=function(){return ka(this)};
n.getPriority=m(0);function zk(a){var b=new td(a.c,a.$);b=a.ab.Fb(a.G(),E(a.$),b);for(var c in a.Ba.tables){var d=a.g.table(c),e=a.Ba.tables[c].map(function(k){return d.xb(k)}),f=b.I(c,d.kb,0);a.V.Xb(c,e);var g=a.B.kc.get(c)||[];e.forEach(function(k){g.forEach(function(l){var p=k.nb(l.getName());l.add(p,k.id())})});f.put(e)}return b.ka()};function Ak(a,b){this.c=a;this.ab=a.b(vc);this.Ia=a.b(zc);this.Hb=a.b(Ac);this.$=D(b);this.Qa=new td(this.c,this.$);this.Db=fb();this.wc=fb();this.ze=fb()}n=Ak.prototype;n.exec=function(){this.ze.resolve();return this.wc.ha};n.G=m(1);n.da=h("$");n.W=function(){return ka(this)};n.getPriority=m(2);function Bk(a){Je(a.Ia,a);return a.ze.ha}
function Ck(a,b){b=b.Ac();return b.je.bb().exec(a.Qa,b.context).then(function(c){return Jd(c[0])},function(c){this.Qa.Ib();var d=new lb(c.name);this.wc.reject(d);throw c;}.bind(a))}n.ka=function(){this.ja=this.ab.Fb(this.G(),E(this.$),this.Qa);this.ja.ka().then(function(){this.Lc();this.wc.resolve()}.bind(this),function(a){this.Qa.Ib();this.wc.reject(a)}.bind(this));return this.Db.ha};n.Ib=function(){this.Qa.Ib();this.wc.resolve();return this.Db.ha};
n.Lc=function(){var a=Ie(this.Hb,this.$);0!=a.length&&(a=new Fe(this.c,a),Je(this.Ia,a))};n.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new C(!1,0,0,0,0):a};function Dk(a){this.c=a;this.Ia=a.b(zc);this.Kb=null;this.Sa=0;0==Ek.size&&(Ek.set(0,D([1,4])),Ek.set(1,D([2])),Ek.set(2,D([3,5,6])),Ek.set(3,D([2,7])),Ek.set(4,D([7])),Ek.set(5,D([7])),Ek.set(6,D([7])))}t("lf.proc.Transaction",Dk);var Ek=A();function Fk(a,b){var c=Ek.get(a.Sa)||null;if(null===c||!c.has(b))throw new F(107,a.Sa,b);a.Sa=b}
Dk.prototype.exec=function(a){Fk(this,4);var b=[];try{a.forEach(function(c){c.$a();b.push(c.Ac())},this)}catch(c){return Fk(this,7),bb(c)}this.Kb=new Kh(this.c,b);return Je(this.Ia,this.Kb).then(function(c){Fk(this,7);return c.map(function(d){return Jd(d)})}.bind(this),function(c){Fk(this,7);throw c;}.bind(this))};Dk.prototype.exec=Dk.prototype.exec;Dk.prototype.Ff=function(a){Fk(this,1);this.Kb=new Ak(this.c,a);return Bk(this.Kb).then(function(){Fk(this,2)}.bind(this))};Dk.prototype.begin=Dk.prototype.Ff;
Dk.prototype.Ef=function(a){Fk(this,3);try{a.$a()}catch(b){return Fk(this,7),bb(b)}return Ck(this.Kb,a).then(function(b){Fk(this,2);return b}.bind(this),function(b){Fk(this,7);throw b;}.bind(this))};Dk.prototype.attach=Dk.prototype.Ef;Dk.prototype.ka=function(){Fk(this,5);return this.Kb.ka().then(function(){Fk(this,7)}.bind(this))};Dk.prototype.commit=Dk.prototype.ka;Dk.prototype.Ib=function(){Fk(this,6);return this.Kb.Ib().then(function(){Fk(this,7)}.bind(this))};Dk.prototype.rollback=Dk.prototype.Ib;
Dk.prototype.Y=function(){if(7!=this.Sa)throw new F(105);return this.Kb.Y()};Dk.prototype.stats=Dk.prototype.Y;function X(a){this.c=a;this.g=a.b(Bc);this.hd=!1}t("lf.proc.Database",X);X.prototype.Ea=function(a){this.c.rb(Bc,this.g);return vk(this.c,a).then(function(){this.hd=!0;this.Ia=this.c.b(zc);return this}.bind(this))};X.prototype.init=X.prototype.Ea;X.prototype.zb=h("g");X.prototype.getSchema=X.prototype.zb;function Gk(a){if(!a.hd)throw new F(2);}X.prototype.select=function(a){Gk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.Ab=function(){Gk(this);return new ji(this.c)};X.prototype.insert=X.prototype.Ab;X.prototype.Wd=function(){Gk(this);return new ji(this.c,!0)};X.prototype.insertOrReplace=X.prototype.Wd;X.prototype.update=function(a){Gk(this);return new ti(this.c,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){Gk(this);return new ii(this.c)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){Gk(this);this.c.b(Ac).Cd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){Gk(this);this.c.b(Ac).ne(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Nf=function(){Gk(this);return new Dk(this.c)};X.prototype.createTransaction=X.prototype.Nf;X.prototype.close=function(){try{this.c.b(vc).close()}catch(a){}this.c.clear();this.hd=!1};X.prototype.close=X.prototype.close;
X.prototype.Xf=function(){Gk(this);var a=new wk(this.c);return Je(this.Ia,a).then(function(b){return Jd(b[0])[0]})};X.prototype["export"]=X.prototype.Xf;X.prototype.import=function(a){Gk(this);a=new yk(this.c,a);return Je(this.Ia,a).then(m(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.U=a;this.A=b;this.Ye=c;this.We=d;this.xf=e;this.Ka=f||null}t("lf.schema.BaseColumn",Y);n=Y.prototype;n.getName=h("A");n.j=function(){return Td(this.U)+"."+this.A};n.toString=function(){return this.j()};n.I=h("U");n.G=h("xf");Y.prototype.getType=Y.prototype.G;Y.prototype.Da=function(){null==this.sa&&(this.sa=[],this.I().Da().forEach(function(a){-1!=a.f.map(function(b){return b.aa.getName()}).indexOf(this.A)&&this.sa.push(a)},this));return this.sa};
Y.prototype.Ca=function(){if(!q(this.fa)){var a=this.Da().filter(function(b){return 1!=b.f.length?!1:b.f[0].aa.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};Y.prototype.gc=h("We");Y.prototype.isNullable=Y.prototype.gc;Y.prototype.Cc=h("Ye");Y.prototype.Pa=function(a){return Vg(this,a,"eq")};Y.prototype.eq=Y.prototype.Pa;Y.prototype.ef=function(a){return Vg(this,a,"neq")};Y.prototype.neq=Y.prototype.ef;Y.prototype.rg=function(a){return Vg(this,a,"lt")};
Y.prototype.lt=Y.prototype.rg;Y.prototype.sg=function(a){return Vg(this,a,"lte")};Y.prototype.lte=Y.prototype.sg;Y.prototype.ag=function(a){return Vg(this,a,"gt")};Y.prototype.gt=Y.prototype.ag;Y.prototype.bg=function(a){return Vg(this,a,"gte")};Y.prototype.gte=Y.prototype.bg;Y.prototype.match=function(a){return Vg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Gf=function(a,b){return Vg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Gf;
Y.prototype.cg=function(a){return Vg(this,a,"in")};Y.prototype["in"]=Y.prototype.cg;Y.prototype.mg=function(){return this.Pa(null)};Y.prototype.isNull=Y.prototype.mg;Y.prototype.lg=function(){return this.ef(null)};Y.prototype.isNotNull=Y.prototype.lg;Y.prototype.as=function(a){return new Y(this.U,this.A,this.Ye,this.We,this.xf,a)};Y.prototype.as=Y.prototype.as;function Hk(a){this.g=a;this.Id=new bd;this.oe=new bd;this.gf=new bd;this.Ie=A();this.h=new bd;this.Ee=new bd;this.mf=new bd;this.He=new bd;Ik(this)}function Ik(a){a.g.oa().forEach(function(b){var c=b.getName();b.Mb.Ud.forEach(function(d){this.gf.set(c,this.g.table(d.Wa));this.h.set(d.Wa,b);0==d.action?(this.oe.set(d.Wa,d),this.mf.set(d.Wa,b)):(this.Id.set(d.Wa,d),this.Ee.set(d.Wa,b));this.Ie.set(b.getName()+"."+d.vb,d.Wa);this.He.set(d.Wa+"."+d.Ic,b.getName())},this)},a)}
function jd(a,b,c){if(null!=c)return 1==c?a.Id.get(b):a.oe.get(b);c=a.Id.get(b);a=a.oe.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Qh(a,b){a=b.get(a);return null===a?[]:a}function Sh(a,b){var c=D();b.forEach(function(d){(d=this.Ie.get(d))&&c.add(d)},a);return E(c).map(function(d){return this.g.table(d)},a)}function Oh(a,b,c){return null!=c?0==c?Qh(b,a.mf):Qh(b,a.Ee):Qh(b,a.h)}
function Th(a,b){var c=D();b.forEach(function(d){(d=this.He.get(d))&&d.forEach(function(e){c.add(e)})},a);return E(c).map(function(d){return this.g.table(d)},a)};function Jk(a,b,c){this.sd=a;this.xg=b;this.Ud=c}t("lf.schema.Constraint",Jk);Jk.prototype.$f=h("sd");Jk.prototype.getPrimaryKey=Jk.prototype.$f;Jk.prototype.Zf=h("Ud");Jk.prototype.getForeignKeys=Jk.prototype.Zf;function Kk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new F(540,c);this.Ge=b;this.vb=a.local;this.Wa=d[0];this.Ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){Lk(a);this.Qd=ee();this.A=a;this.K=A();this.zd=D();this.nc=D();this.nd=D();this.Fa=null;this.sa=A();this.rd=!1;this.yb=[]}t("lf.schema.TableBuilder",Z);function Mk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Nk=D([0,6]);function Lk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new F(502,a);}function Ok(a,b){if(b==a.A)throw new F(546,b);if(a.K.has(b)||a.sa.has(b)||a.nc.has(b))throw new F(503,a.A+"."+b);}
function Pk(a,b){var c=!1;b.forEach(function(d){var e=this.K.get(d.name);c=c||d.autoIncrement;if(d.autoIncrement&&3!=e)throw new F(504);},a);if(c&&1<b.length)throw new F(505);}function Qk(a){if(null!==a.Fa){var b=a.sa.get(a.Fa).map(function(d){return d.name}),c=0;if(a.yb.some(function(d,e){c=e;return-1!=b.indexOf(d.vb)},a))throw new F(543,a.yb[c].name);}}
function Rk(a){if(null!==a.Fa){var b=function(d){return d.name},c=JSON.stringify(a.sa.get(a.Fa).map(b));a.sa.forEach(function(d,e){if(e!=this.Fa&&(d=d.map(b),JSON.stringify(d)==c))throw new F(544,this.A+"."+e);},a)}}function Sk(a){null===a.Fa||a.sa.get(a.Fa).forEach(function(b){if(this.nd.has(b.name))throw new F(545,this.A+"."+b.name);},a)}Z.prototype.zf=function(a,b){Lk(a);Ok(this,a);this.K.set(a,b);Nk.has(b)&&this.Be([a]);return this};Z.prototype.addColumn=Z.prototype.zf;
Z.prototype.Bf=function(a,b){var c=this.A;this.Fa="pk"+(c[0].toUpperCase()+c.substring(1));Lk(this.Fa);Ok(this,this.Fa);a=Tk(this,a,!0,void 0,b);Pk(this,a);1==a.length&&this.zd.add(a[0].name);this.nc.add(this.Fa);this.sa.set(this.Fa,a);return this};Z.prototype.addPrimaryKey=Z.prototype.Bf;
Z.prototype.Af=function(a,b){Lk(a);Ok(this,a);b=new Kk(b,this.A,a);q(b.action)||(b.action=0);q(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new F(506);if(!this.K.has(b.vb))throw new F(540,a);this.yb.push(b);this.Ae(a,[b.vb],this.zd.has(b.vb));return this};Z.prototype.addForeignKey=Z.prototype.Af;Z.prototype.Cf=function(a,b){Lk(a);Ok(this,a);b=Tk(this,b,!0);1==b.length&&(this.zd.add(b[0].name),Uk(this,b[0].name));this.sa.set(a,b);this.nc.add(a);return this};Z.prototype.addUnique=Z.prototype.Cf;
function Uk(a,b){a.yb.forEach(function(c){c.vb==b&&this.nc.add(c.name.split(".")[1])},a)}Z.prototype.Be=function(a){Tk(this,a,!1).forEach(function(b){this.nd.add(b.name)},this);return this};Z.prototype.addNullable=Z.prototype.Be;Z.prototype.Ae=function(a,b,c,d){Lk(a);Ok(this,a);b=Tk(this,b,!0,d);c&&this.nc.add(a);this.sa.set(a,b);return this};Z.prototype.addIndex=Z.prototype.Ae;Z.prototype.Cb=ba("rd");Z.prototype.persistentIndex=Z.prototype.Cb;
Z.prototype.zb=function(){Qk(this);Rk(this);Sk(this);return new (Vk(this))};Z.prototype.getSchema=Z.prototype.zb;function Tk(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(g){return new Mk({name:g,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(g){return new Mk(g)});f.forEach(function(g){if(!this.K.has(g.name))throw new F(508,this.A,g.name);if(c){var k=this.K.get(g.name);if(0==k||6==k)throw new F(509,this.A,g.name);}},a);return f}
function Vk(a){function b(){function c(k){return a.sa.get(k).map(function(l){return{aa:this[l.name],order:l.order,autoIncrement:l.autoIncrement}},this)}var d=gc(a.K).map(function(k){this[k]=new Y(this,k,a.zd.has(k),a.nd.has(k),a.K.get(k));return this[k]},this),e=gc(a.sa).map(function(k){return new Xg(a.A,k,a.nc.has(k),c.call(this,k))},this);Q.call(this,a.A,d,e,a.rd);var f=null===a.Fa?null:new Xg(a.A,a.Fa,!0,c.call(this,a.Fa)),g=d.filter(function(k){return!a.nd.has(k.getName())});this.Mb=new Jk(f,
g,a.yb);this.qf=Wk(a,d,e)}u(b,Q);b.prototype.xb=function(c){return new this.qf(ic++,c)};b.prototype.createRow=b.prototype.xb;b.prototype.kb=function(c){var d={};this.lb().forEach(function(e){var f=e.getName();e=e.G();var g=c.value[f];if(0==e)if(e=g,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);g=new ArrayBuffer(e.length/2);for(var k=new Uint8Array(g),l=0,p=0;l<e.length;l+=2)k[p++]=parseInt(e.substr(l,2),16);e=g}else e=null;else e=2==e?null!=g?new Date(g):null:g;d[f]=e},this);return new this.qf(c.id,d)};
b.prototype.deserializeRow=b.prototype.kb;b.prototype.Ne=h("Mb");b.prototype.getConstraint=b.prototype.Ne;return b}
function Wk(a,b,c){function d(k,l){this.K=b;this.sa=c;hc.call(this,k,l)}u(d,hc);d.prototype.Ke=function(){var k={};this.K.forEach(function(l){k[l.getName()]=l.gc()?null:ad[l.G()]});return k};d.prototype.wf=function(){var k={};this.K.forEach(function(l){var p=l.getName();l=l.G();var r=this.m[p];k[p]=0==l?null!=r?lc(r):null:2==l?null!=r?r.getTime():null:6==l?null!=r?r:null:r},this);return k};var e=function(k){var l=this.K.get(k.getName()),p=this.Qd.Ze.get(l)||null;return function(r){return p(r[k.getName()])}}.bind(a),
f=function(k){var l=k.map(function(p){return e(p.aa)});return function(p){return l.map(function(r){return r(p)})}}.bind(a),g={};c.forEach(function(k){var l=k.j();k=1==k.f.length?e(k.f[0].aa):f(k.f);g[l]=k});d.prototype.nb=function(k){return-1!=k.indexOf("#")?this.id():g.hasOwnProperty(k)?g[k](this.m):null};return d};function Xk(a,b){this.g=new Yk(a,b);this.tb=A();this.xc=!1;this.i=null;this.Yc=!1}t("lf.schema.Builder",Xk);function Zk(a,b){b.yb.forEach(function(c){var d=c.Wa;if(!this.tb.has(d))throw new F(536,c.name);d=this.tb.get(d).zb();var e=c.Ic;if(!d.hasOwnProperty(e))throw new F(537,c.name);if(b.zb()[c.vb].G()!=d[e].G())throw new F(538,c.name);if(!d[e].Cc())throw new F(539,c.name);},a)}
Xk.prototype.Kf=function(a){a.yb.forEach(function(b){this.tb.get(b.Wa).yb.forEach(function(c){if(c.vb==b.Ic)throw new F(534,b.name);},this)},this)};function $k(a){a.xc||(a.tb.forEach(function(b){Zk(this,b);b=b.zb();this.g.M.set(b.getName(),b)},a),B(a.tb).forEach(a.Kf,a),al(a),a.tb.clear(),a.xc=!0)}function bl(a,b,c){b.ye||(b.ye=!0,b.fe=!0,b.Le.forEach(function(d){d=c.get(d);if(!d.ye)bl(this,d,c);else if(d.fe&&b!=d)throw new F(533);},a));b.fe=!1}
function al(a){var b=A();a.g.M.forEach(function(c,d){b.set(d,new cl(d))},a);a.tb.forEach(function(c,d){c.yb.forEach(function(e){b.get(e.Wa).Le.add(d)})});B(b).forEach(function(c){bl(this,c,b)},a)}function cl(a){this.fe=this.ye=!1;this.Le=D();this.lc=a}Xk.prototype.zb=function(){this.xc||$k(this);return this.g};Xk.prototype.getSchema=Xk.prototype.zb;Xk.prototype.Qe=function(){var a=new uc("ns_"+this.g.name()),b=gk();if(b.md(a))var c=b.b(a);else c=new ek,b.rb(a,c);return c};Xk.prototype.getGlobal=Xk.prototype.Qe;
Xk.prototype.connect=function(a){if(this.Yc||null!==this.i&&this.i.hd)throw new F(113);this.Yc=!0;if(null===this.i){var b=this.Qe();b.md(Bc)||b.rb(Bc,this.zb());this.i=new X(b)}return this.i.Ea(a).then(function(c){this.Yc=!1;return c}.bind(this),function(c){this.Yc=!1;this.i.close();throw c;}.bind(this))};Xk.prototype.connect=Xk.prototype.connect;Xk.prototype.Mf=function(a){if(this.tb.has(a))throw new F(503,a);if(this.xc)throw new F(535);this.tb.set(a,new Z(a));return this.tb.get(a)};
Xk.prototype.createTable=Xk.prototype.Mf;Xk.prototype.se=function(a){if(this.xc)throw new F(535);this.g.se(a);return this};Xk.prototype.setPragma=Xk.prototype.se;function Yk(a,b){this.A=a;this.Ta=b;this.M=A();this.ke={Sf:!1}}t("lf.schema.DatabaseSchema",Yk);Yk.prototype.name=h("A");Yk.prototype.name=Yk.prototype.name;Yk.prototype.version=h("Ta");Yk.prototype.version=Yk.prototype.version;Yk.prototype.oa=function(){return B(this.M)};Yk.prototype.tables=Yk.prototype.oa;
Yk.prototype.table=function(a){if(!this.M.has(a))throw new F(101,a);return this.M.get(a)};Yk.prototype.table=Yk.prototype.table;Yk.prototype.info=function(){this.Ve||(this.Ve=new Hk(this));return this.Ve};Yk.prototype.Fg=h("ke");Yk.prototype.pragma=Yk.prototype.Fg;Yk.prototype.se=ba("ke");t("lf.schema.create",function(a,b){return new Xk(a,b)});w.prototype.catch=w.prototype.ve;w.prototype["catch"]=w.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.min.js.map
